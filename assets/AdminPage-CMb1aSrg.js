import{r as o,j as e,s as A,f as Le}from"./index-Br5uLbou.js";import{P as Se}from"./Pagination-BsxvG_W6.js";import{F as xe,S as me}from"./SpinnerIcon-CUFYkYsr.js";const Be=()=>e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Ze=({onSubmit:i,initialData:r,onCancel:p,isKurdishByDefault:x=!1,isLoading:w=!1,allGenres:u=[]})=>{var ee,oe,Q;const[n,f]=o.useState({title:"",description:"",poster_url:"",backdrop_url:"",year:new Date().getFullYear(),genres:[],tags:[],servers:[{name:"Server 1",url:"https://vidtube.pro/embed-1y2lihgthstv.html",quality:"1080p"}],backup_servers:[],download_url:"",trailer_url:"",is_kurdish:!1,imdb_rating:void 0,quality:"",duration:"",language:"",country:"",directors:[],writers:[],cast:[]}),[N,L]=o.useState(""),[U,D]=o.useState(""),[G,O]=o.useState(!1),[E,$]=o.useState(""),[B,S]=o.useState(!1),[q,v]=o.useState(""),[F,z]=o.useState(""),[M,_]=o.useState(!1),m=o.useRef(null);o.useEffect(()=>{r?(f({title:r.title||"",description:r.description||"",poster_url:r.poster_url||"",backdrop_url:r.backdrop_url||"",year:r.year||new Date().getFullYear(),genres:r.genres||[],tags:r.tags||[],servers:r.servers&&r.servers.length>0?r.servers:[{name:"Server 1",url:"",quality:"1080p"}],backup_servers:r.backup_servers||[],download_url:r.download_url||"",trailer_url:r.trailer_url||"",is_kurdish:r.is_kurdish||!1,imdb_rating:r.imdb_rating,quality:r.quality||"",duration:r.duration||"",language:r.language||"",country:r.country||"",directors:r.directors||[],writers:r.writers||[],cast:r.cast||[]}),L((r.tags||[]).join(", "))):(f({title:"",description:"",poster_url:"",backdrop_url:"",year:new Date().getFullYear(),genres:[],tags:[],servers:[{name:"Server 1",url:"https://vidtube.pro/embed-1y2lihgthstv.html",quality:"1080p"}],backup_servers:[],download_url:"",trailer_url:"",is_kurdish:x,imdb_rating:void 0,quality:"",duration:"",language:"",country:"",directors:[],writers:[],cast:[]}),L(""))},[r,x]),o.useEffect(()=>{const l=s=>{m.current&&!m.current.contains(s.target)&&S(!1)};return document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[]),o.useEffect(()=>{const l=n.download_url;if(l&&l.includes("vidtube.pro/d/")){const s=l.replace("/d/","/embed-");n.servers.length>0&&n.servers[0].url!==s&&f(a=>{const h=[...a.servers];return h[0]={...h[0],url:s},{...a,servers:h}})}},[n.download_url,n.servers]),o.useEffect(()=>{if(!r){const l=n.title.match(/\b(19[89]\d|20\d{2})\b/);if(l&&l[0]){const s=parseInt(l[0],10),a=n.title.replace(l[0],"").replace(/\s\s+/g," ").trim();f(h=>h.year!==s||h.title!==a?{...h,year:s,title:a}:h)}}},[n.title,r]),o.useEffect(()=>{!r&&!n.backdrop_url.trim()&&f(l=>({...l,backdrop_url:l.poster_url}))},[n.poster_url,r,n.backdrop_url]);const c=l=>{const{name:s,value:a,type:h}=l.target;if(h==="checkbox"){const{checked:k}=l.target;f(t=>({...t,[s]:k}))}else if(s==="year"){const k=parseInt(a,10);f(t=>({...t,[s]:isNaN(k)?0:k}))}else if(s==="imdb_rating"){const k=parseFloat(a);f(t=>({...t,imdb_rating:isNaN(k)?void 0:k}))}else f(k=>({...k,[s]:a}))},g=l=>{L(l.target.value)},b=l=>{f(s=>{const a=s.genres||[],h=a.includes(l)?a.filter(k=>k!==l):[...a,l];return{...s,genres:h}})},C=async()=>{const l=F.trim();if(l){if(u.some(s=>s.toLowerCase()===l.toLowerCase())){alert("هذه الفئة موجودة بالفعل.");return}_(!0);try{const{error:s}=await A.from("categories").insert({name:l});if(s)throw s;f(a=>({...a,genres:[...a.genres||[],l]})),z("")}catch(s){console.error("Error adding new genre:",s),alert("حدث خطأ أثناء إضافة الفئة الجديدة.")}finally{_(!1)}}},d=(l,s,a)=>{const h=[...n.servers];h[l]={...h[l],[s]:a},f(k=>({...k,servers:h}))},T=()=>{f(l=>{const s={name:`Server ${l.servers.length+1}`,url:"",quality:"1080p"};return{...l,servers:[...l.servers,s]}})},I=l=>{f(s=>({...s,servers:s.servers.filter((a,h)=>h!==l)}))},V=(l,s,a)=>{const h=[...n.backup_servers||[]];h[l]={...h[l],[s]:a},f(k=>({...k,backup_servers:h}))},ie=()=>{f(l=>{var s;return{...l,backup_servers:[...l.backup_servers||[],{name:`Server ${(((s=l.backup_servers)==null?void 0:s.length)||0)+1}`,url:"",quality:"1080p",no_sub_url:""}]}})},Z=l=>{f(s=>({...s,backup_servers:(s.backup_servers||[]).filter((a,h)=>h!==l)}))},le=async()=>{var l,s,a,h,k,t,y,j;if(!U){$("Please enter a URL.");return}O(!0),$("");try{$("Fetching movie page...");const P=`https://corsproxy.io/?${encodeURIComponent(U)}`,Y=await fetch(P);if(!Y.ok)throw new Error(`Failed to fetch URL: ${Y.statusText}`);const X=await Y.text(),se=new DOMParser,K=se.parseFromString(X,"text/html"),J=ae=>{var Oe,qe,Fe;const de=Array.from(K.querySelectorAll(".RightTaxContent > li")).find(Ne=>{var ue,Te;return(Te=(ue=Ne.querySelector("span"))==null?void 0:ue.textContent)==null?void 0:Te.trim().startsWith(ae)});if(!de)return[];const je=Array.from(de.querySelectorAll("a, strong"));if(je.length>0)return je.map(Ne=>{var ue;return((ue=Ne.textContent)==null?void 0:ue.trim())||""}).filter(Boolean);const we=de.cloneNode(!0);(Oe=we.querySelector("i"))==null||Oe.remove(),(qe=we.querySelector("span"))==null||qe.remove();const Ae=(Fe=we.textContent)==null?void 0:Fe.trim().replace(/^:/,"").trim();return Ae?Ae.split(/\s*,\s*/):[]},ce=((s=(l=K.querySelector("h1.post-title"))==null?void 0:l.textContent)==null?void 0:s.trim())||"",he=ce.match(/\b(19\d{2}|20\d{2})\b/),ze=he?parseInt(he[0],10):new Date().getFullYear();let re=ce;re=re.replace(/فيلم|مترجم|اون لاين|اونلاين|WEB-DL|BluRay|HD/gi,"").replace(/[\u0600-\u06FF]+/g,""),he&&(re=re.replace(he[0],"")),re=re.trim().replace(/^[^a-zA-Z0-9\s]+|[^a-zA-Z0-9\s]+$/g,"").trim();const Ue=((h=(a=K.querySelector(".story p"))==null?void 0:a.textContent)==null?void 0:h.trim())||"",Ee=((k=K.querySelector(".MainSingle .left .image img"))==null?void 0:k.getAttribute("src"))||"",Ie=((y=(t=K.querySelector(".imdbR span"))==null?void 0:t.textContent)==null?void 0:y.trim())||"0",De=parseFloat(Ie)||void 0,Je=J("نوع الفيلم"),We=J("جودة الفيلم").join(", "),Ye=J("توقيت الفيلم").join(", "),Ve=J("لغة الفيلم").join(", "),He=J("دولة الفيلم").join(", "),Ke=J("المخرجين"),Qe=J("المؤلفين"),Xe=J("بطولة");let $e="";const be=K.querySelector("a.download"),Me=be==null?void 0:be.getAttribute("href");if(Me){$("Fetching download link...");const ae=`https://corsproxy.io/?${encodeURIComponent(Me)}`,ye=await fetch(ae);if(ye.ok){const de=await ye.text();$e=((j=se.parseFromString(de,"text/html").querySelector('a.downloadsLink, a[href*="vidtube.pro/d/"]'))==null?void 0:j.getAttribute("href"))||""}}f(ae=>({...ae,title:re,year:ze||ae.year,description:Ue,poster_url:Ee,backdrop_url:Ee,imdb_rating:De,genres:[...new Set([...ae.genres,...Je])],quality:We,duration:Ye,language:Ve,country:He,directors:Ke,writers:Qe,cast:Xe,download_url:$e})),$("تم جلب البيانات بنجاح!")}catch(P){console.error("Scraping failed:",P),$(`فشل جلب البيانات: ${P.message}.`)}finally{O(!1)}},H=l=>{if(l.preventDefault(),n.genres.length===0){alert("الرجاء اختيار فئة واحدة على الأقل.");return}const s=N.split(",").map(a=>a.trim()).filter(Boolean);i({...n,tags:s})},ne=u.filter(l=>l.toLowerCase().includes(q.toLowerCase())),W="w-full bg-slate-700 text-white p-3 rounded-md focus:ring-2 focus:ring-cyan-500 border-2 border-slate-600 focus:border-cyan-500 outline-none transition",R="bg-slate-600 text-white p-2 rounded-md border border-slate-500 focus:border-cyan-500 outline-none";return e.jsxs("form",{onSubmit:H,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3 p-4 bg-slate-900/50 rounded-lg border border-slate-700",children:[e.jsx("label",{htmlFor:"scrape_url",className:"block text-lg font-semibold text-white",children:"جلب البيانات من رابط"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{id:"scrape_url",type:"url",value:U,onChange:l=>D(l.target.value),placeholder:"https://web6.topcinema.cam/...",className:`${W} flex-grow`}),e.jsxs("button",{type:"button",onClick:le,disabled:G,className:"bg-cyan-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-cyan-700 flex-shrink-0 flex items-center disabled:bg-slate-500",children:[G&&e.jsx(Be,{}),G?"جاري الجلب...":"جلب البيانات"]})]}),E&&e.jsx("p",{className:`text-sm mt-1 ${E.startsWith("فشل")?"text-red-400":"text-green-400"}`,children:E})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsx("input",{type:"text",name:"title",value:n.title,onChange:c,placeholder:"عنوان الفيلم (بالانجليزية)",required:!0,className:W})}),e.jsx("input",{type:"number",name:"year",value:n.year||"",onChange:c,placeholder:"سنة الإنتاج",required:!0,className:W})]}),e.jsx("textarea",{name:"description",value:n.description,onChange:c,placeholder:"وصف الفيلم",required:!0,className:`${W} h-32`}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("input",{type:"url",name:"poster_url",value:n.poster_url,onChange:c,placeholder:"رابط صورة البوستر",required:!0,className:W}),e.jsx("input",{type:"url",name:"backdrop_url",value:n.backdrop_url,onChange:c,placeholder:"رابط صورة الخلفية",required:!0,className:W})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("input",{type:"number",name:"imdb_rating",value:n.imdb_rating??"",onChange:c,placeholder:"تقيم الفيلم",step:"0.1",min:"0",max:"10",className:W}),e.jsx("input",{type:"url",name:"trailer_url",value:n.trailer_url??"",onChange:c,placeholder:"رابط المقطع الدعائي (اختياري)",className:W})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"tags",className:"block text-lg font-semibold text-white mb-2",children:"الكلمات الدلالية (Tags)"}),e.jsx("input",{id:"tags",type:"text",name:"tags",value:N,onChange:g,placeholder:"أكشن, بطل خارق, إثارة (مفصولة بفاصلة)",className:W})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{id:"is_kurdish",type:"checkbox",name:"is_kurdish",checked:!!n.is_kurdish,onChange:c,className:"h-5 w-5 text-cyan-500 bg-slate-700 border-slate-600 rounded focus:ring-cyan-600 focus:ring-offset-slate-800 cursor-pointer"}),e.jsx("label",{htmlFor:"is_kurdish",className:"text-white cursor-pointer",children:"هذا الفيلم مدبلج للكردية"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-lg font-semibold text-white mb-2",children:"الفئات (اختر واحدة على الأقل)"}),e.jsxs("div",{className:"relative",ref:m,children:[e.jsxs("button",{type:"button",onClick:()=>S(l=>!l),className:`${W} text-right flex justify-between items-center`,children:[e.jsx("span",{children:n.genres.length>0?n.genres.join(", "):"اختر الفئات..."}),e.jsx("svg",{className:`h-5 w-5 transition-transform duration-200 ${B?"rotate-180":""}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),B&&e.jsxs("div",{className:"absolute z-10 mt-1 w-full bg-slate-900 border border-slate-700 rounded-md shadow-lg max-h-60 overflow-y-auto",children:[e.jsx("div",{className:"p-2 border-b border-slate-700",children:e.jsx("input",{type:"text",placeholder:"ابحث أو أضف فئة...",value:q,onChange:l=>v(l.target.value),className:"w-full bg-slate-700 text-white p-2 rounded-md border-slate-600 outline-none"})}),e.jsx("ul",{className:"p-1",children:ne.map(l=>e.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-slate-700 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.genres.includes(l),onChange:()=>b(l),className:"h-4 w-4 text-cyan-500 bg-slate-700 border-slate-600 rounded focus:ring-cyan-600"}),e.jsx("span",{className:"text-white",children:l})]},l))}),e.jsx("div",{className:"p-2 border-t border-slate-700",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"إضافة فئة جديدة...",value:F,onChange:l=>z(l.target.value),className:"flex-grow bg-slate-700 text-white p-2 rounded-md border-slate-600 outline-none"}),e.jsx("button",{type:"button",onClick:C,disabled:M||!F.trim(),className:"bg-cyan-600 text-white px-3 py-1 rounded-md text-sm hover:bg-cyan-700 disabled:bg-slate-500",children:M?"...":"إضافة"})]})})]})]})]}),e.jsxs("details",{className:"bg-slate-900/30 p-4 rounded-lg border border-slate-700",open:!0,children:[e.jsx("summary",{className:"text-lg font-semibold text-white cursor-pointer",children:"تفاصيل إضافية للفيلم"}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 gap-4",children:[e.jsx("input",{type:"text",name:"quality",value:n.quality,onChange:c,placeholder:"الجودة (e.g. 1080p WEB-DL)",className:R}),e.jsx("input",{type:"text",name:"duration",value:n.duration,onChange:c,placeholder:"مدة العرض",className:R}),e.jsx("input",{type:"text",name:"language",value:n.language,onChange:c,placeholder:"اللغة",className:R}),e.jsx("input",{type:"text",name:"country",value:n.country,onChange:c,placeholder:"الدولة",className:R})]}),e.jsx("textarea",{value:(ee=n.directors)==null?void 0:ee.join(", "),onChange:l=>f(s=>({...s,directors:l.target.value.split(",").map(a=>a.trim())})),placeholder:"المخرجين (مفصولة بفاصلة)",className:`${R} w-full`,rows:2}),e.jsx("textarea",{value:(oe=n.writers)==null?void 0:oe.join(", "),onChange:l=>f(s=>({...s,writers:l.target.value.split(",").map(a=>a.trim())})),placeholder:"المؤلفين (مفصولة بفاصلة)",className:`${R} w-full`,rows:2}),e.jsx("textarea",{value:(Q=n.cast)==null?void 0:Q.join(", "),onChange:l=>f(s=>({...s,cast:l.target.value.split(",").map(a=>a.trim())})),placeholder:"البطولة (مفصولة بفاصلة)",className:`${R} w-full`,rows:3})]})]}),e.jsxs("div",{className:"space-y-4 border-t border-slate-700 pt-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"سيرفرات المشاهدة"}),n.servers.map((l,s)=>e.jsxs("div",{className:"bg-slate-900/50 p-3 rounded-lg border border-slate-700 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:l.name,onChange:a=>d(s,"name",a.target.value),placeholder:"اسم السيرفر",className:`${R} flex-1`}),e.jsxs("select",{value:l.quality,onChange:a=>d(s,"quality",a.target.value),className:`${R} w-28`,children:[e.jsx("option",{value:"1080p",children:"1080p"}),e.jsx("option",{value:"720p",children:"720p"}),e.jsx("option",{value:"480p",children:"480p"})]}),n.servers.length>1&&e.jsx("button",{type:"button",onClick:()=>I(s),className:"bg-red-600 text-white p-2 rounded-md hover:bg-red-700 text-xs",children:"X"})]}),s===0?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[e.jsx("input",{type:"url",value:l.url,onChange:a=>d(s,"url",a.target.value),placeholder:"رابط السيرفر 1",required:!0,className:`${R} w-full`}),e.jsx("input",{type:"url",name:"download_url",value:n.download_url||"",onChange:c,placeholder:"رابط تحميل الفيلم (اختياري)",className:`${R} w-full`})]}):e.jsx("input",{type:"url",value:l.url,onChange:a=>d(s,"url",a.target.value),placeholder:"رابط السيرفر",required:!0,className:`${R} w-full`})]},s)),e.jsx("button",{type:"button",onClick:T,className:"bg-slate-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-500",children:"إضافة سيرفر"})]}),e.jsxs("div",{className:"space-y-4 border-t border-slate-700 pt-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"سيرفرات احتياطية (مشغل خارجي)"}),(n.backup_servers||[]).map((l,s)=>e.jsxs("div",{className:"bg-slate-900/50 p-3 rounded-lg border border-slate-700 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:l.name,onChange:a=>V(s,"name",a.target.value),placeholder:"اسم السيرفر",className:`${R} flex-1`}),e.jsxs("select",{value:l.quality,onChange:a=>V(s,"quality",a.target.value),className:`${R} w-28`,children:[e.jsx("option",{value:"1080p",children:"1080p"}),e.jsx("option",{value:"720p",children:"720p"}),e.jsx("option",{value:"480p",children:"480p"})]}),e.jsx("button",{type:"button",onClick:()=>Z(s),className:"bg-red-600 text-white p-2 rounded-md hover:bg-red-700 text-xs",children:"X"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[e.jsx("input",{type:"url",value:l.url,onChange:a=>V(s,"url",a.target.value),placeholder:"رابط السيرفر (مع ترجمة)",className:`${R} w-full`}),e.jsx("input",{type:"url",value:l.no_sub_url||"",onChange:a=>V(s,"no_sub_url",a.target.value),placeholder:"رابط السيرفر (بدون ترجمة)",className:`${R} w-full`})]})]},s)),e.jsx("button",{type:"button",onClick:ie,className:"bg-slate-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-500",children:"إضافة سيرفر احتياطي"})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-slate-700",children:[e.jsx("button",{type:"button",onClick:p,className:"bg-slate-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-500 transition-colors disabled:opacity-50",disabled:w,children:"إلغاء"}),e.jsxs("button",{type:"submit",className:"flex items-center justify-center bg-cyan-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-cyan-600 transition-colors disabled:bg-cyan-800 disabled:cursor-not-allowed",disabled:w,children:[w&&e.jsx(Be,{}),w?r?"جاري التحديث...":"جاري الإضافة...":r?"تحديث الفيلم":"إضافة الفيلم"]})]})]})},es=()=>e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),te=({isOpen:i,onClose:r,onConfirm:p,title:x,message:w,isLoading:u=!1})=>{const[n,f]=o.useState(i);return o.useEffect(()=>{if(i)f(!0);else{const N=setTimeout(()=>f(!1),300);return()=>clearTimeout(N)}},[i]),n?e.jsx("div",{className:`fixed inset-0 bg-slate-900/80 backdrop-blur-sm flex items-center justify-center z-50 p-4 ${i?"animate-fade-in":"animate-fade-out"}`,onClick:r,"aria-modal":"true",role:"dialog",children:e.jsxs("div",{className:`relative bg-slate-800 p-6 rounded-lg shadow-xl w-full max-w-md border border-slate-700 ${i?"animate-zoom-in":"animate-zoom-out"}`,onClick:N=>N.stopPropagation(),children:[e.jsxs("div",{className:"sm:flex sm:items-start",children:[e.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-500/20 sm:mx-0 sm:h-10 sm:w-10",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:mr-4 sm:text-right flex-grow",children:[e.jsx("h3",{className:"text-lg leading-6 font-bold text-white",id:"modal-title",children:x}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-slate-300",children:w})})]})]}),e.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse sm:justify-start gap-3",children:[e.jsxs("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 focus:ring-offset-slate-800 sm:w-auto sm:text-sm disabled:bg-red-800 disabled:cursor-not-allowed",onClick:p,disabled:u,children:[u&&e.jsx(es,{}),u?"جاري الحذف...":"حذف"]}),e.jsx("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-slate-600 shadow-sm px-4 py-2 bg-slate-700 text-base font-medium text-white hover:bg-slate-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-500 focus:ring-offset-slate-800 sm:mt-0 sm:w-auto sm:text-sm disabled:opacity-50",onClick:r,disabled:u,children:"إلغاء"})]})]})}):null},ss=10,Pe=()=>e.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg overflow-hidden mt-8 animate-pulse",children:[e.jsxs("div",{className:"p-4 flex justify-between items-center",children:[e.jsx("div",{className:"h-10 bg-gray-700 rounded w-40"}),e.jsx("div",{className:"h-8 bg-gray-700 rounded w-64"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gray-700",children:e.jsx("tr",{children:[...Array(9)].map((i,r)=>e.jsx("th",{className:"px-4 py-3",children:e.jsx("div",{className:"h-4 bg-gray-600 rounded"})},r))})}),e.jsx("tbody",{children:[...Array(ss)].map((i,r)=>e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("td",{className:"px-4 py-2",children:e.jsx("div",{className:"h-6 w-6 bg-gray-600 rounded"})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("div",{className:"h-20 w-14 bg-gray-600 rounded"})}),[...Array(7)].map((p,x)=>e.jsx("td",{className:"px-4 py-2",children:e.jsx("div",{className:"h-4 bg-gray-600 rounded"})},x))]},r))})]})})]}),_e=({message:i,type:r,onClose:p})=>(o.useEffect(()=>{const u=setTimeout(p,5e3);return()=>clearTimeout(u)},[p]),e.jsx("div",{className:`fixed top-24 right-5 z-[100] p-4 rounded-lg shadow-lg text-white border-l-4 animate-fade-in-down ${r==="success"?"bg-green-600 border-green-500":"bg-red-600 border-red-500"}`,role:"alert",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("p",{className:"font-bold",children:i}),e.jsx("button",{onClick:p,className:"absolute top-1 right-2 text-2xl font-bold leading-none",children:"×"})]})})),Ge=({genres:i,onSubmit:r,onClose:p,isLoading:x})=>{const[w,u]=o.useState(i[0]||""),[n,f]=o.useState("add"),N=L=>{L.preventDefault(),w&&r(w,n)};return e.jsx(xe,{title:"تغيير الفئة بشكل جماعي",onClose:p,isOpen:!0,children:e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsx("p",{className:"text-gray-300",children:"اختر فئة لإضافتها أو إزالتها من الأفلام المحددة."}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("select",{value:w,onChange:L=>u(L.target.value),className:"flex-grow bg-gray-700 text-white p-3 rounded-md focus:ring-2 focus:ring-cyan-500 border-none outline-none",children:i.map(L=>e.jsx("option",{value:L,children:L},L))}),e.jsxs("select",{value:n,onChange:L=>f(L.target.value),className:"bg-gray-700 text-white p-3 rounded-md focus:ring-2 focus:ring-cyan-500 border-none outline-none",children:[e.jsx("option",{value:"add",children:"إضافة"}),e.jsx("option",{value:"remove",children:"إزالة"})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-gray-700",children:[e.jsx("button",{type:"button",onClick:p,disabled:x,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-gray-500 transition-colors disabled:opacity-50",children:"إلغاء"}),e.jsxs("button",{type:"submit",disabled:x||!w,className:"flex items-center justify-center bg-cyan-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-cyan-600 transition-colors disabled:bg-cyan-800",children:[x&&e.jsx(me,{}),x?"جاري التنفيذ...":"تطبيق التغيير"]})]})]})})},ts=({onSubmit:i,onClose:r,isLoading:p})=>{const[x,w]=o.useState(new Date().getFullYear()),u=n=>{n.preventDefault(),i(x)};return e.jsx(xe,{title:"تغيير سنة الإنتاج بشكل جماعي",onClose:r,isOpen:!0,children:e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsx("p",{className:"text-gray-300",children:"أدخل سنة الإنتاج الجديدة ليتم تطبيقها على جميع الأفلام المحددة."}),e.jsx("input",{type:"number",value:x,onChange:n=>w(parseInt(n.target.value)),required:!0,className:"w-full bg-gray-700 text-white p-3 rounded-md focus:ring-2 focus:ring-cyan-500 border-none outline-none"}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-gray-700",children:[e.jsx("button",{type:"button",onClick:r,disabled:p,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-gray-500 transition-colors disabled:opacity-50",children:"إلغاء"}),e.jsxs("button",{type:"submit",disabled:p,className:"flex items-center justify-center bg-cyan-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-cyan-600 transition-colors disabled:bg-cyan-800",children:[p&&e.jsx(me,{}),p?"جاري التنفيذ...":"تطبيق التغيير"]})]})]})})},Re=({onSubmit:i,onClose:r,isLoading:p})=>{const[x,w]=o.useState(""),[u,n]=o.useState("add"),f=N=>{N.preventDefault(),x.trim()&&i(x.trim(),u)};return e.jsx(xe,{title:"تغيير الكلمات الدلالية بشكل جماعي",onClose:r,isOpen:!0,children:e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsx("p",{className:"text-gray-300",children:"أدخل كلمة دلالية (Tag) لإضافتها أو إزالتها من الأفلام المحددة."}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("input",{type:"text",value:x,onChange:N=>w(N.target.value),placeholder:"الكلمة الدلالية, مثلاً: بطل خارق",required:!0,className:"flex-grow bg-gray-700 text-white p-3 rounded-md focus:ring-2 focus:ring-cyan-500 border-none outline-none"}),e.jsxs("select",{value:u,onChange:N=>n(N.target.value),className:"bg-gray-700 text-white p-3 rounded-md focus:ring-2 focus:ring-cyan-500 border-none outline-none",children:[e.jsx("option",{value:"add",children:"إضافة"}),e.jsx("option",{value:"remove",children:"إزالة"})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-gray-700",children:[e.jsx("button",{type:"button",onClick:r,disabled:p,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-gray-500 transition-colors disabled:opacity-50",children:"إلغاء"}),e.jsxs("button",{type:"submit",disabled:p||!x.trim(),className:"flex items-center justify-center bg-cyan-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-cyan-600 transition-colors disabled:bg-cyan-800",children:[p&&e.jsx(me,{}),p?"جاري التنفيذ...":"تطبيق التغيير"]})]})]})})},pe=10,rs=()=>{const[i,r]=o.useState([]),[p,x]=o.useState(null),[w,u]=o.useState(!1),[n,f]=o.useState(1),[N,L]=o.useState("all"),[U,D]=o.useState(""),[G,O]=o.useState(!1),[E,$]=o.useState(null),[B,S]=o.useState(!0),[q,v]=o.useState(!1),[F,z]=o.useState(null),[M,_]=o.useState([]),[m,c]=o.useState(null),[g,b]=o.useState([]),C=async()=>{const{data:t,error:y}=await A.from("movies").select("*").order("created_at",{ascending:!1});y?(console.error("Error fetching movies: ",y),d("فشل في تحميل الأفلام.","error")):r(t);const{data:j,error:P}=await A.from("categories").select("name").order("name");P?console.error("Error fetching categories from ManageMovies: ",P):b(j.map(Y=>Y.name)),S(!1)};o.useEffect(()=>{S(!0),C();const t=A.channel("public:movies").on("postgres_changes",{event:"*",schema:"public",table:"movies"},()=>C()).subscribe();return()=>{A.removeChannel(t)}},[]),o.useEffect(()=>{f(1),_([])},[N,U]);const d=(t,y)=>{z({message:t,type:y})},T=async t=>{v(!0);try{const{error:y}=await A.from("movies").insert([{...t,created_at:new Date().toISOString()}]);if(y)throw y;await C(),u(!1),f(1),d("تمت إضافة الفيلم بنجاح.","success")}catch(y){console.error("Error adding movie: ",y);const j=y.message||JSON.stringify(y);d(`حدث خطأ أثناء إضافة الفيلم: ${j}`,"error")}finally{v(!1)}},I=async(t,y)=>{v(!0);try{const{error:j}=await A.from("movies").update(y).eq("id",t);if(j)throw j;await C(),x(null),u(!1),d("تم تحديث الفيلم بنجاح.","success")}catch(j){console.error("Error updating movie: ",j);const P=j.message||JSON.stringify(j);d(`حدث خطأ أثناء تحديث الفيلم: ${P}`,"error")}finally{v(!1)}},V=t=>{$(t),O(!0)},ie=async()=>{if(E){v(!0);try{const{error:t}=await A.from("movies").delete().eq("id",E.id);if(t)throw t;d("تم حذف الفيلم بنجاح.","success")}catch(t){console.error("Error deleting movie: ",t);const y=t.message||JSON.stringify(t);d(`حدث خطأ أثناء حذف الفيلم: ${y}`,"error")}finally{O(!1),$(null),v(!1)}}},Z=t=>{x(t),u(!0)},le=()=>{x(null),u(!0)},H=()=>{x(null),u(!1),c(null)},ne=t=>{_(y=>y.includes(t)?y.filter(j=>j!==t):[...y,t])},W=t=>{t.target.checked?_(a.map(y=>y.id)):_(M.filter(y=>!a.some(j=>j.id===y)))},R=async(t,y)=>{v(!0);try{const{error:j}=await A.from("movies").update(t).in("id",M);if(j)throw j;d(y,"success"),_([])}catch(j){console.error("Bulk update failed:",j),d("فشل التحديث الجماعي.","error")}finally{v(!1),c(null)}},ee=async()=>{v(!0);try{const{error:t}=await A.from("movies").delete().in("id",M);if(t)throw t;d(`تم حذف ${M.length} فيلم بنجاح.`,"success"),_([])}catch(t){console.error("Bulk delete failed:",t),d("فشل الحذف الجماعي.","error")}finally{v(!1),c(null)}},oe=async(t,y)=>{v(!0);try{const{data:j,error:P}=await A.from("movies").select("id, genres").in("id",M);if(P)throw P;const Y=j.map(se=>{const K=se.genres||[];let J;return y==="add"?J=[...new Set([...K,t])]:J=K.filter(ce=>ce!==t),{id:se.id,genres:J}}),{error:X}=await A.from("movies").upsert(Y);if(X)throw X;d(`تم ${y==="add"?"إضافة":"إزالة"} فئة "${t}" بنجاح.`,"success"),_([])}catch(j){console.error("Bulk genre change failed:",j),d("فشل تغيير الفئة الجماعي.","error")}finally{v(!1),c(null)}},Q=async(t,y)=>{v(!0);try{const{data:j,error:P}=await A.from("movies").select("id, tags").in("id",M);if(P)throw P;const Y=j.map(se=>{const K=se.tags||[];let J;return y==="add"?J=[...new Set([...K,t])]:J=K.filter(ce=>ce!==t),{id:se.id,tags:J}}),{error:X}=await A.from("movies").upsert(Y);if(X)throw X;d(`تم ${y==="add"?"إضافة":"إزالة"} الكلمة الدلالية "${t}" بنجاح.`,"success"),_([])}catch(j){console.error("Bulk tags change failed:",j),d("فشل تغيير الكلمات الدلالية الجماعي.","error")}finally{v(!1),c(null)}},l=i.filter(t=>N==="kurdish"?t.is_kurdish===!0:N==="non-kurdish"?!t.is_kurdish:!0).filter(t=>Le(U,t.title)),s=Math.ceil(l.length/pe),a=l.slice((n-1)*pe,n*pe),h=t=>`px-4 py-2 text-sm font-bold rounded-lg transition-colors duration-200 ${N===t?"bg-gradient-to-r from-cyan-500 to-blue-500 text-white shadow-md":"bg-slate-700 text-slate-200 hover:bg-slate-600"}`,k=a.length>0&&a.every(t=>M.includes(t.id));return B?e.jsx(Pe,{}):e.jsxs("div",{className:"relative",children:[F&&e.jsx(_e,{...F,onClose:()=>z(null)}),e.jsx(te,{isOpen:G,onClose:()=>O(!1),onConfirm:ie,title:"تأكيد الحذف",message:e.jsxs(e.Fragment,{children:["هل أنت متأكد أنك تريد حذف الفيلم ",e.jsxs("strong",{className:"text-white",children:['"',E==null?void 0:E.title,'"']}),"؟ ",e.jsx("br",{})," ",e.jsx("span",{className:"text-yellow-400",children:"لا يمكن التراجع عن هذا الإجراء."})]}),isLoading:q}),m==="delete"&&e.jsx(te,{isOpen:!0,onClose:()=>c(null),onConfirm:ee,title:`تأكيد حذف ${M.length} فيلم`,message:e.jsxs(e.Fragment,{children:["هل أنت متأكد أنك تريد حذف الأفلام المحددة؟",e.jsx("br",{}),e.jsx("span",{className:"text-yellow-400",children:"لا يمكن التراجع عن هذا الإجراء."})]}),isLoading:q}),m==="genre"&&e.jsx(Ge,{genres:g,onClose:H,onSubmit:oe,isLoading:q}),m==="tags"&&e.jsx(Re,{onClose:H,onSubmit:Q,isLoading:q}),m==="year"&&e.jsx(ts,{onClose:H,onSubmit:t=>R({year:t},"تم تحديث السنة بنجاح."),isLoading:q}),m==="markKurdish"&&e.jsx(te,{isOpen:!0,onClose:H,onConfirm:()=>R({is_kurdish:!0},"تم التحديث بنجاح."),title:"تأكيد",message:"هل تريد تحديد كل هذه الأفلام على أنها كردية؟",isLoading:q}),m==="unmarkKurdish"&&e.jsx(te,{isOpen:!0,onClose:H,onConfirm:()=>R({is_kurdish:!1},"تم التحديث بنجاح."),title:"تأكيد",message:"هل تريد إزالة العلامة الكردية من كل هذه الأفلام؟",isLoading:q}),w&&e.jsx(xe,{title:p?"تعديل الفيلم":"إضافة فيلم جديد",onClose:H,isOpen:w,children:e.jsx(Ze,{onSubmit:p?t=>I(p.id,t):T,initialData:p,onCancel:H,isKurdishByDefault:N==="kurdish"&&!p,isLoading:q,allGenres:g})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center mb-6 gap-4 w-full",children:[e.jsx("button",{onClick:le,className:"bg-gradient-to-r from-cyan-500 to-blue-500 text-white font-bold py-2.5 px-5 rounded-lg hover:from-cyan-600 hover:to-blue-600 transition-all duration-300 shadow-lg w-full sm:w-auto flex-shrink-0",children:"إضافة فيلم جديد"}),e.jsxs("div",{className:"relative w-full sm:flex-grow",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",value:U,onChange:t=>D(t.target.value),placeholder:"ابحث عن فيلم للتعديل...",className:"w-full bg-slate-700 text-white p-2.5 pl-10 rounded-lg focus:ring-2 focus:ring-cyan-500 border-none outline-none transition-colors","aria-label":"Search for a movie to edit"})]}),e.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-2 p-1 bg-slate-900/50 rounded-lg flex-shrink-0",children:[e.jsx("button",{onClick:()=>L("all"),className:h("all"),children:"الكل"}),e.jsx("button",{onClick:()=>L("kurdish"),className:h("kurdish"),children:"كردي فقط"}),e.jsx("button",{onClick:()=>L("non-kurdish"),className:h("non-kurdish"),children:"غير كردي"})]})]}),M.length>0&&e.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-sm border border-cyan-500 rounded-lg p-3 mb-4 flex flex-wrap items-center justify-between gap-3 animate-fade-in-down",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-white font-bold",children:[M.length," فيلم محدد"]}),e.jsx("button",{onClick:()=>_([]),className:"text-sm text-cyan-400 hover:underline",children:"إلغاء التحديد"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>c("genre"),className:"bg-slate-700 text-sm py-1 px-3 rounded-md hover:bg-slate-600",children:"تغيير الفئة"}),e.jsx("button",{onClick:()=>c("tags"),className:"bg-slate-700 text-sm py-1 px-3 rounded-md hover:bg-slate-600",children:"تغيير الكلمات"}),e.jsx("button",{onClick:()=>c("year"),className:"bg-slate-700 text-sm py-1 px-3 rounded-md hover:bg-slate-600",children:"تغيير السنة"}),e.jsx("button",{onClick:()=>c("markKurdish"),className:"bg-slate-700 text-sm py-1 px-3 rounded-md hover:bg-slate-600",children:"تحديد ككردي"}),e.jsx("button",{onClick:()=>c("unmarkKurdish"),className:"bg-slate-700 text-sm py-1 px-3 rounded-md hover:bg-slate-600",children:"إلغاء تحديد ككردي"}),e.jsx("button",{onClick:()=>c("delete"),className:"bg-red-600 text-sm py-1 px-3 rounded-md hover:bg-red-500",children:"حذف المحدد"})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"overflow-x-auto hidden lg:block",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-slate-900/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-right",children:e.jsx("input",{type:"checkbox",onChange:W,checked:k,className:"h-4 w-4 text-cyan-500 bg-slate-700 border-slate-600 rounded focus:ring-cyan-600"})}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase tracking-wider",children:"الصورة"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase tracking-wider",children:"العنوان"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase tracking-wider",children:"تقييم IMDb"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase tracking-wider",children:"السنة"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase tracking-wider",children:"الفئات"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase tracking-wider",children:"مدبلج كردي"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase tracking-wider",children:"تاريخ الإضافة"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase tracking-wider",children:"إجراءات"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-700",children:a.map(t=>{var y,j;return e.jsxs("tr",{className:`${M.includes(t.id)?"bg-cyan-500/20":"hover:bg-slate-700/50"} transition-colors duration-200`,children:[e.jsx("td",{className:"px-4 py-2",children:e.jsx("input",{type:"checkbox",checked:M.includes(t.id),onChange:()=>ne(t.id),className:"h-4 w-4 text-cyan-500 bg-slate-700 border-slate-600 rounded focus:ring-cyan-600"})}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:e.jsx("img",{src:t.poster_url,alt:t.title,className:"h-20 w-auto rounded object-cover",loading:"lazy"})}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap font-medium text-white align-middle",children:t.title}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-yellow-400 font-bold align-middle",children:t.imdb_rating?t.imdb_rating.toFixed(1):"N/A"}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-slate-300 align-middle",children:t.year}),e.jsx("td",{className:"px-4 py-2 text-slate-300 align-middle",children:e.jsxs("div",{className:"flex flex-wrap gap-1 max-w-xs",children:[(y=t.genres)==null?void 0:y.slice(0,3).map(P=>e.jsx("span",{className:"bg-slate-600 text-slate-200 px-2 py-1 text-xs rounded-full",children:P},P)),((j=t.genres)==null?void 0:j.length)>3&&e.jsx("span",{className:"bg-slate-600 text-slate-200 px-2 py-1 text-xs rounded-full",children:"..."})]})}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-slate-300 align-middle",children:t.is_kurdish?"نعم":"لا"}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-slate-300 align-middle",children:t.created_at?new Date(t.created_at).toLocaleDateString("ar-EG"):"غير متاح"}),e.jsxs("td",{className:"px-4 py-2 whitespace-nowrap font-medium align-middle",children:[e.jsx("button",{onClick:()=>Z(t),className:"text-cyan-400 hover:text-cyan-300 ml-4",children:"تعديل"}),e.jsx("button",{onClick:()=>V(t),className:"text-red-500 hover:text-red-400",children:"حذف"})]})]},t.id)})})]})}),e.jsxs("div",{className:"block lg:hidden space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 p-2",children:[e.jsx("input",{type:"checkbox",onChange:W,checked:k,className:"h-4 w-4 text-cyan-500 bg-slate-700 border-slate-600 rounded focus:ring-cyan-600"}),e.jsx("label",{className:"text-sm text-slate-300",children:"تحديد الكل في هذه الصفحة"})]}),a.map(t=>{var y,j;return e.jsxs("div",{className:`p-3 rounded-lg transition-all duration-200 ${M.includes(t.id)?"bg-cyan-500/20 ring-2 ring-cyan-500":"bg-slate-900/50"}`,children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-24",children:e.jsx("img",{src:t.poster_url,alt:t.title,className:"w-full rounded object-cover",loading:"lazy"})}),e.jsxs("div",{className:"flex-grow min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("h3",{className:"font-bold text-white truncate flex-grow pr-2",children:t.title}),e.jsx("input",{type:"checkbox",checked:M.includes(t.id),onChange:()=>ne(t.id),className:"h-5 w-5 text-cyan-500 bg-slate-700 border-slate-600 rounded focus:ring-cyan-600 flex-shrink-0"})]}),e.jsxs("div",{className:"text-sm text-slate-400 mt-1 flex items-center gap-x-2 flex-wrap",children:[e.jsx("span",{children:t.year}),e.jsx("span",{className:"text-slate-600",children:"•"}),e.jsx("span",{className:"text-yellow-400 font-bold",children:t.imdb_rating?t.imdb_rating.toFixed(1):"N/A"}),e.jsx("span",{className:"text-slate-600",children:"•"}),e.jsx("span",{children:t.is_kurdish?"كردي":"غير كردي"})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[(y=t.genres)==null?void 0:y.slice(0,2).map(P=>e.jsx("span",{className:"bg-slate-700 text-slate-200 px-2 py-0.5 text-xs rounded-full",children:P},P)),((j=t.genres)==null?void 0:j.length)>2&&e.jsxs("span",{className:"bg-slate-700 text-slate-200 px-2 py-0.5 text-xs rounded-full",children:["+",t.genres.length-2]})]})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-700 flex justify-end items-center gap-4 text-sm",children:[e.jsxs("div",{className:"text-xs text-slate-500 mr-auto",children:["أضيف في: ",t.created_at?new Date(t.created_at).toLocaleDateString("ar-EG"):"N/A"]}),e.jsx("button",{onClick:()=>Z(t),className:"font-medium text-cyan-400 hover:text-cyan-300",children:"تعديل"}),e.jsx("button",{onClick:()=>V(t),className:"font-medium text-red-500 hover:text-red-400",children:"حذف"})]})]},t.id)})]})]}),l.length>pe&&e.jsx("div",{className:"p-4 mt-4 border-t border-slate-700",children:e.jsx(Se,{currentPage:n,totalPages:s,onPageChange:f})})]})},as=()=>e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),ls=({onSubmit:i,initialData:r,onCancel:p,isLoading:x=!1,allGenres:w=[]})=>{const[u,n]=o.useState({title:"",description:"",poster_url:"",backdrop_url:"",year:new Date().getFullYear(),genres:[],tags:[],seasons:[{season_number:1,title:"الموسم 1",description:"",poster_url:"",year:new Date().getFullYear(),episodes:[{episode_number:1,title:"الحلقة 1",url:"https://vidtube.pro/embed-yabwsjqcvg9i.html",download_url:"",quality:"1080p"}],imdb_rating:0}],trailer_url:"",imdb_rating:0}),[f,N]=o.useState(""),[L,U]=o.useState(!1),D=o.useRef(null);o.useEffect(()=>{r&&(n({...r,genres:r.genres||[],tags:r.tags||[],seasons:r.seasons&&r.seasons.length>0?r.seasons:[{season_number:1,title:"الموسم 1",description:"",poster_url:r.poster_url,year:r.year,episodes:[],imdb_rating:0}],trailer_url:r.trailer_url||"",imdb_rating:r.imdb_rating||0}),N((r.tags||[]).join(", ")))},[r]),o.useEffect(()=>{const m=c=>{D.current&&!D.current.contains(c.target)&&U(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]);const G=m=>{const{name:c,value:g}=m.target;if(c==="year"||c==="imdb_rating"){const b=parseFloat(g);n(C=>({...C,[c]:isNaN(b)?0:b}))}else n(b=>({...b,[c]:g}))},O=m=>{N(m.target.value)},E=m=>{n(c=>({...c,genres:c.genres.includes(m)?c.genres.filter(g=>g!==m):[...c.genres,m]}))},$=(m,c,g)=>{const b=[...u.seasons],C={...b[m]};if(c==="season_number"||c==="year"||c==="imdb_rating"){const d=typeof g=="string"?parseFloat(g):g;C[c]=isNaN(d)?0:d}else C[c]=g;b[m]=C,n(d=>({...d,seasons:b}))},B=()=>{const m=u.seasons.length>0?Math.max(...u.seasons.map(g=>g.season_number))+1:1,c=u.seasons.length>0?u.seasons[u.seasons.length-1].year:u.year;n(g=>({...g,seasons:[...g.seasons,{season_number:m,title:`الموسم ${m}`,description:"",poster_url:g.poster_url,year:c+1,episodes:[{episode_number:1,title:"الحلقة 1",url:"https://vidtube.pro/embed-yabwsjqcvg9i.html",download_url:"",quality:"1080p"}],imdb_rating:0}]}))},S=m=>{n(c=>({...c,seasons:c.seasons.filter((g,b)=>b!==m)}))},q=(m,c,g,b)=>{const C=[...u.seasons],d=[...C[m].episodes],T={...d[c]};if(g==="episode_number"){const I=typeof b=="string"?parseFloat(b):b;T[g]=isNaN(I)?0:I}else T[g]=b;d[c]=T,C[m]={...C[m],episodes:d},n(I=>({...I,seasons:C}))},v=m=>{const c=u.seasons[m],g=c.episodes.length>0?Math.max(...c.episodes.map(d=>d.episode_number))+1:1,b={episode_number:g,title:`الحلقة ${g}`,url:"https://vidtube.pro/embed-yabwsjqcvg9i.html",download_url:"",quality:"1080p"},C=u.seasons.map((d,T)=>T===m?{...d,episodes:[...d.episodes,b]}:d);n(d=>({...d,seasons:C}))},F=(m,c)=>{const g=u.seasons.map((b,C)=>C===m?{...b,episodes:b.episodes.filter((d,T)=>T!==c)}:b);n(b=>({...b,seasons:g}))},z=m=>{m.preventDefault();const c=f.split(",").map(g=>g.trim()).filter(Boolean);i({...u,tags:c})},M="w-full bg-slate-700 text-white p-3 rounded-md focus:ring-2 focus:ring-cyan-500 border-2 border-slate-600 outline-none",_="bg-slate-600 text-white p-2 rounded-md border border-slate-500 focus:border-cyan-500 outline-none";return e.jsxs("form",{onSubmit:z,className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white border-b border-slate-700 pb-2",children:"معلومات المسلسل الرئيسية"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("input",{type:"text",name:"title",value:u.title,onChange:G,placeholder:"عنوان المسلسل",required:!0,className:M}),e.jsx("input",{type:"number",name:"year",value:u.year||"",onChange:G,placeholder:"سنة بداية العرض",required:!0,className:M})]}),e.jsx("textarea",{name:"description",value:u.description,onChange:G,placeholder:"وصف المسلسل العام",required:!0,className:`${M} h-24`}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("input",{type:"url",name:"poster_url",value:u.poster_url,onChange:G,placeholder:"رابط البوستر الرئيسي",required:!0,className:M}),e.jsx("input",{type:"url",name:"backdrop_url",value:u.backdrop_url,onChange:G,placeholder:"رابط صورة الخلفية",required:!0,className:M})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("input",{type:"number",name:"imdb_rating",value:u.imdb_rating??"",onChange:G,placeholder:"تقييم IMDb (e.g. 8.5)",step:"0.1",min:"0",max:"10",className:M}),e.jsx("input",{type:"url",name:"trailer_url",value:u.trailer_url??"",onChange:G,placeholder:"رابط المقطع الدعائي (اختياري)",className:M})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-lg font-semibold text-white mb-2",children:"الفئات"}),e.jsxs("div",{className:"relative",ref:D,children:[e.jsx("button",{type:"button",onClick:()=>U(m=>!m),className:`${M} text-right`,children:u.genres.length>0?u.genres.join(", "):"اختر الفئات..."}),L&&e.jsx("div",{className:"absolute z-10 mt-1 w-full bg-slate-900 border border-slate-700 rounded-md shadow-lg max-h-60 overflow-y-auto",children:w.map(m=>e.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-slate-700 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:u.genres.includes(m),onChange:()=>E(m),className:"h-4 w-4 text-cyan-500 bg-slate-700 border-slate-600 rounded focus:ring-cyan-600"}),e.jsx("span",{className:"text-white",children:m})]},m))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-lg font-semibold text-white mb-2",children:"الكلمات الدلالية (مفصولة بفاصلة)"}),e.jsx("input",{type:"text",value:f,onChange:O,placeholder:"أكشن, إثارة...",className:M})]}),e.jsxs("div",{className:"space-y-4 border-t border-slate-700 pt-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"المواسم والحلقات"}),u.seasons.map((m,c)=>e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-slate-700 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-white font-semibold",children:"الموسم رقم:"}),e.jsx("input",{type:"number",value:m.season_number||"",onChange:g=>$(c,"season_number",g.target.value),className:`${_} w-20`})]}),e.jsx("button",{type:"button",onClick:()=>S(c),className:"bg-red-600 text-white px-3 py-1 rounded-md text-sm",children:"إزالة الموسم"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsx("input",{type:"text",value:m.title,onChange:g=>$(c,"title",g.target.value),placeholder:"عنوان الموسم",required:!0,className:_}),e.jsx("input",{type:"number",value:m.year||"",onChange:g=>$(c,"year",g.target.value),placeholder:"سنة الموسم",required:!0,className:_}),e.jsx("input",{type:"number",value:m.imdb_rating??"",onChange:g=>$(c,"imdb_rating",g.target.value),placeholder:"تقييم IMDb",step:"0.1",min:"0",max:"10",className:_}),e.jsx("input",{type:"url",value:m.poster_url,onChange:g=>$(c,"poster_url",g.target.value),placeholder:"رابط بوستر الموسم",required:!0,className:`${_} col-span-1 sm:col-span-3`}),e.jsx("textarea",{value:m.description,onChange:g=>$(c,"description",g.target.value),placeholder:"وصف الموسم",required:!0,className:`${_} h-20 col-span-1 sm:col-span-3`})]}),e.jsxs("div",{className:"space-y-2 pt-3 mt-3 border-t border-slate-600",children:[e.jsxs("h4",{className:"font-semibold text-slate-300",children:["حلقات الموسم ",m.season_number,":"]}),m.episodes.map((g,b)=>e.jsxs("div",{className:"bg-slate-800/60 p-2 rounded-md space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",value:g.episode_number||"",onChange:C=>q(c,b,"episode_number",C.target.value),placeholder:"رقم",className:`${_} w-16`}),e.jsx("input",{type:"text",value:g.title,onChange:C=>q(c,b,"title",C.target.value),placeholder:"عنوان الحلقة",className:`${_} flex-1`}),e.jsx("button",{type:"button",onClick:()=>F(c,b),className:"bg-red-500 text-white p-2 rounded-md hover:bg-red-600 text-xs",children:"X"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"url",value:g.url,onChange:C=>q(c,b,"url",C.target.value),placeholder:"رابط المشاهدة",required:!0,className:`${_} flex-1`}),e.jsxs("select",{value:g.quality||"1080p",onChange:C=>q(c,b,"quality",C.target.value),className:`${_} w-28 flex-shrink-0`,children:[e.jsx("option",{value:"1080p",children:"1080p"}),e.jsx("option",{value:"720p",children:"720p"}),e.jsx("option",{value:"480p",children:"480p"})]})]}),e.jsx("input",{type:"url",value:g.download_url||"",onChange:C=>q(c,b,"download_url",C.target.value),placeholder:"رابط التحميل (اختياري)",className:`${_} w-full`})]})]},b)),e.jsx("button",{type:"button",onClick:()=>v(c),className:"text-sm bg-slate-600 text-white py-1 px-3 rounded-md hover:bg-slate-500",children:"إضافة حلقة"})]})]},c)),e.jsx("button",{type:"button",onClick:B,className:"bg-cyan-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-cyan-700",children:"إضافة موسم"})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-slate-700",children:[e.jsx("button",{type:"button",onClick:p,className:"bg-slate-600 text-white font-bold py-2 px-6 rounded-lg",disabled:x,children:"إلغاء"}),e.jsxs("button",{type:"submit",className:"flex items-center justify-center bg-cyan-500 text-white font-bold py-2 px-6 rounded-lg",disabled:x,children:[x&&e.jsx(as,{}),r?"تحديث المسلسل":"إضافة المسلسل"]})]})]})},ge=10,ns=()=>{const[i,r]=o.useState([]),[p,x]=o.useState(null),[w,u]=o.useState(!1),[n,f]=o.useState(1),[N,L]=o.useState(""),[U,D]=o.useState(!1),[G,O]=o.useState(null),[E,$]=o.useState(!0),[B,S]=o.useState(!1),[q,v]=o.useState(null),[F,z]=o.useState([]),[M,_]=o.useState(null),[m,c]=o.useState([]),g=async()=>{const{data:s,error:a}=await A.from("series").select("*").order("created_at",{ascending:!1});a?(console.error("Error fetching series: ",a),b("فشل في تحميل المسلسلات.","error")):r(s);const{data:h,error:k}=await A.from("categories").select("name").order("name");k?console.error("Error fetching categories: ",k):c(h.map(t=>t.name)),$(!1)};o.useEffect(()=>{$(!0),g();const s=A.channel("public:series").on("postgres_changes",{event:"*",schema:"public",table:"series"},g).subscribe();return()=>{A.removeChannel(s)}},[]),o.useEffect(()=>{f(1),z([])},[N]);const b=(s,a)=>{v({message:s,type:a})},C=async s=>{S(!0);try{const{error:a}=await A.from("series").insert([{...s,created_at:new Date().toISOString()}]);if(a)throw a;await g(),u(!1),f(1),b("تمت إضافة المسلسل بنجاح.","success")}catch(a){console.error("Error adding series: ",a);const h=a.message||JSON.stringify(a);b(`حدث خطأ أثناء إضافة المسلسل: ${h}`,"error")}finally{S(!1)}},d=async(s,a)=>{S(!0);try{const{error:h}=await A.from("series").update(a).eq("id",s);if(h)throw h;await g(),x(null),u(!1),b("تم تحديث المسلسل بنجاح.","success")}catch(h){console.error("Error updating series:",h);const k=h.message||JSON.stringify(h);b(`حدث خطأ أثناء تحديث المسلسل: ${k}`,"error")}finally{S(!1)}},T=s=>{O(s),D(!0)},I=async()=>{if(G){S(!0);try{const{error:s}=await A.from("series").delete().eq("id",G.id);if(s)throw s;b("تم حذف المسلسل بنجاح.","success")}catch(s){console.error("Error deleting series:",s);const a=s.message||JSON.stringify(s);b(`حدث خطأ أثناء حذف المسلسل: ${a}`,"error")}finally{D(!1),O(null),S(!1)}}},V=s=>{x(s),u(!0)},ie=()=>{x(null),u(!0)},Z=()=>{x(null),u(!1),_(null)},le=s=>{z(a=>a.includes(s)?a.filter(h=>h!==s):[...a,s])},H=s=>{s.target.checked?z(Q.map(a=>a.id)):z(F.filter(a=>!Q.some(h=>h.id===a)))},ne=async()=>{S(!0);try{const{error:s}=await A.from("series").delete().in("id",F);if(s)throw s;b(`تم حذف ${F.length} مسلسل بنجاح.`,"success"),z([])}catch(s){console.error("Bulk delete failed:",s),b("فشل الحذف الجماعي.","error")}finally{S(!1),_(null)}},W=async(s,a)=>{S(!0);try{const{data:h,error:k}=await A.from("series").select("id, genres").in("id",F);if(k)throw k;const t=h.map(j=>{const P=j.genres||[],Y=a==="add"?[...new Set([...P,s])]:P.filter(X=>X!==s);return{id:j.id,genres:Y}}),{error:y}=await A.from("series").upsert(t);if(y)throw y;b(`تم ${a==="add"?"إضافة":"إزالة"} فئة "${s}" بنجاح.`,"success"),z([])}catch(h){console.error("Bulk genre change failed:",h),b("فشل تغيير الفئة الجماعي.","error")}finally{S(!1),_(null)}},R=async(s,a)=>{S(!0);try{const{data:h,error:k}=await A.from("series").select("id, tags").in("id",F);if(k)throw k;const t=h.map(j=>{const P=j.tags||[],Y=a==="add"?[...new Set([...P,s])]:P.filter(X=>X!==s);return{id:j.id,tags:Y}}),{error:y}=await A.from("series").upsert(t);if(y)throw y;b(`تم ${a==="add"?"إضافة":"إزالة"} الكلمة الدلالية "${s}" بنجاح.`,"success"),z([])}catch(h){console.error("Bulk tags change failed:",h),b("فشل تغيير الكلمات الدلالية الجماعي.","error")}finally{S(!1),_(null)}},ee=i.filter(s=>Le(N,s.title)),oe=Math.ceil(ee.length/ge),Q=ee.slice((n-1)*ge,n*ge),l=Q.length>0&&Q.every(s=>F.includes(s.id));return E?e.jsx(Pe,{}):e.jsxs("div",{className:"relative",children:[q&&e.jsx(_e,{...q,onClose:()=>v(null)}),e.jsx(te,{isOpen:U,onClose:()=>D(!1),onConfirm:I,title:"تأكيد الحذف",message:e.jsxs(e.Fragment,{children:["هل أنت متأكد أنك تريد حذف المسلسل ",e.jsxs("strong",{className:"text-white",children:['"',G==null?void 0:G.title,'"']}),"؟ ",e.jsx("br",{})," ",e.jsx("span",{className:"text-yellow-400",children:"لا يمكن التراجع عن هذا الإجراء."})]}),isLoading:B}),M==="delete"&&e.jsx(te,{isOpen:!0,onClose:()=>_(null),onConfirm:ne,title:`تأكيد حذف ${F.length} مسلسل`,message:e.jsxs(e.Fragment,{children:["هل أنت متأكد أنك تريد حذف المسلسلات المحددة؟",e.jsx("br",{}),e.jsx("span",{className:"text-yellow-400",children:"لا يمكن التراجع عن هذا الإجراء."})]}),isLoading:B}),M==="genre"&&e.jsx(Ge,{genres:m,onClose:Z,onSubmit:W,isLoading:B}),M==="tags"&&e.jsx(Re,{onClose:Z,onSubmit:R,isLoading:B}),w&&e.jsx(xe,{title:p?"تعديل المسلسل":"إضافة مسلسل جديد",onClose:Z,isOpen:w,children:e.jsx(ls,{onSubmit:p?s=>d(p.id,s):C,initialData:p,onCancel:Z,isLoading:B,allGenres:m})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center mb-6 gap-4 w-full",children:[e.jsx("button",{onClick:ie,className:"bg-gradient-to-r from-cyan-500 to-blue-500 text-white font-bold py-2.5 px-5 rounded-lg hover:from-cyan-600 hover:to-blue-600 transition-all duration-300 shadow-lg w-full sm:w-auto flex-shrink-0",children:"إضافة مسلسل جديد"}),e.jsxs("div",{className:"relative w-full sm:flex-grow",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",value:N,onChange:s=>L(s.target.value),placeholder:"ابحث عن مسلسل للتعديل...",className:"w-full bg-slate-700 text-white p-2.5 pl-10 rounded-lg focus:ring-2 focus:ring-cyan-500 border-none outline-none transition-colors","aria-label":"Search for a series to edit"})]})]}),F.length>0&&e.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-sm border border-cyan-500 rounded-lg p-3 mb-4 flex flex-wrap items-center justify-between gap-3 animate-fade-in-down",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-white font-bold",children:[F.length," مسلسل محدد"]}),e.jsx("button",{onClick:()=>z([]),className:"text-sm text-cyan-400 hover:underline",children:"إلغاء التحديد"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>_("genre"),className:"bg-slate-700 text-sm py-1 px-3 rounded-md hover:bg-slate-600",children:"تغيير الفئة"}),e.jsx("button",{onClick:()=>_("tags"),className:"bg-slate-700 text-sm py-1 px-3 rounded-md hover:bg-slate-600",children:"تغيير الكلمات"}),e.jsx("button",{onClick:()=>_("delete"),className:"bg-red-600 text-sm py-1 px-3 rounded-md hover:bg-red-500",children:"حذف المحدد"})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"overflow-x-auto hidden lg:block",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-slate-900/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-right",children:e.jsx("input",{type:"checkbox",onChange:H,checked:l,className:"h-4 w-4 text-cyan-500 bg-slate-700 border-slate-600 rounded focus:ring-cyan-600"})}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase tracking-wider",children:"الصورة"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase tracking-wider",children:"العنوان"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase tracking-wider",children:"تقييم IMDb"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase tracking-wider",children:"السنة"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase tracking-wider",children:"الفئات"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase tracking-wider",children:"المواسم"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase tracking-wider",children:"تاريخ الإضافة"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase tracking-wider",children:"إجراءات"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-700",children:Q.map(s=>{var a,h,k;return e.jsxs("tr",{className:`${F.includes(s.id)?"bg-cyan-500/20":"hover:bg-slate-700/50"} transition-colors duration-200`,children:[e.jsx("td",{className:"px-4 py-2",children:e.jsx("input",{type:"checkbox",checked:F.includes(s.id),onChange:()=>le(s.id),className:"h-4 w-4 text-cyan-500 bg-slate-700 border-slate-600 rounded focus:ring-cyan-600"})}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:e.jsx("img",{src:s.poster_url,alt:s.title,className:"h-20 w-auto rounded object-cover",loading:"lazy"})}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap font-medium text-white align-middle",children:s.title}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-yellow-400 font-bold align-middle",children:s.imdb_rating?s.imdb_rating.toFixed(1):"N/A"}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-slate-300 align-middle",children:s.year}),e.jsx("td",{className:"px-4 py-2 text-slate-300 align-middle",children:e.jsxs("div",{className:"flex flex-wrap gap-1 max-w-xs",children:[(a=s.genres)==null?void 0:a.slice(0,3).map(t=>e.jsx("span",{className:"bg-slate-600 text-slate-200 px-2 py-1 text-xs rounded-full",children:t},t)),((h=s.genres)==null?void 0:h.length)>3&&e.jsx("span",{className:"bg-slate-600 text-slate-200 px-2 py-1 text-xs rounded-full",children:"..."})]})}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-slate-300 align-middle",children:((k=s.seasons)==null?void 0:k.length)||0}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-slate-300 align-middle",children:s.created_at?new Date(s.created_at).toLocaleDateString("ar-EG"):"غير متاح"}),e.jsxs("td",{className:"px-4 py-2 whitespace-nowrap font-medium align-middle",children:[e.jsx("button",{onClick:()=>V(s),className:"text-cyan-400 hover:text-cyan-300 ml-4",children:"تعديل"}),e.jsx("button",{onClick:()=>T(s),className:"text-red-500 hover:text-red-400",children:"حذف"})]})]},s.id)})})]})}),e.jsxs("div",{className:"block lg:hidden space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 p-2",children:[e.jsx("input",{type:"checkbox",onChange:H,checked:l,className:"h-4 w-4 text-cyan-500 bg-slate-700 border-slate-600 rounded focus:ring-cyan-600"}),e.jsx("label",{className:"text-sm text-slate-300",children:"تحديد الكل في هذه الصفحة"})]}),Q.map(s=>{var a,h,k;return e.jsxs("div",{className:`p-3 rounded-lg transition-all duration-200 ${F.includes(s.id)?"bg-cyan-500/20 ring-2 ring-cyan-500":"bg-slate-900/50"}`,children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-24",children:e.jsx("img",{src:s.poster_url,alt:s.title,className:"w-full rounded object-cover",loading:"lazy"})}),e.jsxs("div",{className:"flex-grow min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("h3",{className:"font-bold text-white truncate flex-grow pr-2",children:s.title}),e.jsx("input",{type:"checkbox",checked:F.includes(s.id),onChange:()=>le(s.id),className:"h-5 w-5 text-cyan-500 bg-slate-700 border-slate-600 rounded focus:ring-cyan-600 flex-shrink-0"})]}),e.jsxs("div",{className:"text-sm text-slate-400 mt-1 flex items-center gap-x-2 flex-wrap",children:[e.jsx("span",{children:s.year}),e.jsx("span",{className:"text-slate-600",children:"•"}),e.jsx("span",{className:"text-yellow-400 font-bold",children:s.imdb_rating?s.imdb_rating.toFixed(1):"N/A"}),e.jsx("span",{className:"text-slate-600",children:"•"}),e.jsxs("span",{children:[((a=s.seasons)==null?void 0:a.length)||0," مواسم"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[(h=s.genres)==null?void 0:h.slice(0,2).map(t=>e.jsx("span",{className:"bg-slate-700 text-slate-200 px-2 py-0.5 text-xs rounded-full",children:t},t)),((k=s.genres)==null?void 0:k.length)>2&&e.jsxs("span",{className:"bg-slate-700 text-slate-200 px-2 py-0.5 text-xs rounded-full",children:["+",s.genres.length-2]})]})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-700 flex justify-end items-center gap-4 text-sm",children:[e.jsxs("div",{className:"text-xs text-slate-500 mr-auto",children:["أضيف في: ",s.created_at?new Date(s.created_at).toLocaleDateString("ar-EG"):"N/A"]}),e.jsx("button",{onClick:()=>V(s),className:"font-medium text-cyan-400 hover:text-cyan-300",children:"تعديل"}),e.jsx("button",{onClick:()=>T(s),className:"font-medium text-red-500 hover:text-red-400",children:"حذف"})]})]},s.id)})]})]}),ee.length>ge&&e.jsx("div",{className:"p-4 mt-4 border-t border-slate-700",children:e.jsx(Se,{currentPage:n,totalPages:oe,onPageChange:f})})]})},os=()=>e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),cs=({onSubmit:i,initialData:r,onCancel:p,isLoading:x=!1})=>{const[w,u]=o.useState("");o.useEffect(()=>{u(r?r.name:"")},[r]);const n=f=>{f.preventDefault(),w.trim()&&i({name:w})};return e.jsxs("form",{onSubmit:n,className:"space-y-6",children:[e.jsx("input",{type:"text",name:"name",value:w,onChange:f=>u(f.target.value),placeholder:"اسم الفئة",required:!0,className:"w-full bg-gray-700 text-white p-3 rounded-md focus:ring-2 focus:ring-cyan-500 border-none outline-none"}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-gray-700",children:[e.jsx("button",{type:"button",onClick:p,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-gray-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:x,children:"إلغاء"}),e.jsxs("button",{type:"submit",className:"flex items-center justify-center bg-cyan-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-cyan-600 transition-colors disabled:bg-cyan-800 disabled:cursor-not-allowed",disabled:x,children:[x&&e.jsx(os,{}),x?r?"جاري التحديث...":"جاري الإضافة...":r?"تحديث":"إضافة"]})]})]})},is=10,ds=()=>e.jsx("div",{className:"bg-gray-800 rounded-lg shadow-lg overflow-hidden mt-8 animate-pulse",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3",children:e.jsx("div",{className:"h-4 bg-gray-600 rounded w-1/3"})}),e.jsx("th",{className:"px-6 py-3",children:e.jsx("div",{className:"h-4 bg-gray-600 rounded w-1/4"})})]})}),e.jsx("tbody",{children:[...Array(is)].map((i,r)=>e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-600 rounded"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-600 rounded w-1/2"})})]},r))})]})})}),fe=10,us=({message:i,type:r,onClose:p})=>(o.useEffect(()=>{const u=setTimeout(p,5e3);return()=>clearTimeout(u)},[p]),e.jsx("div",{className:`fixed top-24 right-5 z-[100] p-4 rounded-lg shadow-lg text-white border-l-4 animate-fade-in-down ${r==="success"?"bg-green-600 border-green-500":"bg-red-600 border-red-500"}`,role:"alert",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("p",{className:"font-bold",children:i}),e.jsx("button",{onClick:p,className:"absolute top-1 right-2 text-2xl font-bold leading-none",children:"×"})]})})),ms=({children:i,onClose:r,title:p,isOpen:x})=>{const[w,u]=o.useState(x);return o.useEffect(()=>{if(x){u(!0),document.body.style.overflow="hidden";const n=f=>{f.key==="Escape"&&r()};return window.addEventListener("keydown",n),()=>{window.removeEventListener("keydown",n)}}else{const n=setTimeout(()=>{u(!1),document.body.style.overflow="auto"},300);return()=>clearTimeout(n)}},[x,r]),w?e.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 ${x?"animate-fade-in":"animate-fade-out"}`,onClick:r,children:e.jsxs("div",{className:`bg-gray-800 p-8 rounded-lg shadow-xl w-full max-w-lg border border-gray-700 ${x?"animate-zoom-in":"animate-zoom-out"}`,onClick:n=>n.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:p}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white text-3xl transition-colors",children:"×"})]}),i]})}):null},xs=()=>{const[i,r]=o.useState([]),[p,x]=o.useState(null),[w,u]=o.useState(!1),[n,f]=o.useState(1),[N,L]=o.useState(!1),[U,D]=o.useState(null),[G,O]=o.useState(!0),[E,$]=o.useState(!1),[B,S]=o.useState(null),q=async()=>{const{data:d,error:T}=await A.from("categories").select("*").order("name");T?(console.error("Error fetching categories: ",T),v("فشل في تحميل الفئات.","error")):r(d),O(!1)};o.useEffect(()=>{O(!0),q();const d=A.channel("public:categories").on("postgres_changes",{event:"*",schema:"public",table:"categories"},q).subscribe();return()=>{A.removeChannel(d)}},[]);const v=(d,T)=>{S({message:d,type:T})},F=async d=>{$(!0);try{const{error:T}=await A.from("categories").insert([d]);if(T)throw T;v("تمت إضافة الفئة بنجاح!","success"),u(!1),f(1)}catch(T){console.error("Error adding category: ",T);const I=T.message||JSON.stringify(T);v(`حدث خطأ أثناء إضافة الفئة: ${I}`,"error")}finally{$(!1)}},z=async(d,T)=>{$(!0);try{const{error:I}=await A.from("categories").update(T).eq("id",d);if(I)throw I;v("تم تحديث الفئة بنجاح!","success"),x(null),u(!1)}catch(I){console.error("Error updating category: ",I);const V=I.message||JSON.stringify(I);v(`حدث خطأ أثناء تحديث الفئة: ${V}`,"error")}finally{$(!1)}},M=d=>{D(d),L(!0)},_=async()=>{if(U){$(!0);try{const{error:d}=await A.from("categories").delete().eq("id",U.id);if(d)throw d;v("تم حذف الفئة بنجاح!","success")}catch(d){console.error("Error deleting category: ",d);const T=d.message||JSON.stringify(d);v(`حدث خطأ أثناء حذف الفئة: ${T}`,"error")}finally{L(!1),D(null),$(!1)}}},m=d=>{x(d),u(!0)},c=()=>{x(null),u(!0)},g=()=>{x(null),u(!1)},b=Math.ceil(i.length/fe),C=i.slice((n-1)*fe,n*fe);return G?e.jsxs("div",{children:[e.jsx("div",{className:"h-10 bg-gray-700 rounded w-48 mb-6 animate-pulse"}),e.jsx(ds,{})]}):e.jsxs("div",{children:[B&&e.jsx(us,{...B,onClose:()=>S(null)}),e.jsx(te,{isOpen:N,onClose:()=>L(!1),onConfirm:_,title:"تأكيد الحذف",message:e.jsxs(e.Fragment,{children:["هل أنت متأكد أنك تريد حذف الفئة ",e.jsxs("strong",{className:"text-white",children:['"',U==null?void 0:U.name,'"']}),"؟",e.jsx("br",{}),e.jsx("span",{className:"text-yellow-400",children:"لا يمكن التراجع عن هذا الإجراء."})]}),isLoading:E}),e.jsx(ms,{isOpen:w,title:p?"تعديل الفئة":"إضافة فئة جديدة",onClose:g,children:e.jsx(cs,{onSubmit:p?d=>z(p.id,d):F,initialData:p,onCancel:g,isLoading:E})}),e.jsx("button",{onClick:c,className:"mb-6 bg-cyan-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-cyan-600 transition-colors",children:"إضافة فئة جديدة"}),e.jsxs("div",{children:[e.jsx("div",{className:"bg-gray-800 rounded-lg shadow-lg overflow-hidden hidden sm:block",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider",children:"اسم الفئة"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider",children:"إجراءات"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700",children:i.length>0?C.map(d=>e.jsxs("tr",{className:"hover:bg-gray-700/50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-white",children:d.name}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>m(d),className:"text-cyan-400 hover:text-cyan-300 ml-4",children:"تعديل"}),e.jsx("button",{onClick:()=>M(d),className:"text-red-500 hover:text-red-400",children:"حذف"})]})]},d.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:2,className:"text-center py-8 text-gray-400",children:"لا توجد فئات حالياً."})})})]})})}),e.jsx("div",{className:"block sm:hidden space-y-3",children:i.length>0?C.map(d=>e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-white",children:d.name}),e.jsxs("div",{className:"flex gap-4 flex-shrink-0",children:[e.jsx("button",{onClick:()=>m(d),className:"text-cyan-400 hover:text-cyan-300 text-sm font-medium",children:"تعديل"}),e.jsx("button",{onClick:()=>M(d),className:"text-red-500 hover:text-red-400 text-sm font-medium",children:"حذف"})]})]},d.id)):e.jsx("div",{className:"text-center py-8 text-gray-400 bg-slate-900/50 rounded-lg",children:"لا توجد فئات حالياً."})})]}),i.length>fe&&e.jsx("div",{className:"mt-4",children:e.jsx(Se,{currentPage:n,totalPages:b,onPageChange:f})})]})},ve=["movies","series","categories"],hs=i=>i.replace(/[A-Z]/g,r=>`_${r.toLowerCase()}`),Ce=i=>Array.isArray(i)?i.map(r=>Ce(r)):i!==null&&typeof i=="object"&&i.constructor===Object?i.hasOwnProperty("seconds")&&i.hasOwnProperty("nanoseconds")&&Object.keys(i).length===2&&typeof i.seconds=="number"&&typeof i.nanoseconds=="number"?new Date(i.seconds*1e3).toISOString():i.hasOwnProperty("_seconds")&&i.hasOwnProperty("_nanoseconds")&&Object.keys(i).length===2&&typeof i._seconds=="number"&&typeof i._nanoseconds=="number"?new Date(i._seconds*1e3).toISOString():Object.keys(i).reduce((r,p)=>{const x=hs(p);return r[x]=Ce(i[p]),r},{}):i,ps=()=>{const[i,r]=o.useState(!1),[p,x]=o.useState(null),[w,u]=o.useState(!1),[n,f]=o.useState(null),N=(O,E)=>{x({message:O,type:E})},L=async()=>{r(!0),N("بدء عملية النسخ الاحتياطي... قد تستغرق هذه العملية بعض الوقت.","success");try{const O={};for(const v of ve){const{data:F,error:z}=await A.from(v).select("*");if(z)throw z;O[v]=F||[]}const E=JSON.stringify(O,null,2),$=new Blob([E],{type:"application/json"}),B=URL.createObjectURL($),S=document.createElement("a");S.href=B;const q=new Date().toISOString().slice(0,10);S.download=`supabase-backup-${q}.json`,document.body.appendChild(S),S.click(),document.body.removeChild(S),URL.revokeObjectURL(B),N("تم إكمال النسخ الاحتياطي بنجاح!","success")}catch(O){console.error("Backup failed:",O);let E="فشل النسخ الاحتياطي. تحقق من وحدة التحكم لمزيد من التفاصيل.";O.code==="42501"&&(E="فشل النسخ الاحتياطي: أذونات غير كافية. تأكد من أن قواعد RLS تسمح للمشرفين بقراءة المجموعات."),N(E,"error")}finally{r(!1)}},U=O=>{var $;const E=($=O.target.files)==null?void 0:$[0];if(E){const B=new FileReader;B.onload=S=>{var q;try{const v=(q=S.target)==null?void 0:q.result,F=JSON.parse(v);f(F)}catch(v){N("ملف JSON غير صالح.","error"),console.error("JSON parsing error:",v),f(null)}},B.readAsText(E)}},D=()=>{n?u(!0):N("الرجاء تحديد ملف نسخ احتياطي أولاً.","error")},G=async()=>{if(u(!1),!!n){r(!0),N("بدء عملية الاستعادة... هذه العملية ستستغرق وقتاً.","success");try{let O=0,E=[];for(const B of Object.keys(n)){if(!ve.includes(B)){E.push(B),console.warn(`Skipping restore for unsupported collection: "${B}"`);continue}const S=n[B];if(Array.isArray(S)&&S.length>0){const q=S.map(F=>Ce(F)),{error:v}=await A.from(B).upsert(q);if(v)throw console.error(`Error during upsert to "${B}":`,JSON.stringify(v,null,2)),console.error("First failed object (transformed):",JSON.stringify(q[0],null,2)),v;O++}}let $="تمت استعادة البيانات بنجاح!";E.length>0&&($+=` تم تخطي المجموعات التالية: ${E.join(", ")}.`),O===0&&E.length>0?N(`لم يتم العثور على مجموعات بيانات صالحة للاستعادة في الملف. تم تخطي: ${E.join(", ")}.`,"error"):O>0?N($,"success"):N("لم يتم العثور على بيانات صالحة للاستعادة في الملف.","error")}catch(O){console.error("Restore failed:",JSON.stringify(O,null,2));const E=`فشلت عملية الاستعادة: ${O.message||"خطأ غير معروف"}. يرجى مراجعة وحدة التحكم للحصول على التفاصيل الفنية.`;N(E,"error")}finally{r(!1),f(null)}}};return e.jsxs("div",{className:"space-y-12",children:[p&&e.jsx(_e,{...p,onClose:()=>x(null)}),e.jsx(te,{isOpen:w,onClose:()=>u(!1),onConfirm:G,title:"تأكيد استعادة البيانات",message:e.jsxs(e.Fragment,{children:["هل أنت متأكد أنك تريد استعادة البيانات من هذا الملف؟",e.jsx("br",{}),e.jsx("strong",{className:"text-yellow-400",children:"تحذير:"})," سيتم الكتابة فوق أي بيانات موجودة في المجموعات التي لها نفس الأسماء. لا يمكن التراجع عن هذا الإجراء."]}),isLoading:i}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"النسخ الاحتياطي للبيانات"}),e.jsxs("div",{className:"bg-slate-900/50 p-6 rounded-lg border border-slate-700 space-y-4",children:[e.jsxs("p",{className:"text-sm text-slate-400",children:["انقر على الزر أدناه لتصدير بيانات المحتوى العام (",ve.join(", "),"). لا يتم تضمين بيانات المستخدمين والمشرفين الخاصة في هذا النسخ الاحتياطي من جانب العميل لأسباب تتعلق بالأمان والأذونات."]}),e.jsxs("button",{onClick:L,disabled:i,className:"w-full flex items-center justify-center bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors disabled:bg-blue-800 disabled:cursor-wait",children:[i&&e.jsx(me,{}),i?"جاري التصدير...":"تصدير بيانات المحتوى الآن"]})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"استعادة البيانات"}),e.jsxs("div",{className:"bg-slate-900/50 p-6 rounded-lg border border-slate-700 space-y-4",children:[e.jsxs("div",{className:"p-4 border-l-4 border-yellow-500 bg-yellow-500/10 text-yellow-300 rounded-md",children:[e.jsx("strong",{className:"font-bold",children:"تحذير خطير:"})," استعادة البيانات من ملف ستقوم بالكتابة فوق البيانات الحالية في قاعدة البيانات. استخدم هذه الميزة بحذر شديد وتأكد من أنك تستخدم ملف النسخ الاحتياطي الصحيح."]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"1. حدد ملف النسخ الاحتياطي (.json)"}),e.jsx("input",{type:"file",accept:".json",onChange:U,className:"w-full text-sm text-slate-400 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-cyan-500/20 file:text-cyan-300 hover:file:bg-cyan-500/30"})]}),e.jsxs("button",{onClick:D,disabled:i||!n,className:"w-full flex items-center justify-center bg-red-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-red-700 transition-colors disabled:bg-red-800 disabled:cursor-not-allowed disabled:cursor-wait",children:[i&&e.jsx(me,{}),i?"جاري الاستعادة...":"2. استعادة البيانات"]})]})]})]})},ke=[{key:"movies",label:"إدارة الأفلام",component:e.jsx(rs,{})},{key:"series",label:"إدارة المسلسلات",component:e.jsx(ns,{})},{key:"categories",label:"إدارة الفئات",component:e.jsx(xs,{})},{key:"backup",label:"النسخ الاحتياطي والاستعادة",component:e.jsx(ps,{})}],gs=({label:i,tabKey:r,activeTab:p,onClick:x})=>e.jsx("button",{onClick:()=>x(r),className:`px-4 py-3 font-bold transition-colors duration-300 border-b-2 -mb-px flex-shrink-0 ${p===r?"text-cyan-400 border-cyan-400":"text-slate-400 border-transparent hover:text-white hover:border-slate-500"}`,role:"tab","aria-selected":p===r,children:i}),js=()=>{var x;const[i,r]=o.useState(ke[0].key),p=(x=ke.find(w=>w.key===i))==null?void 0:x.component;return e.jsxs("div",{className:"container mx-auto px-4 py-8 animate-fade-in",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-black text-white mb-8",children:"لوحة تحكم المشرف"}),e.jsx("div",{className:"flex border-b border-slate-700 mb-6 overflow-x-auto whitespace-nowrap scrollbar-thin scrollbar-thumb-slate-600 scrollbar-track-slate-800",role:"tablist",children:ke.map(w=>e.jsx(gs,{label:w.label,tabKey:w.key,activeTab:i,onClick:r},w.key))}),e.jsx("div",{role:"tabpanel",className:"bg-slate-800 p-3 sm:p-6 rounded-lg border border-slate-700",children:p})]})};export{js as default};
