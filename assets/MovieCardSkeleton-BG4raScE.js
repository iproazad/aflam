import{r,j as t}from"./index-CUf2Edq4.js";const m=(e,a)=>{if(e.includes("._V1_"))return e.replace(/\._V1_.*\.jpg$/,`._V1_SX${a}_QL75_.jpg`);if(e.includes(".supabase.co/"))try{const s=new URL(e);return s.searchParams.set("width",a.toString()),s.searchParams.set("quality","75"),s.toString()}catch(s){return console.error("Error transforming Supabase URL",s),e}return e},h=(e,a)=>{const[s,c]=r.useState(e||"");return r.useEffect(()=>{c(e||"")},[e,a==null?void 0:a.thumbnailWidth]),s},v=(e,a)=>{const[s,c]=r.useState(void 0),[l,g]=r.useState(!1),o=r.useRef(null),d=e?a!=null&&a.thumbnailWidth?m(e,a.thumbnailWidth):e:void 0;return r.useEffect(()=>{if(!d)return;let n;const i=o.current;return i&&(n=new IntersectionObserver(([u])=>{u.isIntersecting&&(c(d),n.unobserve(u.target))},{rootMargin:"0px 0px 200px 0px"}),n.observe(i)),()=>{n&&i&&n.unobserve(i)}},[d]),{imageRef:o,imageSrc:s,isLoaded:l,handleImageLoad:()=>{g(!0)}}},x=()=>t.jsxs("div",{className:"block group relative rounded-lg overflow-hidden shadow-lg bg-gray-800 animate-pulse",children:[t.jsx("div",{className:"relative w-full aspect-[2/3] bg-gray-700"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"}),t.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-2 sm:p-3 md:p-4",children:[t.jsx("div",{className:"h-5 bg-gray-600 rounded w-3/4 mb-2"}),t.jsxs("div",{className:"flex justify-between items-center mt-1",children:[t.jsx("div",{className:"h-4 bg-gray-600 rounded w-1/4"}),t.jsx("div",{className:"h-4 bg-gray-600 rounded w-1/4"})]})]})]});export{x as M,v as a,h as u};
