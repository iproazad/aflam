import{r as R,j as f,s as W,f as Ht}from"./index-n42W8s8j.js";import{P as dn}from"./Pagination-CFvFF_sy.js";import{F as De,S as ke}from"./SpinnerIcon-BxIbq1Dd.js";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let No,wo;function Ro(){return{geminiUrl:No,vertexUrl:wo}}function Po(n,e,t,o){var r,l;if(!(n!=null&&n.baseUrl)){const a=Ro();return e?(r=a.vertexUrl)!==null&&r!==void 0?r:t:(l=a.geminiUrl)!==null&&l!==void 0?l:o}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class me{}function U(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function s(n,e,t){for(let l=0;l<e.length-1;l++){const a=e[l];if(a.endsWith("[]")){const u=a.slice(0,-2);if(!(u in n))if(Array.isArray(t))n[u]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(n[u])){const d=n[u];if(Array.isArray(t))for(let c=0;c<d.length;c++){const p=d[c];s(p,e.slice(l+1),t[c])}else for(const c of d)s(c,e.slice(l+1),t)}return}else if(a.endsWith("[0]")){const u=a.slice(0,-3);u in n||(n[u]=[{}]);const d=n[u];s(d[0],e.slice(l+1),t);return}(!n[a]||typeof n[a]!="object")&&(n[a]={}),n=n[a]}const o=e[e.length-1],r=n[o];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[o]=t}function i(n,e){try{if(e.length===1&&e[0]==="_self")return n;for(let t=0;t<e.length;t++){if(typeof n!="object"||n===null)return;const o=e[t];if(o.endsWith("[]")){const r=o.slice(0,-2);if(r in n){const l=n[r];return Array.isArray(l)?l.map(a=>i(a,e.slice(t+1))):void 0}else return}else n=n[o]}return n}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fn(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ko(n){const e={},t=i(n,["operationName"]);t!=null&&s(e,["operationName"],t);const o=i(n,["resourceName"]);return o!=null&&s(e,["_url","resourceName"],o),e}function Do(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);l!=null&&s(e,["error"],l);const a=i(n,["response","generateVideoResponse"]);return a!=null&&s(e,["response"],Fo(a)),e}function bo(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);l!=null&&s(e,["error"],l);const a=i(n,["response"]);return a!=null&&s(e,["response"],Uo(a)),e}function Fo(n){const e={},t=i(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>Lo(a))),s(e,["generatedVideos"],l)}const o=i(n,["raiMediaFilteredCount"]);o!=null&&s(e,["raiMediaFilteredCount"],o);const r=i(n,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function Uo(n){const e={},t=i(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>Vo(a))),s(e,["generatedVideos"],l)}const o=i(n,["raiMediaFilteredCount"]);o!=null&&s(e,["raiMediaFilteredCount"],o);const r=i(n,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function Lo(n){const e={},t=i(n,["_self"]);return t!=null&&s(e,["video"],Bo(t)),e}function Vo(n){const e={},t=i(n,["_self"]);return t!=null&&s(e,["video"],Ho(t)),e}function qo(n){const e={},t=i(n,["operationName"]);return t!=null&&s(e,["_url","operationName"],t),e}function Go(n){const e={},t=i(n,["operationName"]);return t!=null&&s(e,["_url","operationName"],t),e}function Bo(n){const e={},t=i(n,["video","uri"]);t!=null&&s(e,["uri"],t);const o=i(n,["video","encodedVideo"]);o!=null&&s(e,["videoBytes"],fn(o));const r=i(n,["encoding"]);return r!=null&&s(e,["mimeType"],r),e}function Ho(n){const e={},t=i(n,["gcsUri"]);t!=null&&s(e,["uri"],t);const o=i(n,["bytesBase64Encoded"]);o!=null&&s(e,["videoBytes"],fn(o));const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var xn;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(xn||(xn={}));var vn;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(vn||(vn={}));var Z;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Z||(Z={}));var Sn;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(Sn||(Sn={}));var _n;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(_n||(_n={}));var En;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(En||(En={}));var An;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(An||(An={}));var Mn;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(Mn||(Mn={}));var In;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(In||(In={}));var Nn;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Nn||(Nn={}));var wn;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(wn||(wn={}));var Rn;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Rn||(Rn={}));var Pn;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Pn||(Pn={}));var kn;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY"})(kn||(kn={}));var Dn;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Dn||(Dn={}));var He;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(He||(He={}));var bn;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(bn||(bn={}));var je;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(je||(je={}));var Fn;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Fn||(Fn={}));var Un;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Un||(Un={}));var Ln;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(Ln||(Ln={}));var Vn;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(Vn||(Vn={}));var qn;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(qn||(qn={}));var Gn;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Gn||(Gn={}));var Bn;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(Bn||(Bn={}));var Hn;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Hn||(Hn={}));var $n;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})($n||($n={}));var Jn;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(Jn||(Jn={}));var Wn;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Wn||(Wn={}));var Yn;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Yn||(Yn={}));var Kn;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Kn||(Kn={}));var zn;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(zn||(zn={}));var Xn;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(Xn||(Xn={}));var Qn;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(Qn||(Qn={}));var Zn;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(Zn||(Zn={}));var On;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(On||(On={}));var jn;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(jn||(jn={}));var et;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(et||(et={}));var nt;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(nt||(nt={}));var tt;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(tt||(tt={}));var ot;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(ot||(ot={}));var it;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(it||(it={}));var st;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(st||(st={}));var rt;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(rt||(rt={}));var lt;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(lt||(lt={}));var at;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(at||(at={}));var ut;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(ut||(ut={}));var ve;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(ve||(ve={}));class en{constructor(e){const t={};for(const o of e.headers.entries())t[o[0]]=o[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Re{get text(){var e,t,o,r,l,a,u,d;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",p=!1;const m=[];for(const g of(d=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[h,y]of Object.entries(g))h!=="text"&&h!=="thought"&&(y!==null||y!==void 0)&&m.push(h);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;p=!0,c+=g.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),p?c:void 0}get data(){var e,t,o,r,l,a,u,d;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const p=[];for(const m of(d=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[g,h]of Object.entries(m))g!=="inlineData"&&(h!==null||h!==void 0)&&p.push(g);m.inlineData&&typeof m.inlineData.data=="string"&&(c+=atob(m.inlineData.data))}return p.length>0&&console.warn(`there are non-data parts ${p} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,t,o,r,l,a,u,d;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(d=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(p=>p.functionCall).map(p=>p.functionCall).filter(p=>p!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,t,o,r,l,a,u,d,c;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const p=(d=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((p==null?void 0:p.length)!==0)return(c=p==null?void 0:p[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,t,o,r,l,a,u,d,c;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const p=(d=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((p==null?void 0:p.length)!==0)return(c=p==null?void 0:p[0])===null||c===void 0?void 0:c.output}}class ct{}class dt{}class $o{}class Jo{}class Wo{}class Yo{}class ft{}class pt{}class mt{}class Ko{}class $e{_fromAPIResponse({apiResponse:e,isVertexAI:t}){const o=new $e;let r;const l=e;return t?r=bo(l):r=Do(l),Object.assign(o,r),o}}class gt{}class ht{}class yt{}class zo{}class Xo{}class Qo{}class Ct{}class Zo{get text(){var e,t,o;let r="",l=!1;const a=[];for(const u of(o=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&o!==void 0?o:[]){for(const[d,c]of Object.entries(u))d!=="text"&&d!=="thought"&&c!==null&&a.push(d);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;l=!0,r+=u.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,t,o;let r="";const l=[];for(const a of(o=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&o!==void 0?o:[]){for(const[u,d]of Object.entries(a))u!=="inlineData"&&d!==null&&l.push(u);a.inlineData&&typeof a.inlineData.data=="string"&&(r+=atob(a.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class Oo{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function K(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function $t(n,e){const t=K(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function Jt(n){return Array.isArray(n)?n.map(e=>Je(e)):[Je(n)]}function Je(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function Wt(n){const e=Je(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Yt(n){const e=Je(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Tt(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function Kt(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>Tt(e)):[Tt(n)]}function nn(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function xt(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function vt(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function ne(n){if(n==null)throw new Error("ContentUnion is required");return nn(n)?n:{role:"user",parts:Kt(n)}}function pn(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const o=ne(t);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(n.isVertexAI()){const t=ne(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>ne(t)):[ne(e)]}function re(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(xt(n)||vt(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ne(n)]}const e=[],t=[],o=nn(n[0]);for(const r of n){const l=nn(r);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(xt(r)||vt(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return o||e.push({role:"user",parts:Kt(t)}),e}function jo(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(o=>o!=="null");if(t.length===1)e.type=Object.values(Z).includes(t[0].toUpperCase())?t[0].toUpperCase():Z.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of t)e.anyOf.push({type:Object.values(Z).includes(o.toUpperCase())?o.toUpperCase():Z.TYPE_UNSPECIFIED})}}function Se(n){const e={},t=["items"],o=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&jo(n.type,e);for(const[a,u]of Object.entries(n))if(u!=null)if(a=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(Z).includes(u.toUpperCase())?u.toUpperCase():Z.TYPE_UNSPECIFIED}else if(t.includes(a))e[a]=Se(u);else if(o.includes(a)){const d=[];for(const c of u){if(c.type=="null"){e.nullable=!0;continue}d.push(Se(c))}e[a]=d}else if(r.includes(a)){const d={};for(const[c,p]of Object.entries(u))d[c]=Se(p);e[a]=d}else{if(a==="additionalProperties")continue;e[a]=u}return e}function mn(n){return Se(n)}function gn(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function hn(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Ae(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Se(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Se(e.response));return n}function Me(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function ei(n,e,t,o=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===o;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function de(n,e){if(typeof e!="string")throw new Error("name must be a string");return ei(n,e,"cachedContents")}function zt(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function ge(n){return fn(n)}function ni(n){return n!=null&&typeof n=="object"&&"name"in n}function ti(n){return n!=null&&typeof n=="object"&&"video"in n}function oi(n){return n!=null&&typeof n=="object"&&"uri"in n}function Xt(n){var e;let t;if(ni(n)&&(t=n.name),!(oi(n)&&(t=n.uri,t===void 0))&&!(ti(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function Qt(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function Zt(n){for(const e of["models","tunedModels","publisherModels"])if(ii(n,e))return n[e];return[]}function ii(n,e){return n!==null&&typeof n=="object"&&e in n}function si(n,e={}){const t=n,o={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(o.responseJsonSchema=t.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function ri(n,e={}){const t=[],o=new Set;for(const r of n){const l=r.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const a=si(r,e);a.functionDeclarations&&t.push(...a.functionDeclarations)}return{functionDeclarations:t}}function Ot(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const o=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function li(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function jt(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let l=!1;for(const a of r){if(typeof a!="object"||a===null)continue;const d=a.response;if(typeof d!="object"||d===null)continue;if(d.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Ie(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function eo(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ai(n){const e={},t=i(n,["responsesFile"]);t!=null&&s(e,["fileName"],t);const o=i(n,["inlinedResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>zi(a))),s(e,["inlinedResponses"],l)}const r=i(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>Yi(a))),s(e,["inlinedEmbedContentResponses"],l)}return e}function ui(n){const e={},t=i(n,["predictionsFormat"]);t!=null&&s(e,["format"],t);const o=i(n,["gcsDestination","outputUriPrefix"]);o!=null&&s(e,["gcsUri"],o);const r=i(n,["bigqueryDestination","outputUri"]);return r!=null&&s(e,["bigqueryUri"],r),e}function ci(n){const e={},t=i(n,["format"]);t!=null&&s(e,["predictionsFormat"],t);const o=i(n,["gcsUri"]);o!=null&&s(e,["gcsDestination","outputUriPrefix"],o);const r=i(n,["bigqueryUri"]);if(r!=null&&s(e,["bigqueryDestination","outputUri"],r),i(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(i(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(i(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function xe(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata","displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["metadata","state"]);r!=null&&s(e,["state"],eo(r));const l=i(n,["metadata","createTime"]);l!=null&&s(e,["createTime"],l);const a=i(n,["metadata","endTime"]);a!=null&&s(e,["endTime"],a);const u=i(n,["metadata","updateTime"]);u!=null&&s(e,["updateTime"],u);const d=i(n,["metadata","model"]);d!=null&&s(e,["model"],d);const c=i(n,["metadata","output"]);return c!=null&&s(e,["dest"],ai(jt(c))),e}function tn(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["state"]);r!=null&&s(e,["state"],eo(r));const l=i(n,["error"]);l!=null&&s(e,["error"],to(l));const a=i(n,["createTime"]);a!=null&&s(e,["createTime"],a);const u=i(n,["startTime"]);u!=null&&s(e,["startTime"],u);const d=i(n,["endTime"]);d!=null&&s(e,["endTime"],d);const c=i(n,["updateTime"]);c!=null&&s(e,["updateTime"],c);const p=i(n,["model"]);p!=null&&s(e,["model"],p);const m=i(n,["inputConfig"]);m!=null&&s(e,["src"],di(m));const g=i(n,["outputConfig"]);return g!=null&&s(e,["dest"],ui(jt(g))),e}function di(n){const e={},t=i(n,["instancesFormat"]);t!=null&&s(e,["format"],t);const o=i(n,["gcsSource","uris"]);o!=null&&s(e,["gcsUri"],o);const r=i(n,["bigquerySource","inputUri"]);return r!=null&&s(e,["bigqueryUri"],r),e}function fi(n,e){const t={};if(i(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(i(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(i(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=i(e,["fileName"]);o!=null&&s(t,["fileName"],o);const r=i(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>Ki(n,a))),s(t,["requests","requests"],l)}return t}function pi(n){const e={},t=i(n,["format"]);t!=null&&s(e,["instancesFormat"],t);const o=i(n,["gcsUri"]);o!=null&&s(e,["gcsSource","uris"],o);const r=i(n,["bigqueryUri"]);if(r!=null&&s(e,["bigquerySource","inputUri"],r),i(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(i(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function mi(n){const e={},t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function gi(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function hi(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],Ie(n,o)),t}function yi(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],Ie(n,o)),t}function Ci(n){const e={},t=i(n,["content"]);t!=null&&s(e,["content"],vi(t));const o=i(n,["citationMetadata"]);o!=null&&s(e,["citationMetadata"],Ti(o));const r=i(n,["tokenCount"]);r!=null&&s(e,["tokenCount"],r);const l=i(n,["finishReason"]);l!=null&&s(e,["finishReason"],l);const a=i(n,["urlContextMetadata"]);a!=null&&s(e,["urlContextMetadata"],ys(a));const u=i(n,["avgLogprobs"]);u!=null&&s(e,["avgLogprobs"],u);const d=i(n,["groundingMetadata"]);d!=null&&s(e,["groundingMetadata"],d);const c=i(n,["index"]);c!=null&&s(e,["index"],c);const p=i(n,["logprobsResult"]);p!=null&&s(e,["logprobsResult"],p);const m=i(n,["safetyRatings"]);return m!=null&&s(e,["safetyRatings"],m),e}function Ti(n){const e={},t=i(n,["citationSources"]);return t!=null&&s(e,["citations"],t),e}function xi(n){const e={},t=i(n,["values"]);return t!=null&&s(e,["values"],t),e}function vi(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>is(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function no(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>ss(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function Si(n,e){const t={},o=i(n,["displayName"]);if(e!==void 0&&o!=null&&s(e,["batch","displayName"],o),i(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function _i(n,e){const t={},o=i(n,["displayName"]);e!==void 0&&o!=null&&s(e,["displayName"],o);const r=i(n,["dest"]);return e!==void 0&&r!=null&&s(e,["outputConfig"],ci(li(r))),t}function ze(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],K(n,o));const r=i(e,["src"]);r!=null&&s(t,["batch","inputConfig"],fi(n,Ot(n,r)));const l=i(e,["config"]);return l!=null&&Si(l,t),t}function Ei(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["model"],K(n,o));const r=i(e,["src"]);r!=null&&s(t,["inputConfig"],pi(Ot(n,r)));const l=i(e,["config"]);return l!=null&&_i(l,t),t}function Ai(n,e){const t={},o=i(n,["displayName"]);return e!==void 0&&o!=null&&s(e,["batch","displayName"],o),t}function Xe(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],K(n,o));const r=i(e,["src"]);r!=null&&s(t,["batch","inputConfig"],Di(n,r));const l=i(e,["config"]);return l!=null&&Ai(l,t),t}function Mi(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],Ie(n,o)),t}function Ii(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],Ie(n,o)),t}function Ni(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);return l!=null&&s(e,["error"],yn(l)),e}function wi(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);return l!=null&&s(e,["error"],to(l)),e}function Ri(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function Pi(n,e){const t={},o=i(e,["contents"]);o!=null&&s(t,["requests[]","request","content"],pn(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],ki(r,t)),t}function ki(n,e){const t={},o=i(n,["taskType"]);e!==void 0&&o!=null&&s(e,["requests[]","taskType"],o);const r=i(n,["title"]);e!==void 0&&r!=null&&s(e,["requests[]","title"],r);const l=i(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&s(e,["requests[]","outputDimensionality"],l),i(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(i(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function Di(n,e){const t={},o=i(e,["fileName"]);o!=null&&s(t,["file_name"],o);const r=i(e,["inlinedRequests"]);return r!=null&&s(t,["requests"],Pi(n,r)),t}function bi(n){const e={},t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Fi(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Ui(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function Li(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function Vi(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["allowedFunctionNames"]);return o!=null&&s(e,["allowedFunctionNames"],o),e}function qi(n){const e={},t=i(n,["behavior"]);t!=null&&s(e,["behavior"],t);const o=i(n,["description"]);o!=null&&s(e,["description"],o);const r=i(n,["name"]);r!=null&&s(e,["name"],r);const l=i(n,["parameters"]);l!=null&&s(e,["parameters"],l);const a=i(n,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const u=i(n,["response"]);u!=null&&s(e,["response"],u);const d=i(n,["responseJsonSchema"]);return d!=null&&s(e,["responseJsonSchema"],d),e}function Gi(n,e,t){const o={},r=i(e,["systemInstruction"]);t!==void 0&&r!=null&&s(t,["systemInstruction"],no(ne(r)));const l=i(e,["temperature"]);l!=null&&s(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&s(o,["topP"],a);const u=i(e,["topK"]);u!=null&&s(o,["topK"],u);const d=i(e,["candidateCount"]);d!=null&&s(o,["candidateCount"],d);const c=i(e,["maxOutputTokens"]);c!=null&&s(o,["maxOutputTokens"],c);const p=i(e,["stopSequences"]);p!=null&&s(o,["stopSequences"],p);const m=i(e,["responseLogprobs"]);m!=null&&s(o,["responseLogprobs"],m);const g=i(e,["logprobs"]);g!=null&&s(o,["logprobs"],g);const h=i(e,["presencePenalty"]);h!=null&&s(o,["presencePenalty"],h);const y=i(e,["frequencyPenalty"]);y!=null&&s(o,["frequencyPenalty"],y);const C=i(e,["seed"]);C!=null&&s(o,["seed"],C);const A=i(e,["responseMimeType"]);A!=null&&s(o,["responseMimeType"],A);const _=i(e,["responseSchema"]);_!=null&&s(o,["responseSchema"],us(mn(_)));const E=i(e,["responseJsonSchema"]);if(E!=null&&s(o,["responseJsonSchema"],E),i(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=i(e,["safetySettings"]);if(t!==void 0&&S!=null){let N=S;Array.isArray(N)&&(N=N.map(G=>as(G))),s(t,["safetySettings"],N)}const P=i(e,["tools"]);if(t!==void 0&&P!=null){let N=Me(P);Array.isArray(N)&&(N=N.map(G=>hs(Ae(G)))),s(t,["tools"],N)}const D=i(e,["toolConfig"]);if(t!==void 0&&D!=null&&s(t,["toolConfig"],gs(D)),i(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const F=i(e,["cachedContent"]);t!==void 0&&F!=null&&s(t,["cachedContent"],de(n,F));const b=i(e,["responseModalities"]);b!=null&&s(o,["responseModalities"],b);const w=i(e,["mediaResolution"]);w!=null&&s(o,["mediaResolution"],w);const T=i(e,["speechConfig"]);if(T!=null&&s(o,["speechConfig"],fs(gn(T))),i(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=i(e,["thinkingConfig"]);return M!=null&&s(o,["thinkingConfig"],ps(M)),o}function Bi(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(c=>Ci(c))),s(e,["candidates"],d)}const r=i(n,["modelVersion"]);r!=null&&s(e,["modelVersion"],r);const l=i(n,["promptFeedback"]);l!=null&&s(e,["promptFeedback"],l);const a=i(n,["responseId"]);a!=null&&s(e,["responseId"],a);const u=i(n,["usageMetadata"]);return u!=null&&s(e,["usageMetadata"],u),e}function Hi(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],Ie(n,o)),t}function $i(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],Ie(n,o)),t}function Ji(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],Ri(t)),e}function Wi(n){const e={},t=i(n,["timeRangeFilter"]);if(t!=null&&s(e,["timeRangeFilter"],Xi(t)),i(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Yi(n){const e={},t=i(n,["response"]);t!=null&&s(e,["response"],cs(t));const o=i(n,["error"]);return o!=null&&s(e,["error"],yn(o)),e}function Ki(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["request","model"],K(n,o));const r=i(e,["contents"]);if(r!=null){let a=re(r);Array.isArray(a)&&(a=a.map(u=>no(u))),s(t,["request","contents"],a)}const l=i(e,["config"]);return l!=null&&s(t,["request","generationConfig"],Gi(n,l,t)),t}function zi(n){const e={},t=i(n,["response"]);t!=null&&s(e,["response"],Bi(t));const o=i(n,["error"]);return o!=null&&s(e,["error"],yn(o)),e}function Xi(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function yn(n){const e={},t=i(n,["details"]);t!=null&&s(e,["details"],t);const o=i(n,["code"]);o!=null&&s(e,["code"],o);const r=i(n,["message"]);return r!=null&&s(e,["message"],r),e}function to(n){const e={},t=i(n,["details"]);t!=null&&s(e,["details"],t);const o=i(n,["code"]);o!=null&&s(e,["code"],o);const r=i(n,["message"]);return r!=null&&s(e,["message"],r),e}function Qi(n){const e={},t=i(n,["latitude"]);t!=null&&s(e,["latitude"],t);const o=i(n,["longitude"]);return o!=null&&s(e,["longitude"],o),e}function Zi(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);if(e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),i(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function Oi(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);e!==void 0&&r!=null&&s(e,["_query","pageToken"],r);const l=i(n,["filter"]);return e!==void 0&&l!=null&&s(e,["_query","filter"],l),t}function ji(n){const e={},t=i(n,["config"]);return t!=null&&Zi(t,e),e}function es(n){const e={},t=i(n,["config"]);return t!=null&&Oi(t,e),e}function ns(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>xe(a))),s(e,["batchJobs"],l)}return e}function ts(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>tn(a))),s(e,["batchJobs"],l)}return e}function os(n){const e={},t=i(n,["speakerVoiceConfigs"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>ds(r))),s(e,["speakerVoiceConfigs"],o)}return e}function is(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],xs(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],mi(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],bi(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],Ui(u));const d=i(n,["codeExecutionResult"]);d!=null&&s(e,["codeExecutionResult"],d);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const p=i(n,["functionResponse"]);p!=null&&s(e,["functionResponse"],p);const m=i(n,["text"]);return m!=null&&s(e,["text"],m),e}function ss(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],vs(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],gi(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],Fi(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],Li(u));const d=i(n,["codeExecutionResult"]);d!=null&&s(e,["codeExecutionResult"],d);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const p=i(n,["functionResponse"]);p!=null&&s(e,["functionResponse"],p);const m=i(n,["text"]);return m!=null&&s(e,["text"],m),e}function rs(n){const e={},t=i(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function ls(n){const e={},t=i(n,["latLng"]);t!=null&&s(e,["latLng"],Qi(t));const o=i(n,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function as(n){const e={};if(i(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=i(n,["category"]);t!=null&&s(e,["category"],t);const o=i(n,["threshold"]);return o!=null&&s(e,["threshold"],o),e}function us(n){const e={},t=i(n,["anyOf"]);t!=null&&s(e,["anyOf"],t);const o=i(n,["default"]);o!=null&&s(e,["default"],o);const r=i(n,["description"]);r!=null&&s(e,["description"],r);const l=i(n,["enum"]);l!=null&&s(e,["enum"],l);const a=i(n,["example"]);a!=null&&s(e,["example"],a);const u=i(n,["format"]);u!=null&&s(e,["format"],u);const d=i(n,["items"]);d!=null&&s(e,["items"],d);const c=i(n,["maxItems"]);c!=null&&s(e,["maxItems"],c);const p=i(n,["maxLength"]);p!=null&&s(e,["maxLength"],p);const m=i(n,["maxProperties"]);m!=null&&s(e,["maxProperties"],m);const g=i(n,["maximum"]);g!=null&&s(e,["maximum"],g);const h=i(n,["minItems"]);h!=null&&s(e,["minItems"],h);const y=i(n,["minLength"]);y!=null&&s(e,["minLength"],y);const C=i(n,["minProperties"]);C!=null&&s(e,["minProperties"],C);const A=i(n,["minimum"]);A!=null&&s(e,["minimum"],A);const _=i(n,["nullable"]);_!=null&&s(e,["nullable"],_);const E=i(n,["pattern"]);E!=null&&s(e,["pattern"],E);const S=i(n,["properties"]);S!=null&&s(e,["properties"],S);const P=i(n,["propertyOrdering"]);P!=null&&s(e,["propertyOrdering"],P);const D=i(n,["required"]);D!=null&&s(e,["required"],D);const F=i(n,["title"]);F!=null&&s(e,["title"],F);const b=i(n,["type"]);return b!=null&&s(e,["type"],b),e}function cs(n){const e={},t=i(n,["embedding"]);t!=null&&s(e,["embedding"],xi(t));const o=i(n,["tokenCount"]);return o!=null&&s(e,["tokenCount"],o),e}function ds(n){const e={},t=i(n,["speaker"]);t!=null&&s(e,["speaker"],t);const o=i(n,["voiceConfig"]);return o!=null&&s(e,["voiceConfig"],oo(o)),e}function fs(n){const e={},t=i(n,["voiceConfig"]);t!=null&&s(e,["voiceConfig"],oo(t));const o=i(n,["multiSpeakerVoiceConfig"]);o!=null&&s(e,["multiSpeakerVoiceConfig"],os(o));const r=i(n,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function ps(n){const e={},t=i(n,["includeThoughts"]);t!=null&&s(e,["includeThoughts"],t);const o=i(n,["thinkingBudget"]);return o!=null&&s(e,["thinkingBudget"],o),e}function ms(n){const e={},t=i(n,["environment"]);t!=null&&s(e,["environment"],t);const o=i(n,["excludedPredefinedFunctions"]);return o!=null&&s(e,["excludedPredefinedFunctions"],o),e}function gs(n){const e={},t=i(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],Vi(t));const o=i(n,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],ls(o)),e}function hs(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let d=t;Array.isArray(d)&&(d=d.map(c=>qi(c))),s(e,["functionDeclarations"],d)}if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(n,["googleSearch"]);o!=null&&s(e,["googleSearch"],Wi(o));const r=i(n,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],Ji(r)),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(n,["urlContext"])!=null&&s(e,["urlContext"],Cs());const a=i(n,["computerUse"]);a!=null&&s(e,["computerUse"],ms(a));const u=i(n,["codeExecution"]);return u!=null&&s(e,["codeExecution"],u),e}function ys(n){const e={},t=i(n,["urlMetadata"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Ts(r))),s(e,["urlMetadata"],o)}return e}function Cs(){return{}}function Ts(n){const e={},t=i(n,["retrievedUrl"]);t!=null&&s(e,["retrievedUrl"],t);const o=i(n,["urlRetrievalStatus"]);return o!=null&&s(e,["urlRetrievalStatus"],o),e}function xs(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function vs(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function oo(n){const e={},t=i(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],rs(t)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var pe;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(pe||(pe={}));class be{constructor(e,t,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,o,r)}init(e,t,o){var r,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!o||Object.keys(o).length===0?a={config:{}}:typeof o=="object"?a=Object.assign({},o):a=o,a.config&&(a.config.pageToken=t.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(l=(r=a.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ss extends me{constructor(e){super(),this.apiClient=e,this.create=async t=>{var o,r;if(this.apiClient.isVertexAI())return t.config=this.formatDestination(t.src,t.config),this.createInternal(t);const l=t.src;if(!(Array.isArray(t.src)||l.inlinedRequests!==void 0))return this.createInternal(t);const u=this.createInlinedGenerateContentRequest(t),d=u.path,c=u.body,p=ze(this.apiClient,t)._query||{};return this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()).then(g=>xe(g))},this.createEmbeddings=async t=>{var o,r;if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");if(!(t.src.inlinedRequests!==void 0))return this.createEmbeddingsInternal(t);const u=this.createInlinedEmbedContentRequest(t),d=u.path,c=u.body,p=Xe(this.apiClient,t)._query||{};return this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()).then(g=>xe(g))},this.list=async(t={})=>new be(pe.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=ze(this.apiClient,e),o=t._url,r=U("{model}:batchGenerateContent",o),u=t.batch.inputConfig.requests,d=u.requests,c=[];for(const p of d){const m=Object.assign({},p);if(m.systemInstruction){const g=m.systemInstruction;delete m.systemInstruction;const h=m.request;h.systemInstruction=g,m.request=h}c.push(m)}return u.requests=c,delete t.config,delete t._url,delete t._query,{path:r,body:t}}createInlinedEmbedContentRequest(e){const t=Xe(this.apiClient,e),o=t._url,r=U("{model}:asyncBatchEmbedContent",o),u=t.batch.inputConfig.requests,d=u.requests,c=[];delete u.config;for(const p of d){const m=Object.assign({},p),g=m.request;for(const h in m)h!=="request"&&(g[h]=m[h],delete m[h]);c.push(m)}return u.requests=c,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const o=t?Object.assign({},t):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const l=this.getGcsUri(e),a=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?o.dest=`${l.slice(0,-6)}/dest`:o.dest=`${l}_dest_${r}`;else if(a)o.dest=`${a}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Ei(this.apiClient,e);return u=U("batchPredictionJobs",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>tn(p))}else{const c=ze(this.apiClient,e);return u=U("{model}:batchGenerateContent",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json()),a.then(p=>xe(p))}}async createEmbeddingsInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Xe(this.apiClient,e);return l=U("{model}:asyncBatchEmbedContent",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>xe(d))}}async get(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=$i(this.apiClient,e);return u=U("batchPredictionJobs/{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>tn(p))}else{const c=Hi(this.apiClient,e);return u=U("batches/{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json()),a.then(p=>xe(p))}}async cancel(e){var t,o,r,l;let a="",u={};if(this.apiClient.isVertexAI()){const d=yi(this.apiClient,e);a=U("batchPredictionJobs/{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const d=hi(this.apiClient,e);a=U("batches/{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=es(e);return u=U("batchPredictionJobs",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:p.headers},g})),a.then(p=>{const m=ts(p),g=new Ct;return Object.assign(g,m),g})}else{const c=ji(e);return u=U("batches",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:p.headers},g})),a.then(p=>{const m=ns(p),g=new Ct;return Object.assign(g,m),g})}}async delete(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Ii(this.apiClient,e);return u=U("batchPredictionJobs/{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:p.headers},g})),a.then(p=>wi(p))}else{const c=Mi(this.apiClient,e);return u=U("batches/{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:p.headers},g})),a.then(p=>Ni(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _s(n){const e={},t=i(n,["apiKeyString"]);return t!=null&&s(e,["apiKeyString"],t),e}function Es(n){const e={},t=i(n,["apiKeyConfig"]);t!=null&&s(e,["apiKeyConfig"],_s(t));const o=i(n,["authType"]);o!=null&&s(e,["authType"],o);const r=i(n,["googleServiceAccountConfig"]);r!=null&&s(e,["googleServiceAccountConfig"],r);const l=i(n,["httpBasicAuthConfig"]);l!=null&&s(e,["httpBasicAuthConfig"],l);const a=i(n,["oauthConfig"]);a!=null&&s(e,["oauthConfig"],a);const u=i(n,["oidcConfig"]);return u!=null&&s(e,["oidcConfig"],u),e}function As(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Ms(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["data"]);o!=null&&s(e,["data"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Ge(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["model"]);r!=null&&s(e,["model"],r);const l=i(n,["createTime"]);l!=null&&s(e,["createTime"],l);const a=i(n,["updateTime"]);a!=null&&s(e,["updateTime"],a);const u=i(n,["expireTime"]);u!=null&&s(e,["expireTime"],u);const d=i(n,["usageMetadata"]);return d!=null&&s(e,["usageMetadata"],d),e}function Be(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["model"]);r!=null&&s(e,["model"],r);const l=i(n,["createTime"]);l!=null&&s(e,["createTime"],l);const a=i(n,["updateTime"]);a!=null&&s(e,["updateTime"],a);const u=i(n,["expireTime"]);u!=null&&s(e,["expireTime"],u);const d=i(n,["usageMetadata"]);return d!=null&&s(e,["usageMetadata"],d),e}function St(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>ur(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function _t(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>cr(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function Is(n,e){const t={},o=i(n,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const r=i(n,["expireTime"]);e!==void 0&&r!=null&&s(e,["expireTime"],r);const l=i(n,["displayName"]);e!==void 0&&l!=null&&s(e,["displayName"],l);const a=i(n,["contents"]);if(e!==void 0&&a!=null){let p=re(a);Array.isArray(p)&&(p=p.map(m=>St(m))),s(e,["contents"],p)}const u=i(n,["systemInstruction"]);e!==void 0&&u!=null&&s(e,["systemInstruction"],St(ne(u)));const d=i(n,["tools"]);if(e!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(m=>yr(m))),s(e,["tools"],p)}const c=i(n,["toolConfig"]);if(e!==void 0&&c!=null&&s(e,["toolConfig"],gr(c)),i(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function Ns(n,e){const t={},o=i(n,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const r=i(n,["expireTime"]);e!==void 0&&r!=null&&s(e,["expireTime"],r);const l=i(n,["displayName"]);e!==void 0&&l!=null&&s(e,["displayName"],l);const a=i(n,["contents"]);if(e!==void 0&&a!=null){let m=re(a);Array.isArray(m)&&(m=m.map(g=>_t(g))),s(e,["contents"],m)}const u=i(n,["systemInstruction"]);e!==void 0&&u!=null&&s(e,["systemInstruction"],_t(ne(u)));const d=i(n,["tools"]);if(e!==void 0&&d!=null){let m=d;Array.isArray(m)&&(m=m.map(g=>Cr(g))),s(e,["tools"],m)}const c=i(n,["toolConfig"]);e!==void 0&&c!=null&&s(e,["toolConfig"],hr(c));const p=i(n,["kmsKeyName"]);return e!==void 0&&p!=null&&s(e,["encryption_spec","kmsKeyName"],p),t}function ws(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["model"],$t(n,o));const r=i(e,["config"]);return r!=null&&Is(r,t),t}function Rs(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["model"],$t(n,o));const r=i(e,["config"]);return r!=null&&Ns(r,t),t}function Ps(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],de(n,o)),t}function ks(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],de(n,o)),t}function Ds(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}function bs(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}function Fs(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function Us(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function Ls(n){const e={},t=i(n,["excludeDomains"]);return t!=null&&s(e,["excludeDomains"],t),e}function Vs(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function qs(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["fileUri"]);o!=null&&s(e,["fileUri"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Gs(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function Bs(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function Hs(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["allowedFunctionNames"]);return o!=null&&s(e,["allowedFunctionNames"],o),e}function $s(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["allowedFunctionNames"]);return o!=null&&s(e,["allowedFunctionNames"],o),e}function Js(n){const e={},t=i(n,["behavior"]);t!=null&&s(e,["behavior"],t);const o=i(n,["description"]);o!=null&&s(e,["description"],o);const r=i(n,["name"]);r!=null&&s(e,["name"],r);const l=i(n,["parameters"]);l!=null&&s(e,["parameters"],l);const a=i(n,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const u=i(n,["response"]);u!=null&&s(e,["response"],u);const d=i(n,["responseJsonSchema"]);return d!=null&&s(e,["responseJsonSchema"],d),e}function Ws(n){const e={};if(i(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=i(n,["description"]);t!=null&&s(e,["description"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["parameters"]);r!=null&&s(e,["parameters"],r);const l=i(n,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);const a=i(n,["response"]);a!=null&&s(e,["response"],a);const u=i(n,["responseJsonSchema"]);return u!=null&&s(e,["responseJsonSchema"],u),e}function Ys(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],de(n,o)),t}function Ks(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],de(n,o)),t}function zs(n){const e={},t=i(n,["authConfig"]);return t!=null&&s(e,["authConfig"],Es(t)),e}function Xs(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],Fs(t)),e}function Qs(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],Us(t)),e}function Zs(n){const e={},t=i(n,["timeRangeFilter"]);if(t!=null&&s(e,["timeRangeFilter"],js(t)),i(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Os(n){const e={},t=i(n,["timeRangeFilter"]);t!=null&&s(e,["timeRangeFilter"],er(t));const o=i(n,["excludeDomains"]);return o!=null&&s(e,["excludeDomains"],o),e}function js(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function er(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function nr(n){const e={},t=i(n,["latitude"]);t!=null&&s(e,["latitude"],t);const o=i(n,["longitude"]);return o!=null&&s(e,["longitude"],o),e}function tr(n){const e={},t=i(n,["latitude"]);t!=null&&s(e,["latitude"],t);const o=i(n,["longitude"]);return o!=null&&s(e,["longitude"],o),e}function or(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),t}function ir(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),t}function sr(n){const e={},t=i(n,["config"]);return t!=null&&or(t,e),e}function rr(n){const e={},t=i(n,["config"]);return t!=null&&ir(t,e),e}function lr(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>Ge(a))),s(e,["cachedContents"],l)}return e}function ar(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>Be(a))),s(e,["cachedContents"],l)}return e}function ur(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Ar(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],As(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],Vs(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],Gs(u));const d=i(n,["codeExecutionResult"]);d!=null&&s(e,["codeExecutionResult"],d);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const p=i(n,["functionResponse"]);p!=null&&s(e,["functionResponse"],p);const m=i(n,["text"]);return m!=null&&s(e,["text"],m),e}function cr(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Mr(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],Ms(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],qs(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],Bs(u));const d=i(n,["codeExecutionResult"]);d!=null&&s(e,["codeExecutionResult"],d);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const p=i(n,["functionResponse"]);p!=null&&s(e,["functionResponse"],p);const m=i(n,["text"]);return m!=null&&s(e,["text"],m),e}function dr(n){const e={},t=i(n,["latLng"]);t!=null&&s(e,["latLng"],nr(t));const o=i(n,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function fr(n){const e={},t=i(n,["latLng"]);t!=null&&s(e,["latLng"],tr(t));const o=i(n,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function pr(n){const e={},t=i(n,["environment"]);t!=null&&s(e,["environment"],t);const o=i(n,["excludedPredefinedFunctions"]);return o!=null&&s(e,["excludedPredefinedFunctions"],o),e}function mr(n){const e={},t=i(n,["environment"]);t!=null&&s(e,["environment"],t);const o=i(n,["excludedPredefinedFunctions"]);return o!=null&&s(e,["excludedPredefinedFunctions"],o),e}function gr(n){const e={},t=i(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],Hs(t));const o=i(n,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],dr(o)),e}function hr(n){const e={},t=i(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],$s(t));const o=i(n,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],fr(o)),e}function yr(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let d=t;Array.isArray(d)&&(d=d.map(c=>Js(c))),s(e,["functionDeclarations"],d)}if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(n,["googleSearch"]);o!=null&&s(e,["googleSearch"],Zs(o));const r=i(n,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],Xs(r)),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(n,["urlContext"])!=null&&s(e,["urlContext"],_r());const a=i(n,["computerUse"]);a!=null&&s(e,["computerUse"],pr(a));const u=i(n,["codeExecution"]);return u!=null&&s(e,["codeExecution"],u),e}function Cr(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let m=t;Array.isArray(m)&&(m=m.map(g=>Ws(g))),s(e,["functionDeclarations"],m)}const o=i(n,["retrieval"]);o!=null&&s(e,["retrieval"],o);const r=i(n,["googleSearch"]);r!=null&&s(e,["googleSearch"],Os(r));const l=i(n,["googleSearchRetrieval"]);l!=null&&s(e,["googleSearchRetrieval"],Qs(l));const a=i(n,["enterpriseWebSearch"]);a!=null&&s(e,["enterpriseWebSearch"],Ls(a));const u=i(n,["googleMaps"]);u!=null&&s(e,["googleMaps"],zs(u)),i(n,["urlContext"])!=null&&s(e,["urlContext"],Er());const c=i(n,["computerUse"]);c!=null&&s(e,["computerUse"],mr(c));const p=i(n,["codeExecution"]);return p!=null&&s(e,["codeExecution"],p),e}function Tr(n,e){const t={},o=i(n,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const r=i(n,["expireTime"]);return e!==void 0&&r!=null&&s(e,["expireTime"],r),t}function xr(n,e){const t={},o=i(n,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const r=i(n,["expireTime"]);return e!==void 0&&r!=null&&s(e,["expireTime"],r),t}function vr(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],de(n,o));const r=i(e,["config"]);return r!=null&&Tr(r,t),t}function Sr(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],de(n,o));const r=i(e,["config"]);return r!=null&&xr(r,t),t}function _r(){return{}}function Er(){return{}}function Ar(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Mr(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ir extends me{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new be(pe.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(t),t)}async create(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Rs(this.apiClient,e);return u=U("cachedContents",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>Be(p))}else{const c=ws(this.apiClient,e);return u=U("cachedContents",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json()),a.then(p=>Ge(p))}}async get(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Ks(this.apiClient,e);return u=U("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>Be(p))}else{const c=Ys(this.apiClient,e);return u=U("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json()),a.then(p=>Ge(p))}}async delete(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=ks(this.apiClient,e);return u=U("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:p.headers},g})),a.then(p=>{const m=bs(p),g=new ht;return Object.assign(g,m),g})}else{const c=Ps(this.apiClient,e);return u=U("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:p.headers},g})),a.then(p=>{const m=Ds(p),g=new ht;return Object.assign(g,m),g})}}async update(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Sr(this.apiClient,e);return u=U("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>Be(p))}else{const c=vr(this.apiClient,e);return u=U("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json()),a.then(p=>Ge(p))}}async listInternal(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=rr(e);return u=U("cachedContents",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:p.headers},g})),a.then(p=>{const m=ar(p),g=new yt;return Object.assign(g,m),g})}else{const c=sr(e);return u=U("cachedContents",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:p.headers},g})),a.then(p=>{const m=lr(p),g=new yt;return Object.assign(g,m),g})}}}function Et(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],o=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Q(n){return this instanceof Q?(this.v=n,this):new Q(n)}function _e(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=t.apply(n,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(h){return function(y){return Promise.resolve(y).then(h,m)}}function u(h,y){o[h]&&(r[h]=function(C){return new Promise(function(A,_){l.push([h,C,A,_])>1||d(h,C)})},y&&(r[h]=y(r[h])))}function d(h,y){try{c(o[h](y))}catch(C){g(l[0][3],C)}}function c(h){h.value instanceof Q?Promise.resolve(h.value.v).then(p,m):g(l[0][2],h)}function p(h){d("next",h)}function m(h){d("throw",h)}function g(h,y){h(y),l.shift(),l.length&&d(l[0][0],l[0][1])}}function Pe(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Et=="function"?Et(n):n[Symbol.iterator](),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(l){t[l]=n[l]&&function(a){return new Promise(function(u,d){a=n[l](a),r(u,d,a.done,a.value)})}}function r(l,a,u,d){Promise.resolve(d).then(function(c){l({value:c,done:u})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nr(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:io(t)}function io(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function wr(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function At(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let o=0;for(;o<t;)if(n[o].role==="user")e.push(n[o]),o++;else{const r=[];let l=!0;for(;o<t&&n[o].role==="model";)r.push(n[o]),l&&!io(n[o])&&(l=!1),o++;l?e.push(...r):e.pop()}return e}class Rr{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new Pr(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Pr{constructor(e,t,o,r={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=o,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),wr(l)}async sendMessage(e){var t;await this.sendPromise;const o=ne(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,a,u;const d=await r,c=(a=(l=d.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content,p=d.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let g=[];p!=null&&(g=(u=p.slice(m))!==null&&u!==void 0?u:[]);const h=c?[c]:[];this.recordHistory(o,h,g)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const o=ne(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,o)}getHistory(e=!1){const t=e?At(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var o,r;return _e(this,arguments,function*(){var a,u,d,c;const p=[];try{for(var m=!0,g=Pe(e),h;h=yield Q(g.next()),a=h.done,!a;m=!0){c=h.value,m=!1;const y=c;if(Nr(y)){const C=(r=(o=y.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content;C!==void 0&&p.push(C)}yield yield Q(y)}}catch(y){u={error:y}}finally{try{!m&&!a&&(d=g.return)&&(yield Q(d.call(g)))}finally{if(u)throw u.error}}this.recordHistory(t,p)})}recordHistory(e,t,o){let r=[];t.length>0&&t.every(l=>l.role!==void 0)?r=t:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...At(o)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class We extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,We.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kr(n){const e={},t=i(n,["file"]);return t!=null&&s(e,["file"],Vr(t)),e}function Dr(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}function br(n){const e={},t=i(n,["name"]);return t!=null&&s(e,["_url","file"],Xt(t)),e}function Fr(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}function on(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["mimeType"]);r!=null&&s(e,["mimeType"],r);const l=i(n,["sizeBytes"]);l!=null&&s(e,["sizeBytes"],l);const a=i(n,["createTime"]);a!=null&&s(e,["createTime"],a);const u=i(n,["expirationTime"]);u!=null&&s(e,["expirationTime"],u);const d=i(n,["updateTime"]);d!=null&&s(e,["updateTime"],d);const c=i(n,["sha256Hash"]);c!=null&&s(e,["sha256Hash"],c);const p=i(n,["uri"]);p!=null&&s(e,["uri"],p);const m=i(n,["downloadUri"]);m!=null&&s(e,["downloadUri"],m);const g=i(n,["state"]);g!=null&&s(e,["state"],g);const h=i(n,["source"]);h!=null&&s(e,["source"],h);const y=i(n,["videoMetadata"]);y!=null&&s(e,["videoMetadata"],y);const C=i(n,["error"]);return C!=null&&s(e,["error"],Ur(C)),e}function Ur(n){const e={},t=i(n,["details"]);t!=null&&s(e,["details"],t);const o=i(n,["message"]);o!=null&&s(e,["message"],o);const r=i(n,["code"]);return r!=null&&s(e,["code"],r),e}function Lr(n){const e={},t=i(n,["details"]);t!=null&&s(e,["details"],t);const o=i(n,["message"]);o!=null&&s(e,["message"],o);const r=i(n,["code"]);return r!=null&&s(e,["code"],r),e}function Vr(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["mimeType"]);r!=null&&s(e,["mimeType"],r);const l=i(n,["sizeBytes"]);l!=null&&s(e,["sizeBytes"],l);const a=i(n,["createTime"]);a!=null&&s(e,["createTime"],a);const u=i(n,["expirationTime"]);u!=null&&s(e,["expirationTime"],u);const d=i(n,["updateTime"]);d!=null&&s(e,["updateTime"],d);const c=i(n,["sha256Hash"]);c!=null&&s(e,["sha256Hash"],c);const p=i(n,["uri"]);p!=null&&s(e,["uri"],p);const m=i(n,["downloadUri"]);m!=null&&s(e,["downloadUri"],m);const g=i(n,["state"]);g!=null&&s(e,["state"],g);const h=i(n,["source"]);h!=null&&s(e,["source"],h);const y=i(n,["videoMetadata"]);y!=null&&s(e,["videoMetadata"],y);const C=i(n,["error"]);return C!=null&&s(e,["error"],Lr(C)),e}function qr(n){const e={},t=i(n,["name"]);return t!=null&&s(e,["_url","file"],Xt(t)),e}function Gr(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),t}function Br(n){const e={},t=i(n,["config"]);return t!=null&&Gr(t,e),e}function Hr(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>on(a))),s(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $r extends me{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new be(pe.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>on(t))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Br(e);return l=U("files",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const p=c;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const c=Hr(d),p=new zo;return Object.assign(p,c),p})}}async createInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=kr(e);return l=U("upload/v1beta/files",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>{const c=Dr(d),p=new Xo;return Object.assign(p,c),p})}}async get(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=qr(e);return l=U("files/{file}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>on(d))}}async delete(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=br(e);return l=U("files/{file}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const p=c;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const c=Fr(d),p=new Qo;return Object.assign(p,c),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jr(){return{}}function Wr(){return{}}function Yr(){return{}}function Kr(){return{}}function zr(n){const e={},t=i(n,["apiKeyString"]);return t!=null&&s(e,["apiKeyString"],t),e}function Xr(n){const e={},t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);o!=null&&s(e,["mimeType"],o);const r=i(n,["sourceMetadata"]);return r!=null&&s(e,["sourceMetadata"],ql(r)),e}function Mt(){return{}}function It(){return{}}function Qr(n){const e={},t=i(n,["apiKeyConfig"]);t!=null&&s(e,["apiKeyConfig"],zr(t));const o=i(n,["authType"]);o!=null&&s(e,["authType"],o);const r=i(n,["googleServiceAccountConfig"]);r!=null&&s(e,["googleServiceAccountConfig"],r);const l=i(n,["httpBasicAuthConfig"]);l!=null&&s(e,["httpBasicAuthConfig"],l);const a=i(n,["oauthConfig"]);a!=null&&s(e,["oauthConfig"],a);const u=i(n,["oidcConfig"]);return u!=null&&s(e,["oidcConfig"],u),e}function Zr(n){const e={},t=i(n,["disabled"]);t!=null&&s(e,["disabled"],t);const o=i(n,["startOfSpeechSensitivity"]);o!=null&&s(e,["startOfSpeechSensitivity"],o);const r=i(n,["endOfSpeechSensitivity"]);r!=null&&s(e,["endOfSpeechSensitivity"],r);const l=i(n,["prefixPaddingMs"]);l!=null&&s(e,["prefixPaddingMs"],l);const a=i(n,["silenceDurationMs"]);return a!=null&&s(e,["silenceDurationMs"],a),e}function Or(n){const e={},t=i(n,["disabled"]);t!=null&&s(e,["disabled"],t);const o=i(n,["startOfSpeechSensitivity"]);o!=null&&s(e,["startOfSpeechSensitivity"],o);const r=i(n,["endOfSpeechSensitivity"]);r!=null&&s(e,["endOfSpeechSensitivity"],r);const l=i(n,["prefixPaddingMs"]);l!=null&&s(e,["prefixPaddingMs"],l);const a=i(n,["silenceDurationMs"]);return a!=null&&s(e,["silenceDurationMs"],a),e}function jr(n){const e={},t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function el(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["data"]);o!=null&&s(e,["data"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function nl(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function tl(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["data"]);o!=null&&s(e,["data"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function ol(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>oa(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function il(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>ia(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function sl(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>sa(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function rl(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>ra(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function ll(n){const e={},t=i(n,["triggerTokens"]);t!=null&&s(e,["triggerTokens"],t);const o=i(n,["slidingWindow"]);return o!=null&&s(e,["slidingWindow"],ga(o)),e}function al(n){const e={},t=i(n,["triggerTokens"]);t!=null&&s(e,["triggerTokens"],t);const o=i(n,["slidingWindow"]);return o!=null&&s(e,["slidingWindow"],ha(o)),e}function ul(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function cl(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function dl(n){const e={},t=i(n,["excludeDomains"]);return t!=null&&s(e,["excludeDomains"],t),e}function fl(n){const e={},t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function pl(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["fileUri"]);o!=null&&s(e,["fileUri"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function ml(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function gl(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["fileUri"]);o!=null&&s(e,["fileUri"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function so(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function ro(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function hl(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function yl(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function Cl(n){const e={},t=i(n,["behavior"]);t!=null&&s(e,["behavior"],t);const o=i(n,["description"]);o!=null&&s(e,["description"],o);const r=i(n,["name"]);r!=null&&s(e,["name"],r);const l=i(n,["parameters"]);l!=null&&s(e,["parameters"],l);const a=i(n,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const u=i(n,["response"]);u!=null&&s(e,["response"],u);const d=i(n,["responseJsonSchema"]);return d!=null&&s(e,["responseJsonSchema"],d),e}function Tl(n){const e={};if(i(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=i(n,["description"]);t!=null&&s(e,["description"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["parameters"]);r!=null&&s(e,["parameters"],r);const l=i(n,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);const a=i(n,["response"]);a!=null&&s(e,["response"],a);const u=i(n,["responseJsonSchema"]);return u!=null&&s(e,["responseJsonSchema"],u),e}function xl(n){const e={},t=i(n,["authConfig"]);return t!=null&&s(e,["authConfig"],Qr(t)),e}function vl(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],ul(t)),e}function Sl(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],cl(t)),e}function _l(n){const e={},t=i(n,["timeRangeFilter"]);if(t!=null&&s(e,["timeRangeFilter"],Al(t)),i(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function El(n){const e={},t=i(n,["timeRangeFilter"]);t!=null&&s(e,["timeRangeFilter"],Ml(t));const o=i(n,["excludeDomains"]);return o!=null&&s(e,["excludeDomains"],o),e}function Al(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function Ml(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function Il(n,e){const t={},o=i(n,["generationConfig"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig"],o);const r=i(n,["responseModalities"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","responseModalities"],r);const l=i(n,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const a=i(n,["topP"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","topP"],a);const u=i(n,["topK"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","topK"],u);const d=i(n,["maxOutputTokens"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","maxOutputTokens"],d);const c=i(n,["mediaResolution"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","mediaResolution"],c);const p=i(n,["seed"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","seed"],p);const m=i(n,["speechConfig"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","speechConfig"],Ca(hn(m)));const g=i(n,["enableAffectiveDialog"]);e!==void 0&&g!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],g);const h=i(n,["systemInstruction"]);e!==void 0&&h!=null&&s(e,["setup","systemInstruction"],sl(ne(h)));const y=i(n,["tools"]);if(e!==void 0&&y!=null){let D=Me(y);Array.isArray(D)&&(D=D.map(F=>Sa(Ae(F)))),s(e,["setup","tools"],D)}const C=i(n,["sessionResumption"]);e!==void 0&&C!=null&&s(e,["setup","sessionResumption"],pa(C));const A=i(n,["inputAudioTranscription"]);e!==void 0&&A!=null&&s(e,["setup","inputAudioTranscription"],Mt());const _=i(n,["outputAudioTranscription"]);e!==void 0&&_!=null&&s(e,["setup","outputAudioTranscription"],Mt());const E=i(n,["realtimeInputConfig"]);e!==void 0&&E!=null&&s(e,["setup","realtimeInputConfig"],da(E));const S=i(n,["contextWindowCompression"]);e!==void 0&&S!=null&&s(e,["setup","contextWindowCompression"],ll(S));const P=i(n,["proactivity"]);return e!==void 0&&P!=null&&s(e,["setup","proactivity"],ua(P)),t}function Nl(n,e){const t={},o=i(n,["generationConfig"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig"],o);const r=i(n,["responseModalities"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","responseModalities"],r);const l=i(n,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const a=i(n,["topP"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","topP"],a);const u=i(n,["topK"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","topK"],u);const d=i(n,["maxOutputTokens"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","maxOutputTokens"],d);const c=i(n,["mediaResolution"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","mediaResolution"],c);const p=i(n,["seed"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","seed"],p);const m=i(n,["speechConfig"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","speechConfig"],Ta(hn(m)));const g=i(n,["enableAffectiveDialog"]);e!==void 0&&g!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],g);const h=i(n,["systemInstruction"]);e!==void 0&&h!=null&&s(e,["setup","systemInstruction"],rl(ne(h)));const y=i(n,["tools"]);if(e!==void 0&&y!=null){let D=Me(y);Array.isArray(D)&&(D=D.map(F=>_a(Ae(F)))),s(e,["setup","tools"],D)}const C=i(n,["sessionResumption"]);e!==void 0&&C!=null&&s(e,["setup","sessionResumption"],ma(C));const A=i(n,["inputAudioTranscription"]);e!==void 0&&A!=null&&s(e,["setup","inputAudioTranscription"],It());const _=i(n,["outputAudioTranscription"]);e!==void 0&&_!=null&&s(e,["setup","outputAudioTranscription"],It());const E=i(n,["realtimeInputConfig"]);e!==void 0&&E!=null&&s(e,["setup","realtimeInputConfig"],fa(E));const S=i(n,["contextWindowCompression"]);e!==void 0&&S!=null&&s(e,["setup","contextWindowCompression"],al(S));const P=i(n,["proactivity"]);return e!==void 0&&P!=null&&s(e,["setup","proactivity"],ca(P)),t}function wl(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["setup","model"],K(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],Il(r,t)),t}function Rl(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["setup","model"],K(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],Nl(r,t)),t}function Pl(n){const e={},t=i(n,["weightedPrompts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Fa(r))),s(e,["weightedPrompts"],o)}return e}function lo(n){const e={},t=i(n,["weightedPrompts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>fo(r))),s(e,["weightedPrompts"],o)}return e}function sn(n){const e={},t=i(n,["setup"]);t!=null&&s(e,["setup"],ao(t));const o=i(n,["clientContent"]);o!=null&&s(e,["clientContent"],lo(o));const r=i(n,["musicGenerationConfig"]);r!=null&&s(e,["musicGenerationConfig"],uo(r));const l=i(n,["playbackControl"]);return l!=null&&s(e,["playbackControl"],l),e}function ao(n){const e={},t=i(n,["model"]);return t!=null&&s(e,["model"],t),e}function kl(n){const e={},t=i(n,["text"]);t!=null&&s(e,["text"],t);const o=i(n,["filteredReason"]);return o!=null&&s(e,["filteredReason"],o),e}function Dl(n){const e={},t=i(n,["temperature"]);t!=null&&s(e,["temperature"],t);const o=i(n,["topK"]);o!=null&&s(e,["topK"],o);const r=i(n,["seed"]);r!=null&&s(e,["seed"],r);const l=i(n,["guidance"]);l!=null&&s(e,["guidance"],l);const a=i(n,["bpm"]);a!=null&&s(e,["bpm"],a);const u=i(n,["density"]);u!=null&&s(e,["density"],u);const d=i(n,["brightness"]);d!=null&&s(e,["brightness"],d);const c=i(n,["scale"]);c!=null&&s(e,["scale"],c);const p=i(n,["muteBass"]);p!=null&&s(e,["muteBass"],p);const m=i(n,["muteDrums"]);m!=null&&s(e,["muteDrums"],m);const g=i(n,["onlyBassAndDrums"]);g!=null&&s(e,["onlyBassAndDrums"],g);const h=i(n,["musicGenerationMode"]);return h!=null&&s(e,["musicGenerationMode"],h),e}function uo(n){const e={},t=i(n,["temperature"]);t!=null&&s(e,["temperature"],t);const o=i(n,["topK"]);o!=null&&s(e,["topK"],o);const r=i(n,["seed"]);r!=null&&s(e,["seed"],r);const l=i(n,["guidance"]);l!=null&&s(e,["guidance"],l);const a=i(n,["bpm"]);a!=null&&s(e,["bpm"],a);const u=i(n,["density"]);u!=null&&s(e,["density"],u);const d=i(n,["brightness"]);d!=null&&s(e,["brightness"],d);const c=i(n,["scale"]);c!=null&&s(e,["scale"],c);const p=i(n,["muteBass"]);p!=null&&s(e,["muteBass"],p);const m=i(n,["muteDrums"]);m!=null&&s(e,["muteDrums"],m);const g=i(n,["onlyBassAndDrums"]);g!=null&&s(e,["onlyBassAndDrums"],g);const h=i(n,["musicGenerationMode"]);return h!=null&&s(e,["musicGenerationMode"],h),e}function bl(n){const e={},t=i(n,["audioChunks"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Xr(r))),s(e,["audioChunks"],o)}return e}function Fl(n){const e={};i(n,["setupComplete"])!=null&&s(e,["setupComplete"],Ul());const o=i(n,["serverContent"]);o!=null&&s(e,["serverContent"],bl(o));const r=i(n,["filteredPrompt"]);return r!=null&&s(e,["filteredPrompt"],kl(r)),e}function Ul(){return{}}function Ll(n){const e={},t=i(n,["musicGenerationConfig"]);return t!=null&&s(e,["musicGenerationConfig"],uo(t)),e}function Vl(n){const e={},t=i(n,["weightedPrompts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>fo(r))),s(e,["weightedPrompts"],o)}return e}function ql(n){const e={},t=i(n,["clientContent"]);t!=null&&s(e,["clientContent"],Pl(t));const o=i(n,["musicGenerationConfig"]);return o!=null&&s(e,["musicGenerationConfig"],Dl(o)),e}function Gl(n){const e={},t=i(n,["media"]);if(t!=null){let c=Jt(t);Array.isArray(c)&&(c=c.map(p=>p)),s(e,["mediaChunks"],c)}const o=i(n,["audio"]);o!=null&&s(e,["audio"],Yt(o));const r=i(n,["audioStreamEnd"]);r!=null&&s(e,["audioStreamEnd"],r);const l=i(n,["video"]);l!=null&&s(e,["video"],Wt(l));const a=i(n,["text"]);return a!=null&&s(e,["text"],a),i(n,["activityStart"])!=null&&s(e,["activityStart"],Yr()),i(n,["activityEnd"])!=null&&s(e,["activityEnd"],Jr()),e}function Bl(n){const e={},t=i(n,["media"]);if(t!=null){let c=Jt(t);Array.isArray(c)&&(c=c.map(p=>p)),s(e,["mediaChunks"],c)}const o=i(n,["audio"]);o!=null&&s(e,["audio"],Yt(o));const r=i(n,["audioStreamEnd"]);r!=null&&s(e,["audioStreamEnd"],r);const l=i(n,["video"]);l!=null&&s(e,["video"],Wt(l));const a=i(n,["text"]);return a!=null&&s(e,["text"],a),i(n,["activityStart"])!=null&&s(e,["activityStart"],Kr()),i(n,["activityEnd"])!=null&&s(e,["activityEnd"],Wr()),e}function Hl(n){const e={},t=i(n,["modelTurn"]);t!=null&&s(e,["modelTurn"],ol(t));const o=i(n,["turnComplete"]);o!=null&&s(e,["turnComplete"],o);const r=i(n,["interrupted"]);r!=null&&s(e,["interrupted"],r);const l=i(n,["groundingMetadata"]);l!=null&&s(e,["groundingMetadata"],l);const a=i(n,["generationComplete"]);a!=null&&s(e,["generationComplete"],a);const u=i(n,["inputTranscription"]);u!=null&&s(e,["inputTranscription"],Nt(u));const d=i(n,["outputTranscription"]);d!=null&&s(e,["outputTranscription"],Nt(d));const c=i(n,["urlContextMetadata"]);c!=null&&s(e,["urlContextMetadata"],Ea(c));const p=i(n,["turnCompleteReason"]);p!=null&&s(e,["turnCompleteReason"],p);const m=i(n,["waitingForInput"]);return m!=null&&s(e,["waitingForInput"],m),e}function $l(n){const e={},t=i(n,["modelTurn"]);t!=null&&s(e,["modelTurn"],il(t));const o=i(n,["turnComplete"]);o!=null&&s(e,["turnComplete"],o);const r=i(n,["interrupted"]);r!=null&&s(e,["interrupted"],r);const l=i(n,["groundingMetadata"]);l!=null&&s(e,["groundingMetadata"],l);const a=i(n,["generationComplete"]);a!=null&&s(e,["generationComplete"],a);const u=i(n,["inputTranscription"]);u!=null&&s(e,["inputTranscription"],wt(u));const d=i(n,["outputTranscription"]);d!=null&&s(e,["outputTranscription"],wt(d));const c=i(n,["turnCompleteReason"]);c!=null&&s(e,["turnCompleteReason"],c);const p=i(n,["waitingForInput"]);return p!=null&&s(e,["waitingForInput"],p),e}function Jl(n){const e={},t=i(n,["timeLeft"]);return t!=null&&s(e,["timeLeft"],t),e}function Wl(n){const e={},t=i(n,["timeLeft"]);return t!=null&&s(e,["timeLeft"],t),e}function Yl(n){const e={};i(n,["setupComplete"])!=null&&s(e,["setupComplete"],Ql());const o=i(n,["serverContent"]);o!=null&&s(e,["serverContent"],Hl(o));const r=i(n,["toolCall"]);r!=null&&s(e,["toolCall"],ea(r));const l=i(n,["toolCallCancellation"]);l!=null&&s(e,["toolCallCancellation"],Ol(l));const a=i(n,["usageMetadata"]);a!=null&&s(e,["usageMetadata"],Na(a));const u=i(n,["goAway"]);u!=null&&s(e,["goAway"],Jl(u));const d=i(n,["sessionResumptionUpdate"]);return d!=null&&s(e,["sessionResumptionUpdate"],zl(d)),e}function Kl(n){const e={},t=i(n,["setupComplete"]);t!=null&&s(e,["setupComplete"],Zl(t));const o=i(n,["serverContent"]);o!=null&&s(e,["serverContent"],$l(o));const r=i(n,["toolCall"]);r!=null&&s(e,["toolCall"],na(r));const l=i(n,["toolCallCancellation"]);l!=null&&s(e,["toolCallCancellation"],jl(l));const a=i(n,["usageMetadata"]);a!=null&&s(e,["usageMetadata"],wa(a));const u=i(n,["goAway"]);u!=null&&s(e,["goAway"],Wl(u));const d=i(n,["sessionResumptionUpdate"]);return d!=null&&s(e,["sessionResumptionUpdate"],Xl(d)),e}function zl(n){const e={},t=i(n,["newHandle"]);t!=null&&s(e,["newHandle"],t);const o=i(n,["resumable"]);o!=null&&s(e,["resumable"],o);const r=i(n,["lastConsumedClientMessageIndex"]);return r!=null&&s(e,["lastConsumedClientMessageIndex"],r),e}function Xl(n){const e={},t=i(n,["newHandle"]);t!=null&&s(e,["newHandle"],t);const o=i(n,["resumable"]);o!=null&&s(e,["resumable"],o);const r=i(n,["lastConsumedClientMessageIndex"]);return r!=null&&s(e,["lastConsumedClientMessageIndex"],r),e}function Ql(){return{}}function Zl(n){const e={},t=i(n,["sessionId"]);return t!=null&&s(e,["sessionId"],t),e}function Ol(n){const e={},t=i(n,["ids"]);return t!=null&&s(e,["ids"],t),e}function jl(n){const e={},t=i(n,["ids"]);return t!=null&&s(e,["ids"],t),e}function ea(n){const e={},t=i(n,["functionCalls"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>so(r))),s(e,["functionCalls"],o)}return e}function na(n){const e={},t=i(n,["functionCalls"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>ro(r))),s(e,["functionCalls"],o)}return e}function Fe(n){const e={},t=i(n,["modality"]);t!=null&&s(e,["modality"],t);const o=i(n,["tokenCount"]);return o!=null&&s(e,["tokenCount"],o),e}function Ue(n){const e={},t=i(n,["modality"]);t!=null&&s(e,["modality"],t);const o=i(n,["tokenCount"]);return o!=null&&s(e,["tokenCount"],o),e}function ta(n){const e={},t=i(n,["speakerVoiceConfigs"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>ya(r))),s(e,["speakerVoiceConfigs"],o)}return e}function oa(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Ra(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],jr(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],fl(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],so(u));const d=i(n,["codeExecutionResult"]);d!=null&&s(e,["codeExecutionResult"],d);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const p=i(n,["functionResponse"]);p!=null&&s(e,["functionResponse"],p);const m=i(n,["text"]);return m!=null&&s(e,["text"],m),e}function ia(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Pa(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],el(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],pl(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],ro(u));const d=i(n,["codeExecutionResult"]);d!=null&&s(e,["codeExecutionResult"],d);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const p=i(n,["functionResponse"]);p!=null&&s(e,["functionResponse"],p);const m=i(n,["text"]);return m!=null&&s(e,["text"],m),e}function sa(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],ka(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],nl(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],ml(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],hl(u));const d=i(n,["codeExecutionResult"]);d!=null&&s(e,["codeExecutionResult"],d);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const p=i(n,["functionResponse"]);p!=null&&s(e,["functionResponse"],p);const m=i(n,["text"]);return m!=null&&s(e,["text"],m),e}function ra(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Da(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],tl(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],gl(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],yl(u));const d=i(n,["codeExecutionResult"]);d!=null&&s(e,["codeExecutionResult"],d);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const p=i(n,["functionResponse"]);p!=null&&s(e,["functionResponse"],p);const m=i(n,["text"]);return m!=null&&s(e,["text"],m),e}function la(n){const e={},t=i(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function aa(n){const e={},t=i(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function ua(n){const e={},t=i(n,["proactiveAudio"]);return t!=null&&s(e,["proactiveAudio"],t),e}function ca(n){const e={},t=i(n,["proactiveAudio"]);return t!=null&&s(e,["proactiveAudio"],t),e}function da(n){const e={},t=i(n,["automaticActivityDetection"]);t!=null&&s(e,["automaticActivityDetection"],Zr(t));const o=i(n,["activityHandling"]);o!=null&&s(e,["activityHandling"],o);const r=i(n,["turnCoverage"]);return r!=null&&s(e,["turnCoverage"],r),e}function fa(n){const e={},t=i(n,["automaticActivityDetection"]);t!=null&&s(e,["automaticActivityDetection"],Or(t));const o=i(n,["activityHandling"]);o!=null&&s(e,["activityHandling"],o);const r=i(n,["turnCoverage"]);return r!=null&&s(e,["turnCoverage"],r),e}function pa(n){const e={},t=i(n,["handle"]);if(t!=null&&s(e,["handle"],t),i(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function ma(n){const e={},t=i(n,["handle"]);t!=null&&s(e,["handle"],t);const o=i(n,["transparent"]);return o!=null&&s(e,["transparent"],o),e}function ga(n){const e={},t=i(n,["targetTokens"]);return t!=null&&s(e,["targetTokens"],t),e}function ha(n){const e={},t=i(n,["targetTokens"]);return t!=null&&s(e,["targetTokens"],t),e}function ya(n){const e={},t=i(n,["speaker"]);t!=null&&s(e,["speaker"],t);const o=i(n,["voiceConfig"]);return o!=null&&s(e,["voiceConfig"],co(o)),e}function Ca(n){const e={},t=i(n,["voiceConfig"]);t!=null&&s(e,["voiceConfig"],co(t));const o=i(n,["multiSpeakerVoiceConfig"]);o!=null&&s(e,["multiSpeakerVoiceConfig"],ta(o));const r=i(n,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function Ta(n){const e={},t=i(n,["voiceConfig"]);if(t!=null&&s(e,["voiceConfig"],ba(t)),i(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=i(n,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function xa(n){const e={},t=i(n,["environment"]);t!=null&&s(e,["environment"],t);const o=i(n,["excludedPredefinedFunctions"]);return o!=null&&s(e,["excludedPredefinedFunctions"],o),e}function va(n){const e={},t=i(n,["environment"]);t!=null&&s(e,["environment"],t);const o=i(n,["excludedPredefinedFunctions"]);return o!=null&&s(e,["excludedPredefinedFunctions"],o),e}function Sa(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let d=t;Array.isArray(d)&&(d=d.map(c=>Cl(c))),s(e,["functionDeclarations"],d)}if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(n,["googleSearch"]);o!=null&&s(e,["googleSearch"],_l(o));const r=i(n,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],vl(r)),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(n,["urlContext"])!=null&&s(e,["urlContext"],Aa());const a=i(n,["computerUse"]);a!=null&&s(e,["computerUse"],xa(a));const u=i(n,["codeExecution"]);return u!=null&&s(e,["codeExecution"],u),e}function _a(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let m=t;Array.isArray(m)&&(m=m.map(g=>Tl(g))),s(e,["functionDeclarations"],m)}const o=i(n,["retrieval"]);o!=null&&s(e,["retrieval"],o);const r=i(n,["googleSearch"]);r!=null&&s(e,["googleSearch"],El(r));const l=i(n,["googleSearchRetrieval"]);l!=null&&s(e,["googleSearchRetrieval"],Sl(l));const a=i(n,["enterpriseWebSearch"]);a!=null&&s(e,["enterpriseWebSearch"],dl(a));const u=i(n,["googleMaps"]);u!=null&&s(e,["googleMaps"],xl(u)),i(n,["urlContext"])!=null&&s(e,["urlContext"],Ma());const c=i(n,["computerUse"]);c!=null&&s(e,["computerUse"],va(c));const p=i(n,["codeExecution"]);return p!=null&&s(e,["codeExecution"],p),e}function Nt(n){const e={},t=i(n,["text"]);t!=null&&s(e,["text"],t);const o=i(n,["finished"]);return o!=null&&s(e,["finished"],o),e}function wt(n){const e={},t=i(n,["text"]);t!=null&&s(e,["text"],t);const o=i(n,["finished"]);return o!=null&&s(e,["finished"],o),e}function Ea(n){const e={},t=i(n,["urlMetadata"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Ia(r))),s(e,["urlMetadata"],o)}return e}function Aa(){return{}}function Ma(){return{}}function Ia(n){const e={},t=i(n,["retrievedUrl"]);t!=null&&s(e,["retrievedUrl"],t);const o=i(n,["urlRetrievalStatus"]);return o!=null&&s(e,["urlRetrievalStatus"],o),e}function Na(n){const e={},t=i(n,["promptTokenCount"]);t!=null&&s(e,["promptTokenCount"],t);const o=i(n,["cachedContentTokenCount"]);o!=null&&s(e,["cachedContentTokenCount"],o);const r=i(n,["responseTokenCount"]);r!=null&&s(e,["responseTokenCount"],r);const l=i(n,["toolUsePromptTokenCount"]);l!=null&&s(e,["toolUsePromptTokenCount"],l);const a=i(n,["thoughtsTokenCount"]);a!=null&&s(e,["thoughtsTokenCount"],a);const u=i(n,["totalTokenCount"]);u!=null&&s(e,["totalTokenCount"],u);const d=i(n,["promptTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(h=>Fe(h))),s(e,["promptTokensDetails"],g)}const c=i(n,["cacheTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(h=>Fe(h))),s(e,["cacheTokensDetails"],g)}const p=i(n,["responseTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(h=>Fe(h))),s(e,["responseTokensDetails"],g)}const m=i(n,["toolUsePromptTokensDetails"]);if(m!=null){let g=m;Array.isArray(g)&&(g=g.map(h=>Fe(h))),s(e,["toolUsePromptTokensDetails"],g)}return e}function wa(n){const e={},t=i(n,["promptTokenCount"]);t!=null&&s(e,["promptTokenCount"],t);const o=i(n,["cachedContentTokenCount"]);o!=null&&s(e,["cachedContentTokenCount"],o);const r=i(n,["candidatesTokenCount"]);r!=null&&s(e,["responseTokenCount"],r);const l=i(n,["toolUsePromptTokenCount"]);l!=null&&s(e,["toolUsePromptTokenCount"],l);const a=i(n,["thoughtsTokenCount"]);a!=null&&s(e,["thoughtsTokenCount"],a);const u=i(n,["totalTokenCount"]);u!=null&&s(e,["totalTokenCount"],u);const d=i(n,["promptTokensDetails"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(y=>Ue(y))),s(e,["promptTokensDetails"],h)}const c=i(n,["cacheTokensDetails"]);if(c!=null){let h=c;Array.isArray(h)&&(h=h.map(y=>Ue(y))),s(e,["cacheTokensDetails"],h)}const p=i(n,["candidatesTokensDetails"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(y=>Ue(y))),s(e,["responseTokensDetails"],h)}const m=i(n,["toolUsePromptTokensDetails"]);if(m!=null){let h=m;Array.isArray(h)&&(h=h.map(y=>Ue(y))),s(e,["toolUsePromptTokensDetails"],h)}const g=i(n,["trafficType"]);return g!=null&&s(e,["trafficType"],g),e}function Ra(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Pa(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function ka(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Da(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function co(n){const e={},t=i(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],la(t)),e}function ba(n){const e={},t=i(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],aa(t)),e}function Fa(n){const e={},t=i(n,["text"]);t!=null&&s(e,["text"],t);const o=i(n,["weight"]);return o!=null&&s(e,["weight"],o),e}function fo(n){const e={},t=i(n,["text"]);t!=null&&s(e,["text"],t);const o=i(n,["weight"]);return o!=null&&s(e,["weight"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ua(n){const e={},t=i(n,["apiKeyString"]);return t!=null&&s(e,["apiKeyString"],t),e}function La(n){const e={},t=i(n,["apiKeyConfig"]);t!=null&&s(e,["apiKeyConfig"],Ua(t));const o=i(n,["authType"]);o!=null&&s(e,["authType"],o);const r=i(n,["googleServiceAccountConfig"]);r!=null&&s(e,["googleServiceAccountConfig"],r);const l=i(n,["httpBasicAuthConfig"]);l!=null&&s(e,["httpBasicAuthConfig"],l);const a=i(n,["oauthConfig"]);a!=null&&s(e,["oauthConfig"],a);const u=i(n,["oidcConfig"]);return u!=null&&s(e,["oidcConfig"],u),e}function Va(n){const e={},t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function qa(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["data"]);o!=null&&s(e,["data"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Ga(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Ba(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["data"]);o!=null&&s(e,["data"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Ha(n){const e={},t=i(n,["content"]);t!=null&&s(e,["content"],Oa(t));const o=i(n,["citationMetadata"]);o!=null&&s(e,["citationMetadata"],Wa(o));const r=i(n,["tokenCount"]);r!=null&&s(e,["tokenCount"],r);const l=i(n,["finishReason"]);l!=null&&s(e,["finishReason"],l);const a=i(n,["urlContextMetadata"]);a!=null&&s(e,["urlContextMetadata"],Cd(a));const u=i(n,["avgLogprobs"]);u!=null&&s(e,["avgLogprobs"],u);const d=i(n,["groundingMetadata"]);d!=null&&s(e,["groundingMetadata"],d);const c=i(n,["index"]);c!=null&&s(e,["index"],c);const p=i(n,["logprobsResult"]);p!=null&&s(e,["logprobsResult"],p);const m=i(n,["safetyRatings"]);return m!=null&&s(e,["safetyRatings"],m),e}function $a(n){const e={},t=i(n,["content"]);t!=null&&s(e,["content"],ja(t));const o=i(n,["citationMetadata"]);o!=null&&s(e,["citationMetadata"],Ya(o));const r=i(n,["finishMessage"]);r!=null&&s(e,["finishMessage"],r);const l=i(n,["finishReason"]);l!=null&&s(e,["finishReason"],l);const a=i(n,["urlContextMetadata"]);a!=null&&s(e,["urlContextMetadata"],Td(a));const u=i(n,["avgLogprobs"]);u!=null&&s(e,["avgLogprobs"],u);const d=i(n,["groundingMetadata"]);d!=null&&s(e,["groundingMetadata"],d);const c=i(n,["index"]);c!=null&&s(e,["index"],c);const p=i(n,["logprobsResult"]);p!=null&&s(e,["logprobsResult"],p);const m=i(n,["safetyRatings"]);return m!=null&&s(e,["safetyRatings"],m),e}function Ja(n){const e={},t=i(n,["checkpointId"]);t!=null&&s(e,["checkpointId"],t);const o=i(n,["epoch"]);o!=null&&s(e,["epoch"],o);const r=i(n,["step"]);return r!=null&&s(e,["step"],r),e}function Wa(n){const e={},t=i(n,["citationSources"]);return t!=null&&s(e,["citations"],t),e}function Ya(n){const e={},t=i(n,["citations"]);return t!=null&&s(e,["citations"],t),e}function Ka(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],K(n,o));const r=i(e,["contents"]);if(r!=null){let l=re(r);Array.isArray(l)&&(l=l.map(a=>Ne(a))),s(t,["contents"],l)}return t}function za(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["tokensInfo"]);return o!=null&&s(e,["tokensInfo"],o),e}function Xa(n){const e={},t=i(n,["values"]);return t!=null&&s(e,["values"],t),e}function Qa(n){const e={},t=i(n,["values"]);t!=null&&s(e,["values"],t);const o=i(n,["statistics"]);return o!=null&&s(e,["statistics"],Za(o)),e}function Za(n){const e={},t=i(n,["truncated"]);t!=null&&s(e,["truncated"],t);const o=i(n,["token_count"]);return o!=null&&s(e,["tokenCount"],o),e}function Oa(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Nc(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function ja(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>wc(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function Ye(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Rc(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function Ne(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Pc(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function eu(n){const e={},t=i(n,["controlType"]);t!=null&&s(e,["controlType"],t);const o=i(n,["enableControlImageComputation"]);return o!=null&&s(e,["computeControl"],o),e}function nu(n){const e={};if(i(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(i(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(i(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function tu(n,e){const t={},o=i(n,["systemInstruction"]);e!==void 0&&o!=null&&s(e,["systemInstruction"],Ne(ne(o)));const r=i(n,["tools"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>yo(u))),s(e,["tools"],a)}const l=i(n,["generationConfig"]);return e!==void 0&&l!=null&&s(e,["generationConfig"],l),t}function ou(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],K(n,o));const r=i(e,["contents"]);if(r!=null){let a=re(r);Array.isArray(a)&&(a=a.map(u=>Ye(u))),s(t,["contents"],a)}const l=i(e,["config"]);return l!=null&&nu(l),t}function iu(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],K(n,o));const r=i(e,["contents"]);if(r!=null){let a=re(r);Array.isArray(a)&&(a=a.map(u=>Ne(u))),s(t,["contents"],a)}const l=i(e,["config"]);return l!=null&&tu(l,t),t}function su(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["totalTokens"]);o!=null&&s(e,["totalTokens"],o);const r=i(n,["cachedContentTokenCount"]);return r!=null&&s(e,["cachedContentTokenCount"],r),e}function ru(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["totalTokens"]);return o!=null&&s(e,["totalTokens"],o),e}function lu(n,e){const t={},o=i(e,["model"]);return o!=null&&s(t,["_url","name"],K(n,o)),t}function au(n,e){const t={},o=i(e,["model"]);return o!=null&&s(t,["_url","name"],K(n,o)),t}function uu(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}function cu(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}function du(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function fu(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function pu(n,e){const t={},o=i(n,["outputGcsUri"]);e!==void 0&&o!=null&&s(e,["parameters","storageUri"],o);const r=i(n,["negativePrompt"]);e!==void 0&&r!=null&&s(e,["parameters","negativePrompt"],r);const l=i(n,["numberOfImages"]);e!==void 0&&l!=null&&s(e,["parameters","sampleCount"],l);const a=i(n,["aspectRatio"]);e!==void 0&&a!=null&&s(e,["parameters","aspectRatio"],a);const u=i(n,["guidanceScale"]);e!==void 0&&u!=null&&s(e,["parameters","guidanceScale"],u);const d=i(n,["seed"]);e!==void 0&&d!=null&&s(e,["parameters","seed"],d);const c=i(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&s(e,["parameters","safetySetting"],c);const p=i(n,["personGeneration"]);e!==void 0&&p!=null&&s(e,["parameters","personGeneration"],p);const m=i(n,["includeSafetyAttributes"]);e!==void 0&&m!=null&&s(e,["parameters","includeSafetyAttributes"],m);const g=i(n,["includeRaiReason"]);e!==void 0&&g!=null&&s(e,["parameters","includeRaiReason"],g);const h=i(n,["language"]);e!==void 0&&h!=null&&s(e,["parameters","language"],h);const y=i(n,["outputMimeType"]);e!==void 0&&y!=null&&s(e,["parameters","outputOptions","mimeType"],y);const C=i(n,["outputCompressionQuality"]);e!==void 0&&C!=null&&s(e,["parameters","outputOptions","compressionQuality"],C);const A=i(n,["addWatermark"]);e!==void 0&&A!=null&&s(e,["parameters","addWatermark"],A);const _=i(n,["editMode"]);e!==void 0&&_!=null&&s(e,["parameters","editMode"],_);const E=i(n,["baseSteps"]);return e!==void 0&&E!=null&&s(e,["parameters","editConfig","baseSteps"],E),t}function mu(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],K(n,o));const r=i(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=i(e,["referenceImages"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>qc(d))),s(t,["instances[0]","referenceImages"],u)}const a=i(e,["config"]);return a!=null&&pu(a,t),t}function gu(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>Ke(l))),s(e,["generatedImages"],r)}return e}function hu(n,e){const t={},o=i(n,["taskType"]);e!==void 0&&o!=null&&s(e,["requests[]","taskType"],o);const r=i(n,["title"]);e!==void 0&&r!=null&&s(e,["requests[]","title"],r);const l=i(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&s(e,["requests[]","outputDimensionality"],l),i(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(i(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function yu(n,e){const t={},o=i(n,["taskType"]);e!==void 0&&o!=null&&s(e,["instances[]","task_type"],o);const r=i(n,["title"]);e!==void 0&&r!=null&&s(e,["instances[]","title"],r);const l=i(n,["outputDimensionality"]);e!==void 0&&l!=null&&s(e,["parameters","outputDimensionality"],l);const a=i(n,["mimeType"]);e!==void 0&&a!=null&&s(e,["instances[]","mimeType"],a);const u=i(n,["autoTruncate"]);return e!==void 0&&u!=null&&s(e,["parameters","autoTruncate"],u),t}function Cu(){return{}}function Tu(n){const e={},t=i(n,["billableCharacterCount"]);return t!=null&&s(e,["billableCharacterCount"],t),e}function xu(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],K(n,o));const r=i(e,["contents"]);r!=null&&s(t,["requests[]","content"],pn(n,r));const l=i(e,["config"]);l!=null&&hu(l,t);const a=i(e,["model"]);return a!==void 0&&s(t,["requests[]","model"],K(n,a)),t}function vu(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],K(n,o));const r=i(e,["contents"]);r!=null&&s(t,["instances[]","content"],pn(n,r));const l=i(e,["config"]);return l!=null&&yu(l,t),t}function Su(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>Xa(a))),s(e,["embeddings"],l)}return i(n,["metadata"])!=null&&s(e,["metadata"],Cu()),e}function _u(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["predictions[]","embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>Qa(a))),s(e,["embeddings"],l)}const r=i(n,["metadata"]);return r!=null&&s(e,["metadata"],Tu(r)),e}function Eu(n){const e={},t=i(n,["endpoint"]);t!=null&&s(e,["name"],t);const o=i(n,["deployedModelId"]);return o!=null&&s(e,["deployedModelId"],o),e}function Au(n){const e={},t=i(n,["excludeDomains"]);return t!=null&&s(e,["excludeDomains"],t),e}function Mu(n){const e={},t=i(n,["label"]);t!=null&&s(e,["label"],t);const o=i(n,["score"]);return o!=null&&s(e,["score"],o),e}function Iu(n){const e={},t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Nu(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["fileUri"]);o!=null&&s(e,["fileUri"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function wu(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Ru(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["fileUri"]);o!=null&&s(e,["fileUri"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Pu(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function ku(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function Du(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function bu(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function Fu(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["allowedFunctionNames"]);return o!=null&&s(e,["allowedFunctionNames"],o),e}function Uu(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["allowedFunctionNames"]);return o!=null&&s(e,["allowedFunctionNames"],o),e}function Lu(n){const e={},t=i(n,["behavior"]);t!=null&&s(e,["behavior"],t);const o=i(n,["description"]);o!=null&&s(e,["description"],o);const r=i(n,["name"]);r!=null&&s(e,["name"],r);const l=i(n,["parameters"]);l!=null&&s(e,["parameters"],l);const a=i(n,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const u=i(n,["response"]);u!=null&&s(e,["response"],u);const d=i(n,["responseJsonSchema"]);return d!=null&&s(e,["responseJsonSchema"],d),e}function Vu(n){const e={};if(i(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=i(n,["description"]);t!=null&&s(e,["description"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["parameters"]);r!=null&&s(e,["parameters"],r);const l=i(n,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);const a=i(n,["response"]);a!=null&&s(e,["response"],a);const u=i(n,["responseJsonSchema"]);return u!=null&&s(e,["responseJsonSchema"],u),e}function qu(n,e,t){const o={},r=i(e,["systemInstruction"]);t!==void 0&&r!=null&&s(t,["systemInstruction"],Ye(ne(r)));const l=i(e,["temperature"]);l!=null&&s(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&s(o,["topP"],a);const u=i(e,["topK"]);u!=null&&s(o,["topK"],u);const d=i(e,["candidateCount"]);d!=null&&s(o,["candidateCount"],d);const c=i(e,["maxOutputTokens"]);c!=null&&s(o,["maxOutputTokens"],c);const p=i(e,["stopSequences"]);p!=null&&s(o,["stopSequences"],p);const m=i(e,["responseLogprobs"]);m!=null&&s(o,["responseLogprobs"],m);const g=i(e,["logprobs"]);g!=null&&s(o,["logprobs"],g);const h=i(e,["presencePenalty"]);h!=null&&s(o,["presencePenalty"],h);const y=i(e,["frequencyPenalty"]);y!=null&&s(o,["frequencyPenalty"],y);const C=i(e,["seed"]);C!=null&&s(o,["seed"],C);const A=i(e,["responseMimeType"]);A!=null&&s(o,["responseMimeType"],A);const _=i(e,["responseSchema"]);_!=null&&s(o,["responseSchema"],Jc(mn(_)));const E=i(e,["responseJsonSchema"]);if(E!=null&&s(o,["responseJsonSchema"],E),i(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=i(e,["safetySettings"]);if(t!==void 0&&S!=null){let N=S;Array.isArray(N)&&(N=N.map(G=>Hc(G))),s(t,["safetySettings"],N)}const P=i(e,["tools"]);if(t!==void 0&&P!=null){let N=Me(P);Array.isArray(N)&&(N=N.map(G=>ad(Ae(G)))),s(t,["tools"],N)}const D=i(e,["toolConfig"]);if(t!==void 0&&D!=null&&s(t,["toolConfig"],rd(D)),i(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const F=i(e,["cachedContent"]);t!==void 0&&F!=null&&s(t,["cachedContent"],de(n,F));const b=i(e,["responseModalities"]);b!=null&&s(o,["responseModalities"],b);const w=i(e,["mediaResolution"]);w!=null&&s(o,["mediaResolution"],w);const T=i(e,["speechConfig"]);if(T!=null&&s(o,["speechConfig"],Oc(gn(T))),i(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=i(e,["thinkingConfig"]);return M!=null&&s(o,["thinkingConfig"],td(M)),o}function Gu(n,e,t){const o={},r=i(e,["systemInstruction"]);t!==void 0&&r!=null&&s(t,["systemInstruction"],Ne(ne(r)));const l=i(e,["temperature"]);l!=null&&s(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&s(o,["topP"],a);const u=i(e,["topK"]);u!=null&&s(o,["topK"],u);const d=i(e,["candidateCount"]);d!=null&&s(o,["candidateCount"],d);const c=i(e,["maxOutputTokens"]);c!=null&&s(o,["maxOutputTokens"],c);const p=i(e,["stopSequences"]);p!=null&&s(o,["stopSequences"],p);const m=i(e,["responseLogprobs"]);m!=null&&s(o,["responseLogprobs"],m);const g=i(e,["logprobs"]);g!=null&&s(o,["logprobs"],g);const h=i(e,["presencePenalty"]);h!=null&&s(o,["presencePenalty"],h);const y=i(e,["frequencyPenalty"]);y!=null&&s(o,["frequencyPenalty"],y);const C=i(e,["seed"]);C!=null&&s(o,["seed"],C);const A=i(e,["responseMimeType"]);A!=null&&s(o,["responseMimeType"],A);const _=i(e,["responseSchema"]);_!=null&&s(o,["responseSchema"],Wc(mn(_)));const E=i(e,["responseJsonSchema"]);E!=null&&s(o,["responseJsonSchema"],E);const S=i(e,["routingConfig"]);S!=null&&s(o,["routingConfig"],S);const P=i(e,["modelSelectionConfig"]);P!=null&&s(o,["modelConfig"],Mc(P));const D=i(e,["safetySettings"]);if(t!==void 0&&D!=null){let z=D;Array.isArray(z)&&(z=z.map(ee=>$c(ee))),s(t,["safetySettings"],z)}const F=i(e,["tools"]);if(t!==void 0&&F!=null){let z=Me(F);Array.isArray(z)&&(z=z.map(ee=>yo(Ae(ee)))),s(t,["tools"],z)}const b=i(e,["toolConfig"]);t!==void 0&&b!=null&&s(t,["toolConfig"],ld(b));const w=i(e,["labels"]);t!==void 0&&w!=null&&s(t,["labels"],w);const T=i(e,["cachedContent"]);t!==void 0&&T!=null&&s(t,["cachedContent"],de(n,T));const M=i(e,["responseModalities"]);M!=null&&s(o,["responseModalities"],M);const N=i(e,["mediaResolution"]);N!=null&&s(o,["mediaResolution"],N);const G=i(e,["speechConfig"]);G!=null&&s(o,["speechConfig"],jc(gn(G)));const k=i(e,["audioTimestamp"]);k!=null&&s(o,["audioTimestamp"],k);const Y=i(e,["thinkingConfig"]);return Y!=null&&s(o,["thinkingConfig"],od(Y)),o}function Rt(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],K(n,o));const r=i(e,["contents"]);if(r!=null){let a=re(r);Array.isArray(a)&&(a=a.map(u=>Ye(u))),s(t,["contents"],a)}const l=i(e,["config"]);return l!=null&&s(t,["generationConfig"],qu(n,l,t)),t}function Pt(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],K(n,o));const r=i(e,["contents"]);if(r!=null){let a=re(r);Array.isArray(a)&&(a=a.map(u=>Ne(u))),s(t,["contents"],a)}const l=i(e,["config"]);return l!=null&&s(t,["generationConfig"],Gu(n,l,t)),t}function kt(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(c=>Ha(c))),s(e,["candidates"],d)}const r=i(n,["modelVersion"]);r!=null&&s(e,["modelVersion"],r);const l=i(n,["promptFeedback"]);l!=null&&s(e,["promptFeedback"],l);const a=i(n,["responseId"]);a!=null&&s(e,["responseId"],a);const u=i(n,["usageMetadata"]);return u!=null&&s(e,["usageMetadata"],u),e}function Dt(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(p=>$a(p))),s(e,["candidates"],c)}const r=i(n,["createTime"]);r!=null&&s(e,["createTime"],r);const l=i(n,["modelVersion"]);l!=null&&s(e,["modelVersion"],l);const a=i(n,["promptFeedback"]);a!=null&&s(e,["promptFeedback"],a);const u=i(n,["responseId"]);u!=null&&s(e,["responseId"],u);const d=i(n,["usageMetadata"]);return d!=null&&s(e,["usageMetadata"],d),e}function Bu(n,e){const t={};if(i(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=i(n,["numberOfImages"]);e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o);const r=i(n,["aspectRatio"]);e!==void 0&&r!=null&&s(e,["parameters","aspectRatio"],r);const l=i(n,["guidanceScale"]);if(e!==void 0&&l!=null&&s(e,["parameters","guidanceScale"],l),i(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=i(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&s(e,["parameters","safetySetting"],a);const u=i(n,["personGeneration"]);e!==void 0&&u!=null&&s(e,["parameters","personGeneration"],u);const d=i(n,["includeSafetyAttributes"]);e!==void 0&&d!=null&&s(e,["parameters","includeSafetyAttributes"],d);const c=i(n,["includeRaiReason"]);e!==void 0&&c!=null&&s(e,["parameters","includeRaiReason"],c);const p=i(n,["language"]);e!==void 0&&p!=null&&s(e,["parameters","language"],p);const m=i(n,["outputMimeType"]);e!==void 0&&m!=null&&s(e,["parameters","outputOptions","mimeType"],m);const g=i(n,["outputCompressionQuality"]);if(e!==void 0&&g!=null&&s(e,["parameters","outputOptions","compressionQuality"],g),i(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const h=i(n,["imageSize"]);if(e!==void 0&&h!=null&&s(e,["parameters","sampleImageSize"],h),i(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function Hu(n,e){const t={},o=i(n,["outputGcsUri"]);e!==void 0&&o!=null&&s(e,["parameters","storageUri"],o);const r=i(n,["negativePrompt"]);e!==void 0&&r!=null&&s(e,["parameters","negativePrompt"],r);const l=i(n,["numberOfImages"]);e!==void 0&&l!=null&&s(e,["parameters","sampleCount"],l);const a=i(n,["aspectRatio"]);e!==void 0&&a!=null&&s(e,["parameters","aspectRatio"],a);const u=i(n,["guidanceScale"]);e!==void 0&&u!=null&&s(e,["parameters","guidanceScale"],u);const d=i(n,["seed"]);e!==void 0&&d!=null&&s(e,["parameters","seed"],d);const c=i(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&s(e,["parameters","safetySetting"],c);const p=i(n,["personGeneration"]);e!==void 0&&p!=null&&s(e,["parameters","personGeneration"],p);const m=i(n,["includeSafetyAttributes"]);e!==void 0&&m!=null&&s(e,["parameters","includeSafetyAttributes"],m);const g=i(n,["includeRaiReason"]);e!==void 0&&g!=null&&s(e,["parameters","includeRaiReason"],g);const h=i(n,["language"]);e!==void 0&&h!=null&&s(e,["parameters","language"],h);const y=i(n,["outputMimeType"]);e!==void 0&&y!=null&&s(e,["parameters","outputOptions","mimeType"],y);const C=i(n,["outputCompressionQuality"]);e!==void 0&&C!=null&&s(e,["parameters","outputOptions","compressionQuality"],C);const A=i(n,["addWatermark"]);e!==void 0&&A!=null&&s(e,["parameters","addWatermark"],A);const _=i(n,["imageSize"]);e!==void 0&&_!=null&&s(e,["parameters","sampleImageSize"],_);const E=i(n,["enhancePrompt"]);return e!==void 0&&E!=null&&s(e,["parameters","enhancePrompt"],E),t}function $u(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],K(n,o));const r=i(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=i(e,["config"]);return l!=null&&Bu(l,t),t}function Ju(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],K(n,o));const r=i(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=i(e,["config"]);return l!=null&&Hu(l,t),t}function Wu(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>oc(a))),s(e,["generatedImages"],l)}const r=i(n,["positivePromptSafetyAttributes"]);return r!=null&&s(e,["positivePromptSafetyAttributes"],go(r)),e}function Yu(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>Ke(a))),s(e,["generatedImages"],l)}const r=i(n,["positivePromptSafetyAttributes"]);return r!=null&&s(e,["positivePromptSafetyAttributes"],ho(r)),e}function Ku(n,e){const t={},o=i(n,["numberOfVideos"]);if(e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o),i(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=i(n,["durationSeconds"]);if(e!==void 0&&r!=null&&s(e,["parameters","durationSeconds"],r),i(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=i(n,["aspectRatio"]);e!==void 0&&l!=null&&s(e,["parameters","aspectRatio"],l);const a=i(n,["resolution"]);e!==void 0&&a!=null&&s(e,["parameters","resolution"],a);const u=i(n,["personGeneration"]);if(e!==void 0&&u!=null&&s(e,["parameters","personGeneration"],u),i(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=i(n,["negativePrompt"]);e!==void 0&&d!=null&&s(e,["parameters","negativePrompt"],d);const c=i(n,["enhancePrompt"]);if(e!==void 0&&c!=null&&s(e,["parameters","enhancePrompt"],c),i(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(i(n,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(i(n,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(i(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(i(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function zu(n,e){const t={},o=i(n,["numberOfVideos"]);e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o);const r=i(n,["outputGcsUri"]);e!==void 0&&r!=null&&s(e,["parameters","storageUri"],r);const l=i(n,["fps"]);e!==void 0&&l!=null&&s(e,["parameters","fps"],l);const a=i(n,["durationSeconds"]);e!==void 0&&a!=null&&s(e,["parameters","durationSeconds"],a);const u=i(n,["seed"]);e!==void 0&&u!=null&&s(e,["parameters","seed"],u);const d=i(n,["aspectRatio"]);e!==void 0&&d!=null&&s(e,["parameters","aspectRatio"],d);const c=i(n,["resolution"]);e!==void 0&&c!=null&&s(e,["parameters","resolution"],c);const p=i(n,["personGeneration"]);e!==void 0&&p!=null&&s(e,["parameters","personGeneration"],p);const m=i(n,["pubsubTopic"]);e!==void 0&&m!=null&&s(e,["parameters","pubsubTopic"],m);const g=i(n,["negativePrompt"]);e!==void 0&&g!=null&&s(e,["parameters","negativePrompt"],g);const h=i(n,["enhancePrompt"]);e!==void 0&&h!=null&&s(e,["parameters","enhancePrompt"],h);const y=i(n,["generateAudio"]);e!==void 0&&y!=null&&s(e,["parameters","generateAudio"],y);const C=i(n,["lastFrame"]);e!==void 0&&C!=null&&s(e,["instances[0]","lastFrame"],le(C));const A=i(n,["referenceImages"]);if(e!==void 0&&A!=null){let S=A;Array.isArray(S)&&(S=S.map(P=>Id(P))),s(e,["instances[0]","referenceImages"],S)}const _=i(n,["mask"]);e!==void 0&&_!=null&&s(e,["instances[0]","mask"],Md(_));const E=i(n,["compressionQuality"]);return e!==void 0&&E!=null&&s(e,["parameters","compressionQuality"],E),t}function Xu(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);l!=null&&s(e,["error"],l);const a=i(n,["response","generateVideoResponse"]);return a!=null&&s(e,["response"],ju(a)),e}function Qu(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);l!=null&&s(e,["error"],l);const a=i(n,["response"]);return a!=null&&s(e,["response"],ec(a)),e}function Zu(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],K(n,o));const r=i(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=i(e,["image"]);if(l!=null&&s(t,["instances[0]","image"],mo(l)),i(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const a=i(e,["source"]);a!=null&&nc(a,t);const u=i(e,["config"]);return u!=null&&Ku(u,t),t}function Ou(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],K(n,o));const r=i(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=i(e,["image"]);l!=null&&s(t,["instances[0]","image"],le(l));const a=i(e,["video"]);a!=null&&s(t,["instances[0]","video"],Co(a));const u=i(e,["source"]);u!=null&&tc(u,t);const d=i(e,["config"]);return d!=null&&zu(d,t),t}function ju(n){const e={},t=i(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>sc(a))),s(e,["generatedVideos"],l)}const o=i(n,["raiMediaFilteredCount"]);o!=null&&s(e,["raiMediaFilteredCount"],o);const r=i(n,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function ec(n){const e={},t=i(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>rc(a))),s(e,["generatedVideos"],l)}const o=i(n,["raiMediaFilteredCount"]);o!=null&&s(e,["raiMediaFilteredCount"],o);const r=i(n,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function nc(n,e){const t={},o=i(n,["prompt"]);e!==void 0&&o!=null&&s(e,["instances[0]","prompt"],o);const r=i(n,["image"]);if(e!==void 0&&r!=null&&s(e,["instances[0]","image"],mo(r)),i(n,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");return t}function tc(n,e){const t={},o=i(n,["prompt"]);e!==void 0&&o!=null&&s(e,["instances[0]","prompt"],o);const r=i(n,["image"]);e!==void 0&&r!=null&&s(e,["instances[0]","image"],le(r));const l=i(n,["video"]);return e!==void 0&&l!=null&&s(e,["instances[0]","video"],Co(l)),t}function oc(n){const e={},t=i(n,["_self"]);t!=null&&s(e,["image"],mc(t));const o=i(n,["raiFilteredReason"]);o!=null&&s(e,["raiFilteredReason"],o);const r=i(n,["_self"]);return r!=null&&s(e,["safetyAttributes"],go(r)),e}function Ke(n){const e={},t=i(n,["_self"]);t!=null&&s(e,["image"],po(t));const o=i(n,["raiFilteredReason"]);o!=null&&s(e,["raiFilteredReason"],o);const r=i(n,["_self"]);r!=null&&s(e,["safetyAttributes"],ho(r));const l=i(n,["prompt"]);return l!=null&&s(e,["enhancedPrompt"],l),e}function ic(n){const e={},t=i(n,["_self"]);t!=null&&s(e,["mask"],po(t));const o=i(n,["labels"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>Mu(l))),s(e,["labels"],r)}return e}function sc(n){const e={},t=i(n,["_self"]);return t!=null&&s(e,["video"],Ed(t)),e}function rc(n){const e={},t=i(n,["_self"]);return t!=null&&s(e,["video"],Ad(t)),e}function lc(n,e){const t={},o=i(e,["model"]);return o!=null&&s(t,["_url","name"],K(n,o)),t}function ac(n,e){const t={},o=i(e,["model"]);return o!=null&&s(t,["_url","name"],K(n,o)),t}function uc(n){const e={},t=i(n,["authConfig"]);return t!=null&&s(e,["authConfig"],La(t)),e}function cc(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],du(t)),e}function dc(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],fu(t)),e}function fc(n){const e={},t=i(n,["timeRangeFilter"]);if(t!=null&&s(e,["timeRangeFilter"],gc(t)),i(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function pc(n){const e={},t=i(n,["timeRangeFilter"]);t!=null&&s(e,["timeRangeFilter"],hc(t));const o=i(n,["excludeDomains"]);return o!=null&&s(e,["excludeDomains"],o),e}function mc(n){const e={},t=i(n,["bytesBase64Encoded"]);t!=null&&s(e,["imageBytes"],ge(t));const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function po(n){const e={},t=i(n,["gcsUri"]);t!=null&&s(e,["gcsUri"],t);const o=i(n,["bytesBase64Encoded"]);o!=null&&s(e,["imageBytes"],ge(o));const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function mo(n){const e={};if(i(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=i(n,["imageBytes"]);t!=null&&s(e,["bytesBase64Encoded"],ge(t));const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function le(n){const e={},t=i(n,["gcsUri"]);t!=null&&s(e,["gcsUri"],t);const o=i(n,["imageBytes"]);o!=null&&s(e,["bytesBase64Encoded"],ge(o));const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function gc(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function hc(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function yc(n){const e={},t=i(n,["latitude"]);t!=null&&s(e,["latitude"],t);const o=i(n,["longitude"]);return o!=null&&s(e,["longitude"],o),e}function Cc(n){const e={},t=i(n,["latitude"]);t!=null&&s(e,["latitude"],t);const o=i(n,["longitude"]);return o!=null&&s(e,["longitude"],o),e}function Tc(n,e,t){const o={},r=i(e,["pageSize"]);t!==void 0&&r!=null&&s(t,["_query","pageSize"],r);const l=i(e,["pageToken"]);t!==void 0&&l!=null&&s(t,["_query","pageToken"],l);const a=i(e,["filter"]);t!==void 0&&a!=null&&s(t,["_query","filter"],a);const u=i(e,["queryBase"]);return t!==void 0&&u!=null&&s(t,["_url","models_url"],Qt(n,u)),o}function xc(n,e,t){const o={},r=i(e,["pageSize"]);t!==void 0&&r!=null&&s(t,["_query","pageSize"],r);const l=i(e,["pageToken"]);t!==void 0&&l!=null&&s(t,["_query","pageToken"],l);const a=i(e,["filter"]);t!==void 0&&a!=null&&s(t,["_query","filter"],a);const u=i(e,["queryBase"]);return t!==void 0&&u!=null&&s(t,["_url","models_url"],Qt(n,u)),o}function vc(n,e){const t={},o=i(e,["config"]);return o!=null&&Tc(n,o,t),t}function Sc(n,e){const t={},o=i(e,["config"]);return o!=null&&xc(n,o,t),t}function _c(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["_self"]);if(r!=null){let l=Zt(r);Array.isArray(l)&&(l=l.map(a=>rn(a))),s(e,["models"],l)}return e}function Ec(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["_self"]);if(r!=null){let l=Zt(r);Array.isArray(l)&&(l=l.map(a=>ln(a))),s(e,["models"],l)}return e}function Ac(n){const e={},t=i(n,["maskMode"]);t!=null&&s(e,["maskMode"],t);const o=i(n,["segmentationClasses"]);o!=null&&s(e,["maskClasses"],o);const r=i(n,["maskDilation"]);return r!=null&&s(e,["dilation"],r),e}function rn(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["description"]);r!=null&&s(e,["description"],r);const l=i(n,["version"]);l!=null&&s(e,["version"],l);const a=i(n,["_self"]);a!=null&&s(e,["tunedModelInfo"],ud(a));const u=i(n,["inputTokenLimit"]);u!=null&&s(e,["inputTokenLimit"],u);const d=i(n,["outputTokenLimit"]);d!=null&&s(e,["outputTokenLimit"],d);const c=i(n,["supportedGenerationMethods"]);return c!=null&&s(e,["supportedActions"],c),e}function ln(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["description"]);r!=null&&s(e,["description"],r);const l=i(n,["versionId"]);l!=null&&s(e,["version"],l);const a=i(n,["deployedModels"]);if(a!=null){let m=a;Array.isArray(m)&&(m=m.map(g=>Eu(g))),s(e,["endpoints"],m)}const u=i(n,["labels"]);u!=null&&s(e,["labels"],u);const d=i(n,["_self"]);d!=null&&s(e,["tunedModelInfo"],cd(d));const c=i(n,["defaultCheckpointId"]);c!=null&&s(e,["defaultCheckpointId"],c);const p=i(n,["checkpoints"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(g=>Ja(g))),s(e,["checkpoints"],m)}return e}function Mc(n){const e={},t=i(n,["featureSelectionPreference"]);return t!=null&&s(e,["featureSelectionPreference"],t),e}function Ic(n){const e={},t=i(n,["speakerVoiceConfigs"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Zc(r))),s(e,["speakerVoiceConfigs"],o)}return e}function Nc(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Nd(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],Va(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],Iu(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],Pu(u));const d=i(n,["codeExecutionResult"]);d!=null&&s(e,["codeExecutionResult"],d);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const p=i(n,["functionResponse"]);p!=null&&s(e,["functionResponse"],p);const m=i(n,["text"]);return m!=null&&s(e,["text"],m),e}function wc(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],wd(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],qa(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],Nu(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],ku(u));const d=i(n,["codeExecutionResult"]);d!=null&&s(e,["codeExecutionResult"],d);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const p=i(n,["functionResponse"]);p!=null&&s(e,["functionResponse"],p);const m=i(n,["text"]);return m!=null&&s(e,["text"],m),e}function Rc(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Rd(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],Ga(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],wu(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],Du(u));const d=i(n,["codeExecutionResult"]);d!=null&&s(e,["codeExecutionResult"],d);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const p=i(n,["functionResponse"]);p!=null&&s(e,["functionResponse"],p);const m=i(n,["text"]);return m!=null&&s(e,["text"],m),e}function Pc(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Pd(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],Ba(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],Ru(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],bu(u));const d=i(n,["codeExecutionResult"]);d!=null&&s(e,["codeExecutionResult"],d);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const p=i(n,["functionResponse"]);p!=null&&s(e,["functionResponse"],p);const m=i(n,["text"]);return m!=null&&s(e,["text"],m),e}function kc(n){const e={},t=i(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function Dc(n){const e={},t=i(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function bc(n){const e={},t=i(n,["productImage"]);return t!=null&&s(e,["image"],le(t)),e}function Fc(n,e){const t={},o=i(n,["numberOfImages"]);e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o);const r=i(n,["baseSteps"]);e!==void 0&&r!=null&&s(e,["parameters","editConfig","baseSteps"],r);const l=i(n,["outputGcsUri"]);e!==void 0&&l!=null&&s(e,["parameters","storageUri"],l);const a=i(n,["seed"]);e!==void 0&&a!=null&&s(e,["parameters","seed"],a);const u=i(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&s(e,["parameters","safetySetting"],u);const d=i(n,["personGeneration"]);e!==void 0&&d!=null&&s(e,["parameters","personGeneration"],d);const c=i(n,["addWatermark"]);e!==void 0&&c!=null&&s(e,["parameters","addWatermark"],c);const p=i(n,["outputMimeType"]);e!==void 0&&p!=null&&s(e,["parameters","outputOptions","mimeType"],p);const m=i(n,["outputCompressionQuality"]);e!==void 0&&m!=null&&s(e,["parameters","outputOptions","compressionQuality"],m);const g=i(n,["enhancePrompt"]);return e!==void 0&&g!=null&&s(e,["parameters","enhancePrompt"],g),t}function Uc(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],K(n,o));const r=i(e,["source"]);r!=null&&Vc(r,t);const l=i(e,["config"]);return l!=null&&Fc(l,t),t}function Lc(n){const e={},t=i(n,["predictions"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Ke(r))),s(e,["generatedImages"],o)}return e}function Vc(n,e){const t={},o=i(n,["prompt"]);e!==void 0&&o!=null&&s(e,["instances[0]","prompt"],o);const r=i(n,["personImage"]);e!==void 0&&r!=null&&s(e,["instances[0]","personImage","image"],le(r));const l=i(n,["productImages"]);if(e!==void 0&&l!=null){let a=l;Array.isArray(a)&&(a=a.map(u=>bc(u))),s(e,["instances[0]","productImages"],a)}return t}function qc(n){const e={},t=i(n,["referenceImage"]);t!=null&&s(e,["referenceImage"],le(t));const o=i(n,["referenceId"]);o!=null&&s(e,["referenceId"],o);const r=i(n,["referenceType"]);r!=null&&s(e,["referenceType"],r);const l=i(n,["maskImageConfig"]);l!=null&&s(e,["maskImageConfig"],Ac(l));const a=i(n,["controlImageConfig"]);a!=null&&s(e,["controlImageConfig"],eu(a));const u=i(n,["styleImageConfig"]);u!=null&&s(e,["styleImageConfig"],ed(u));const d=i(n,["subjectImageConfig"]);return d!=null&&s(e,["subjectImageConfig"],nd(d)),e}function Gc(n){const e={},t=i(n,["latLng"]);t!=null&&s(e,["latLng"],yc(t));const o=i(n,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function Bc(n){const e={},t=i(n,["latLng"]);t!=null&&s(e,["latLng"],Cc(t));const o=i(n,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function go(n){const e={},t=i(n,["safetyAttributes","categories"]);t!=null&&s(e,["categories"],t);const o=i(n,["safetyAttributes","scores"]);o!=null&&s(e,["scores"],o);const r=i(n,["contentType"]);return r!=null&&s(e,["contentType"],r),e}function ho(n){const e={},t=i(n,["safetyAttributes","categories"]);t!=null&&s(e,["categories"],t);const o=i(n,["safetyAttributes","scores"]);o!=null&&s(e,["scores"],o);const r=i(n,["contentType"]);return r!=null&&s(e,["contentType"],r),e}function Hc(n){const e={};if(i(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=i(n,["category"]);t!=null&&s(e,["category"],t);const o=i(n,["threshold"]);return o!=null&&s(e,["threshold"],o),e}function $c(n){const e={},t=i(n,["method"]);t!=null&&s(e,["method"],t);const o=i(n,["category"]);o!=null&&s(e,["category"],o);const r=i(n,["threshold"]);return r!=null&&s(e,["threshold"],r),e}function Jc(n){const e={},t=i(n,["anyOf"]);t!=null&&s(e,["anyOf"],t);const o=i(n,["default"]);o!=null&&s(e,["default"],o);const r=i(n,["description"]);r!=null&&s(e,["description"],r);const l=i(n,["enum"]);l!=null&&s(e,["enum"],l);const a=i(n,["example"]);a!=null&&s(e,["example"],a);const u=i(n,["format"]);u!=null&&s(e,["format"],u);const d=i(n,["items"]);d!=null&&s(e,["items"],d);const c=i(n,["maxItems"]);c!=null&&s(e,["maxItems"],c);const p=i(n,["maxLength"]);p!=null&&s(e,["maxLength"],p);const m=i(n,["maxProperties"]);m!=null&&s(e,["maxProperties"],m);const g=i(n,["maximum"]);g!=null&&s(e,["maximum"],g);const h=i(n,["minItems"]);h!=null&&s(e,["minItems"],h);const y=i(n,["minLength"]);y!=null&&s(e,["minLength"],y);const C=i(n,["minProperties"]);C!=null&&s(e,["minProperties"],C);const A=i(n,["minimum"]);A!=null&&s(e,["minimum"],A);const _=i(n,["nullable"]);_!=null&&s(e,["nullable"],_);const E=i(n,["pattern"]);E!=null&&s(e,["pattern"],E);const S=i(n,["properties"]);S!=null&&s(e,["properties"],S);const P=i(n,["propertyOrdering"]);P!=null&&s(e,["propertyOrdering"],P);const D=i(n,["required"]);D!=null&&s(e,["required"],D);const F=i(n,["title"]);F!=null&&s(e,["title"],F);const b=i(n,["type"]);return b!=null&&s(e,["type"],b),e}function Wc(n){const e={},t=i(n,["anyOf"]);t!=null&&s(e,["anyOf"],t);const o=i(n,["default"]);o!=null&&s(e,["default"],o);const r=i(n,["description"]);r!=null&&s(e,["description"],r);const l=i(n,["enum"]);l!=null&&s(e,["enum"],l);const a=i(n,["example"]);a!=null&&s(e,["example"],a);const u=i(n,["format"]);u!=null&&s(e,["format"],u);const d=i(n,["items"]);d!=null&&s(e,["items"],d);const c=i(n,["maxItems"]);c!=null&&s(e,["maxItems"],c);const p=i(n,["maxLength"]);p!=null&&s(e,["maxLength"],p);const m=i(n,["maxProperties"]);m!=null&&s(e,["maxProperties"],m);const g=i(n,["maximum"]);g!=null&&s(e,["maximum"],g);const h=i(n,["minItems"]);h!=null&&s(e,["minItems"],h);const y=i(n,["minLength"]);y!=null&&s(e,["minLength"],y);const C=i(n,["minProperties"]);C!=null&&s(e,["minProperties"],C);const A=i(n,["minimum"]);A!=null&&s(e,["minimum"],A);const _=i(n,["nullable"]);_!=null&&s(e,["nullable"],_);const E=i(n,["pattern"]);E!=null&&s(e,["pattern"],E);const S=i(n,["properties"]);S!=null&&s(e,["properties"],S);const P=i(n,["propertyOrdering"]);P!=null&&s(e,["propertyOrdering"],P);const D=i(n,["required"]);D!=null&&s(e,["required"],D);const F=i(n,["title"]);F!=null&&s(e,["title"],F);const b=i(n,["type"]);return b!=null&&s(e,["type"],b),e}function Yc(n){const e={},t=i(n,["image"]);return t!=null&&s(e,["image"],le(t)),e}function Kc(n,e){const t={},o=i(n,["mode"]);e!==void 0&&o!=null&&s(e,["parameters","mode"],o);const r=i(n,["maxPredictions"]);e!==void 0&&r!=null&&s(e,["parameters","maxPredictions"],r);const l=i(n,["confidenceThreshold"]);e!==void 0&&l!=null&&s(e,["parameters","confidenceThreshold"],l);const a=i(n,["maskDilation"]);e!==void 0&&a!=null&&s(e,["parameters","maskDilation"],a);const u=i(n,["binaryColorThreshold"]);return e!==void 0&&u!=null&&s(e,["parameters","binaryColorThreshold"],u),t}function zc(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],K(n,o));const r=i(e,["source"]);r!=null&&Qc(r,t);const l=i(e,["config"]);return l!=null&&Kc(l,t),t}function Xc(n){const e={},t=i(n,["predictions"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>ic(r))),s(e,["generatedMasks"],o)}return e}function Qc(n,e){const t={},o=i(n,["prompt"]);e!==void 0&&o!=null&&s(e,["instances[0]","prompt"],o);const r=i(n,["image"]);e!==void 0&&r!=null&&s(e,["instances[0]","image"],le(r));const l=i(n,["scribbleImage"]);return e!==void 0&&l!=null&&s(e,["instances[0]","scribble"],Yc(l)),t}function Zc(n){const e={},t=i(n,["speaker"]);t!=null&&s(e,["speaker"],t);const o=i(n,["voiceConfig"]);return o!=null&&s(e,["voiceConfig"],To(o)),e}function Oc(n){const e={},t=i(n,["voiceConfig"]);t!=null&&s(e,["voiceConfig"],To(t));const o=i(n,["multiSpeakerVoiceConfig"]);o!=null&&s(e,["multiSpeakerVoiceConfig"],Ic(o));const r=i(n,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function jc(n){const e={},t=i(n,["voiceConfig"]);if(t!=null&&s(e,["voiceConfig"],kd(t)),i(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=i(n,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function ed(n){const e={},t=i(n,["styleDescription"]);return t!=null&&s(e,["styleDescription"],t),e}function nd(n){const e={},t=i(n,["subjectType"]);t!=null&&s(e,["subjectType"],t);const o=i(n,["subjectDescription"]);return o!=null&&s(e,["subjectDescription"],o),e}function td(n){const e={},t=i(n,["includeThoughts"]);t!=null&&s(e,["includeThoughts"],t);const o=i(n,["thinkingBudget"]);return o!=null&&s(e,["thinkingBudget"],o),e}function od(n){const e={},t=i(n,["includeThoughts"]);t!=null&&s(e,["includeThoughts"],t);const o=i(n,["thinkingBudget"]);return o!=null&&s(e,["thinkingBudget"],o),e}function id(n){const e={},t=i(n,["environment"]);t!=null&&s(e,["environment"],t);const o=i(n,["excludedPredefinedFunctions"]);return o!=null&&s(e,["excludedPredefinedFunctions"],o),e}function sd(n){const e={},t=i(n,["environment"]);t!=null&&s(e,["environment"],t);const o=i(n,["excludedPredefinedFunctions"]);return o!=null&&s(e,["excludedPredefinedFunctions"],o),e}function rd(n){const e={},t=i(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],Fu(t));const o=i(n,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],Gc(o)),e}function ld(n){const e={},t=i(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],Uu(t));const o=i(n,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],Bc(o)),e}function ad(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let d=t;Array.isArray(d)&&(d=d.map(c=>Lu(c))),s(e,["functionDeclarations"],d)}if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(n,["googleSearch"]);o!=null&&s(e,["googleSearch"],fc(o));const r=i(n,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],cc(r)),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(n,["urlContext"])!=null&&s(e,["urlContext"],xd());const a=i(n,["computerUse"]);a!=null&&s(e,["computerUse"],id(a));const u=i(n,["codeExecution"]);return u!=null&&s(e,["codeExecution"],u),e}function yo(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let m=t;Array.isArray(m)&&(m=m.map(g=>Vu(g))),s(e,["functionDeclarations"],m)}const o=i(n,["retrieval"]);o!=null&&s(e,["retrieval"],o);const r=i(n,["googleSearch"]);r!=null&&s(e,["googleSearch"],pc(r));const l=i(n,["googleSearchRetrieval"]);l!=null&&s(e,["googleSearchRetrieval"],dc(l));const a=i(n,["enterpriseWebSearch"]);a!=null&&s(e,["enterpriseWebSearch"],Au(a));const u=i(n,["googleMaps"]);u!=null&&s(e,["googleMaps"],uc(u)),i(n,["urlContext"])!=null&&s(e,["urlContext"],vd());const c=i(n,["computerUse"]);c!=null&&s(e,["computerUse"],sd(c));const p=i(n,["codeExecution"]);return p!=null&&s(e,["codeExecution"],p),e}function ud(n){const e={},t=i(n,["baseModel"]);t!=null&&s(e,["baseModel"],t);const o=i(n,["createTime"]);o!=null&&s(e,["createTime"],o);const r=i(n,["updateTime"]);return r!=null&&s(e,["updateTime"],r),e}function cd(n){const e={},t=i(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&s(e,["baseModel"],t);const o=i(n,["createTime"]);o!=null&&s(e,["createTime"],o);const r=i(n,["updateTime"]);return r!=null&&s(e,["updateTime"],r),e}function dd(n,e){const t={},o=i(n,["displayName"]);e!==void 0&&o!=null&&s(e,["displayName"],o);const r=i(n,["description"]);e!==void 0&&r!=null&&s(e,["description"],r);const l=i(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&s(e,["defaultCheckpointId"],l),t}function fd(n,e){const t={},o=i(n,["displayName"]);e!==void 0&&o!=null&&s(e,["displayName"],o);const r=i(n,["description"]);e!==void 0&&r!=null&&s(e,["description"],r);const l=i(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&s(e,["defaultCheckpointId"],l),t}function pd(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","name"],K(n,o));const r=i(e,["config"]);return r!=null&&dd(r,t),t}function md(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],K(n,o));const r=i(e,["config"]);return r!=null&&fd(r,t),t}function gd(n,e){const t={},o=i(n,["outputGcsUri"]);e!==void 0&&o!=null&&s(e,["parameters","storageUri"],o);const r=i(n,["includeRaiReason"]);e!==void 0&&r!=null&&s(e,["parameters","includeRaiReason"],r);const l=i(n,["outputMimeType"]);e!==void 0&&l!=null&&s(e,["parameters","outputOptions","mimeType"],l);const a=i(n,["outputCompressionQuality"]);e!==void 0&&a!=null&&s(e,["parameters","outputOptions","compressionQuality"],a);const u=i(n,["enhanceInputImage"]);e!==void 0&&u!=null&&s(e,["parameters","upscaleConfig","enhanceInputImage"],u);const d=i(n,["imagePreservationFactor"]);e!==void 0&&d!=null&&s(e,["parameters","upscaleConfig","imagePreservationFactor"],d);const c=i(n,["numberOfImages"]);e!==void 0&&c!=null&&s(e,["parameters","sampleCount"],c);const p=i(n,["mode"]);return e!==void 0&&p!=null&&s(e,["parameters","mode"],p),t}function hd(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],K(n,o));const r=i(e,["image"]);r!=null&&s(t,["instances[0]","image"],le(r));const l=i(e,["upscaleFactor"]);l!=null&&s(t,["parameters","upscaleConfig","upscaleFactor"],l);const a=i(e,["config"]);return a!=null&&gd(a,t),t}function yd(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>Ke(l))),s(e,["generatedImages"],r)}return e}function Cd(n){const e={},t=i(n,["urlMetadata"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Sd(r))),s(e,["urlMetadata"],o)}return e}function Td(n){const e={},t=i(n,["urlMetadata"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>_d(r))),s(e,["urlMetadata"],o)}return e}function xd(){return{}}function vd(){return{}}function Sd(n){const e={},t=i(n,["retrievedUrl"]);t!=null&&s(e,["retrievedUrl"],t);const o=i(n,["urlRetrievalStatus"]);return o!=null&&s(e,["urlRetrievalStatus"],o),e}function _d(n){const e={},t=i(n,["retrievedUrl"]);t!=null&&s(e,["retrievedUrl"],t);const o=i(n,["urlRetrievalStatus"]);return o!=null&&s(e,["urlRetrievalStatus"],o),e}function Ed(n){const e={},t=i(n,["video","uri"]);t!=null&&s(e,["uri"],t);const o=i(n,["video","encodedVideo"]);o!=null&&s(e,["videoBytes"],ge(o));const r=i(n,["encoding"]);return r!=null&&s(e,["mimeType"],r),e}function Ad(n){const e={},t=i(n,["gcsUri"]);t!=null&&s(e,["uri"],t);const o=i(n,["bytesBase64Encoded"]);o!=null&&s(e,["videoBytes"],ge(o));const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Md(n){const e={},t=i(n,["image"]);t!=null&&s(e,["_self"],le(t));const o=i(n,["maskMode"]);return o!=null&&s(e,["maskMode"],o),e}function Id(n){const e={},t=i(n,["image"]);t!=null&&s(e,["image"],le(t));const o=i(n,["referenceType"]);return o!=null&&s(e,["referenceType"],o),e}function Nd(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function wd(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Rd(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Pd(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Co(n){const e={},t=i(n,["uri"]);t!=null&&s(e,["gcsUri"],t);const o=i(n,["videoBytes"]);o!=null&&s(e,["bytesBase64Encoded"],ge(o));const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function To(n){const e={},t=i(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],kc(t)),e}function kd(n){const e={},t=i(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],Dc(t)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Dd="Content-Type",bd="X-Server-Timeout",Fd="User-Agent",an="x-goog-api-client",Ud="1.21.0",Ld=`google-genai-sdk/${Ud}`,Vd="v1beta1",qd="v1beta",bt=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Gd{constructor(e){var t,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:Vd,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:qd,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,o){const r=[this.getRequestUrlInternal(t)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,o);if(e.queryParams)for(const[a,u]of Object.entries(e.queryParams))r.searchParams.append(a,String(u));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,t){const o=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(t))typeof l=="object"?o[r]=Object.assign(Object.assign({},o[r]),l):l!==void 0&&(o[r]=l);return o}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,o){if(t&&t.timeout||o){const r=new AbortController,l=r.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const a=setTimeout(()=>r.abort(),t.timeout);a&&typeof a.unref=="function"&&a.unref()}o&&o.addEventListener("abort",()=>{r.abort()}),e.signal=l}return t&&t.extraBody!==null&&Bd(e,t.extraBody),e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:o})).then(async r=>(await Ft(r),new en(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:o})).then(async r=>(await Ft(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var t;return _e(this,arguments,function*(){const r=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let a="";for(;;){const{done:u,value:d}=yield Q(r.read());if(u){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=l.decode(d,{stream:!0});try{const m=JSON.parse(c);if("error"in m){const g=JSON.parse(JSON.stringify(m.error)),h=g.status,y=g.code,C=`got status: ${h}. ${JSON.stringify(m)}`;if(y>=400&&y<600)throw new We({message:C,status:y})}}catch(m){if(m.name==="ApiError")throw m}a+=c;let p=a.match(bt);for(;p;){const m=p[1];try{const g=new Response(m,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Q(new en(g)),a=a.slice(p[0].length),p=a.match(bt)}catch(g){throw new Error(`exception parsing stream chunk ${m}. ${g}`)}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},t=Ld+" "+this.clientOptions.userAgentExtra;return e[Fd]=t,e[an]=t,e[Dd]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[o,r]of Object.entries(e.headers))t.append(o,r);e.timeout&&e.timeout>0&&t.append(bd,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var o;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,a=await l.stat(e);r.sizeBytes=String(a.size);const u=(o=t==null?void 0:t.mimeType)!==null&&o!==void 0?o:a.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=u;const d=await this.fetchUploadUrl(r,t);return l.upload(e,d,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var o;let r={};t!=null&&t.httpOptions?r=t.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const l={file:e},a=await this.request({path:U("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:r});if(!a||!(a!=null&&a.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(o=a==null?void 0:a.headers)===null||o===void 0?void 0:o["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function Ft(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let o;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await n.json():o={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(o);throw t>=400&&t<600?new We({message:r,status:t}):new Error(r)}}function Bd(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,a){const u=Object.assign({},l);for(const d in a)if(Object.prototype.hasOwnProperty.call(a,d)){const c=a[d],p=u[d];c&&typeof c=="object"&&!Array.isArray(c)&&p&&typeof p=="object"&&!Array.isArray(p)?u[d]=o(p,c):(p&&c&&typeof p!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof p}, New type: ${typeof c}. Overwriting.`),u[d]=c)}return u}const r=o(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Hd="mcp_used/unknown";let $d=!1;function xo(n){for(const e of n)if(Jd(e)||typeof e=="object"&&"inputSchema"in e)return!0;return $d}function vo(n){var e;const t=(e=n[an])!==null&&e!==void 0?e:"";n[an]=(t+` ${Hd}`).trimStart()}function Jd(n){return n!==null&&typeof n=="object"&&n instanceof Cn}function Wd(n,e=100){return _e(this,arguments,function*(){let o,r=0;for(;r<e;){const l=yield Q(n.listTools({cursor:o}));for(const a of l.tools)yield yield Q(a),r++;if(!l.nextCursor)break;o=l.nextCursor}})}class Cn{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Cn(e,t)}async initialize(){var e,t,o,r;if(this.mcpTools.length>0)return;const l={},a=[];for(const p of this.mcpClients)try{for(var u=!0,d=(t=void 0,Pe(Wd(p))),c;c=await d.next(),e=c.done,!e;u=!0){r=c.value,u=!1;const m=r;a.push(m);const g=m.name;if(l[g])throw new Error(`Duplicate function name ${g} found in MCP tools. Please ensure function names are unique.`);l[g]=p}}catch(m){t={error:m}}finally{try{!u&&!e&&(o=d.return)&&await o.call(d)}finally{if(t)throw t.error}}this.mcpTools=a,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),ri(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const a=await r.callTool({name:o.name,arguments:o.args},void 0,l);t.push({functionResponse:{name:o.name,response:a.isError?{error:a}:a}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Yd(n,e,t){const o=new Oo;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data);const l=Fl(r);Object.assign(o,l),e(o)}class Kd{constructor(e,t,o){this.apiClient=e,this.auth=t,this.webSocketFactory=o}async connect(e){var t,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),a=Qd(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),d=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${u}`;let c=()=>{};const p=new Promise(S=>{c=S}),m=e.callbacks,g=function(){c({})},h=this.apiClient,y={onopen:g,onmessage:S=>{Yd(h,m.onmessage,S)},onerror:(t=m==null?void 0:m.onerror)!==null&&t!==void 0?t:function(S){},onclose:(o=m==null?void 0:m.onclose)!==null&&o!==void 0?o:function(S){}},C=this.webSocketFactory.create(d,Xd(a),y);C.connect(),await p;const A=K(this.apiClient,e.model),_=ao({model:A}),E=sn({setup:_});return C.send(JSON.stringify(E)),new zd(C,this.apiClient)}}class zd{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=Vl(e),o=lo(t);this.conn.send(JSON.stringify({clientContent:o}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=Ll(e),o=sn(t);this.conn.send(JSON.stringify(o))}sendPlaybackControl(e){const t=sn({playbackControl:e});this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(ve.PLAY)}pause(){this.sendPlaybackControl(ve.PAUSE)}stop(){this.sendPlaybackControl(ve.STOP)}resetContext(){this.sendPlaybackControl(ve.RESET_CONTEXT)}close(){this.conn.close()}}function Xd(n){const e={};return n.forEach((t,o)=>{e[o]=t}),e}function Qd(n){const e=new Headers;for(const[t,o]of Object.entries(n))e.append(t,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zd="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Od(n,e,t){const o=new Zo;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const l=JSON.parse(r);if(n.isVertexAI()){const a=Kl(l);Object.assign(o,a)}else{const a=Yl(l);Object.assign(o,a)}e(o)}class jd{constructor(e,t,o){this.apiClient=e,this.auth=t,this.webSocketFactory=o,this.music=new Kd(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,o,r,l,a,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let p;const m=this.apiClient.getHeaders();e.config&&e.config.tools&&xo(e.config.tools)&&vo(m);const g=of(m);if(this.apiClient.isVertexAI())p=`${d}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(g);else{const T=this.apiClient.getApiKey();let M="BidiGenerateContent",N="key";T!=null&&T.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),M="BidiGenerateContentConstrained",N="access_token"),p=`${d}/ws/google.ai.generativelanguage.${c}.GenerativeService.${M}?${N}=${T}`}let h=()=>{};const y=new Promise(T=>{h=T}),C=e.callbacks,A=function(){var T;(T=C==null?void 0:C.onopen)===null||T===void 0||T.call(C),h({})},_=this.apiClient,E={onopen:A,onmessage:T=>{Od(_,C.onmessage,T)},onerror:(t=C==null?void 0:C.onerror)!==null&&t!==void 0?t:function(T){},onclose:(o=C==null?void 0:C.onclose)!==null&&o!==void 0?o:function(T){}},S=this.webSocketFactory.create(p,tf(g),E);S.connect(),await y;let P=K(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&P.startsWith("publishers/")){const T=this.apiClient.getProject(),M=this.apiClient.getLocation();P=`projects/${T}/locations/${M}/`+P}let D={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[He.AUDIO]}:e.config.responseModalities=[He.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const F=(u=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[],b=[];for(const T of F)if(this.isCallableTool(T)){const M=T;b.push(await M.tool())}else b.push(T);b.length>0&&(e.config.tools=b);const w={model:P,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?D=Rl(this.apiClient,w):D=wl(this.apiClient,w),delete D.config,S.send(JSON.stringify(D)),new nf(S,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const ef={turnComplete:!0};class nf{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let o=[];try{o=re(t.turns),e.isVertexAI()?o=o.map(r=>Ne(r)):o=o.map(r=>Ye(r))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:o,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let o=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?o=t.functionResponses:o=[t.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(Zd)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},ef),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:Bl(e)}:t={realtimeInput:Gl(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function tf(n){const e={};return n.forEach((t,o)=>{e[o]=t}),e}function of(n){const e=new Headers;for(const[t,o]of Object.entries(n))e.append(t,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ut=10;function Lt(n){var e,t,o;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const a of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Ee(a)){r=!0;break}if(!r)return!0;const l=(o=n==null?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Ee(n){return"callTool"in n&&typeof n.callTool=="function"}function sf(n){var e,t,o;return(o=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>Ee(r)))!==null&&o!==void 0?o:!1}function rf(n){var e,t,o;return(o=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>!Ee(r)))!==null&&o!==void 0?o:!1}function Vt(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lf extends me{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var o,r,l,a,u;const d=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!sf(t)||Lt(t.config))return await this.generateContentInternal(d);if(rf(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let c,p;const m=re(d.contents),g=(l=(r=(o=d.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:Ut;let h=0;for(;h<g&&(c=await this.generateContentInternal(d),!(!c.functionCalls||c.functionCalls.length===0));){const y=c.candidates[0].content,C=[];for(const A of(u=(a=t.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[])if(Ee(A)){const E=await A.callTool(c.functionCalls);C.push(...E)}h++,p={role:"user",parts:C},d.contents=re(d.contents),d.contents.push(y),d.contents.push(p),Vt(d.config)&&(m.push(y),m.push(p))}return Vt(d.config)&&(c.automaticFunctionCallingHistory=m),c},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),Lt(t.config)){const o=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(o)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(o=>{var r;let l;const a=[];if(o!=null&&o.generatedImages)for(const d of o.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((r=d==null?void 0:d.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=d==null?void 0:d.safetyAttributes:a.push(d);let u;return l?u={generatedImages:a,positivePromptSafetyAttributes:l,sdkHttpResponse:o.sdkHttpResponse}:u={generatedImages:a,sdkHttpResponse:o.sdkHttpResponse},u}),this.list=async t=>{var o;const a={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((o=a.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new be(pe.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(a),a)},this.editImage=async t=>{const o={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(o.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async t=>{let o={numberOfImages:1,mode:"upscale"};t.config&&(o=Object.assign(Object.assign({},o),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,o,r;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const a=await Promise.all(l.map(async d=>Ee(d)?await d.tool():d)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(u.config.tools=a,e.config&&e.config.tools&&xo(e.config.tools)){const d=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let c=Object.assign({},d);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),vo(c),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return u}async initAfcToolsMap(e){var t,o,r;const l=new Map;for(const a of(o=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&o!==void 0?o:[])if(Ee(a)){const u=a,d=await u.tool();for(const c of(r=d.functionDeclarations)!==null&&r!==void 0?r:[]){if(!c.name)throw new Error("Function declaration name is required.");if(l.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);l.set(c.name,u)}}return l}async processAfcStream(e){var t,o,r;const l=(r=(o=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:Ut;let a=!1,u=0;const d=await this.initAfcToolsMap(e);return(function(c,p,m){var g,h;return _e(this,arguments,function*(){for(var y,C,A,_;u<l;){a&&(u++,a=!1);const D=yield Q(c.processParamsMaybeAddMcpUsage(m)),F=yield Q(c.generateContentStreamInternal(D)),b=[],w=[];try{for(var E=!0,S=(C=void 0,Pe(F)),P;P=yield Q(S.next()),y=P.done,!y;E=!0){_=P.value,E=!1;const T=_;if(yield yield Q(T),T.candidates&&(!((g=T.candidates[0])===null||g===void 0)&&g.content)){w.push(T.candidates[0].content);for(const M of(h=T.candidates[0].content.parts)!==null&&h!==void 0?h:[])if(u<l&&M.functionCall){if(!M.functionCall.name)throw new Error("Function call name was not returned by the model.");if(p.has(M.functionCall.name)){const N=yield Q(p.get(M.functionCall.name).callTool([M.functionCall]));b.push(...N)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${p.keys()}, mising tool: ${M.functionCall.name}`)}}}}catch(T){C={error:T}}finally{try{!E&&!y&&(A=S.return)&&(yield Q(A.call(S)))}finally{if(C)throw C.error}}if(b.length>0){a=!0;const T=new Re;T.candidates=[{content:{role:"user",parts:b}}],yield yield Q(T);const M=[];M.push(...w),M.push({role:"user",parts:b});const N=re(m.contents).concat(M);m.contents=N}else break}})})(this,d,e)}async generateContentInternal(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Pt(this.apiClient,e);return u=U("{model}:generateContent",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:p.headers},g})),a.then(p=>{const m=Dt(p),g=new Re;return Object.assign(g,m),g})}else{const c=Rt(this.apiClient,e);return u=U("{model}:generateContent",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:p.headers},g})),a.then(p=>{const m=kt(p),g=new Re;return Object.assign(g,m),g})}}async generateContentStreamInternal(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Pt(this.apiClient,e);return u=U("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),a.then(function(m){return _e(this,arguments,function*(){var g,h,y,C;try{for(var A=!0,_=Pe(m),E;E=yield Q(_.next()),g=E.done,!g;A=!0){C=E.value,A=!1;const S=C,P=Dt(yield Q(S.json()));P.sdkHttpResponse={headers:S.headers};const D=new Re;Object.assign(D,P),yield yield Q(D)}}catch(S){h={error:S}}finally{try{!A&&!g&&(y=_.return)&&(yield Q(y.call(_)))}finally{if(h)throw h.error}}})})}else{const c=Rt(this.apiClient,e);return u=U("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),a.then(function(m){return _e(this,arguments,function*(){var g,h,y,C;try{for(var A=!0,_=Pe(m),E;E=yield Q(_.next()),g=E.done,!g;A=!0){C=E.value,A=!1;const S=C,P=kt(yield Q(S.json()));P.sdkHttpResponse={headers:S.headers};const D=new Re;Object.assign(D,P),yield yield Q(D)}}catch(S){h={error:S}}finally{try{!A&&!g&&(y=_.return)&&(yield Q(y.call(_)))}finally{if(h)throw h.error}}})})}}async embedContent(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=vu(this.apiClient,e);return u=U("{model}:predict",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:p.headers},g})),a.then(p=>{const m=_u(p),g=new ct;return Object.assign(g,m),g})}else{const c=xu(this.apiClient,e);return u=U("{model}:batchEmbedContents",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:p.headers},g})),a.then(p=>{const m=Su(p),g=new ct;return Object.assign(g,m),g})}}async generateImagesInternal(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Ju(this.apiClient,e);return u=U("{model}:predict",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:p.headers},g})),a.then(p=>{const m=Yu(p),g=new dt;return Object.assign(g,m),g})}else{const c=$u(this.apiClient,e);return u=U("{model}:predict",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:p.headers},g})),a.then(p=>{const m=Wu(p),g=new dt;return Object.assign(g,m),g})}}async editImageInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=mu(this.apiClient,e);return l=U("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const p=c;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const c=gu(d),p=new $o;return Object.assign(p,c),p})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=hd(this.apiClient,e);return l=U("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const p=c;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const c=yd(d),p=new Jo;return Object.assign(p,c),p})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=Uc(this.apiClient,e);return l=U("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>{const c=Lc(d),p=new Wo;return Object.assign(p,c),p})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=zc(this.apiClient,e);return l=U("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>{const c=Xc(d),p=new Yo;return Object.assign(p,c),p})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=ac(this.apiClient,e);return u=U("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>ln(p))}else{const c=lc(this.apiClient,e);return u=U("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json()),a.then(p=>rn(p))}}async listInternal(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Sc(this.apiClient,e);return u=U("{models_url}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:p.headers},g})),a.then(p=>{const m=Ec(p),g=new ft;return Object.assign(g,m),g})}else{const c=vc(this.apiClient,e);return u=U("{models_url}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:p.headers},g})),a.then(p=>{const m=_c(p),g=new ft;return Object.assign(g,m),g})}}async update(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=md(this.apiClient,e);return u=U("{model}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>ln(p))}else{const c=pd(this.apiClient,e);return u=U("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json()),a.then(p=>rn(p))}}async delete(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=au(this.apiClient,e);return u=U("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:p.headers},g})),a.then(p=>{const m=cu(p),g=new pt;return Object.assign(g,m),g})}else{const c=lu(this.apiClient,e);return u=U("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:p.headers},g})),a.then(p=>{const m=uu(p),g=new pt;return Object.assign(g,m),g})}}async countTokens(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=iu(this.apiClient,e);return u=U("{model}:countTokens",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:p.headers},g})),a.then(p=>{const m=ru(p),g=new mt;return Object.assign(g,m),g})}else{const c=ou(this.apiClient,e);return u=U("{model}:countTokens",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:p.headers},g})),a.then(p=>{const m=su(p),g=new mt;return Object.assign(g,m),g})}}async computeTokens(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=Ka(this.apiClient,e);return l=U("{model}:computeTokens",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const p=c;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const c=za(d),p=new Ko;return Object.assign(p,c),p})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Ou(this.apiClient,e);return u=U("{model}:predictLongRunning",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>{const m=Qu(p),g=new $e;return Object.assign(g,m),g})}else{const c=Zu(this.apiClient,e);return u=U("{model}:predictLongRunning",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json()),a.then(p=>{const m=Xu(p),g=new $e;return Object.assign(g,m),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class af extends me{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,o=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:a,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:o});return t._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async get(e){const t=e.operation,o=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:a,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:o});return t._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async getVideosOperationInternal(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Go(e);return u=U("{operationName}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a}else{const c=qo(e);return u=U("{operationName}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json()),a}}async fetchPredictVideosOperationInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=ko(e);return l=U("{resourceName}:fetchPredictOperation",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qt(){return{}}function uf(n){const e={},t=i(n,["name"]);return t!=null&&s(e,["name"],t),e}function cf(n){const e={},t=i(n,["disabled"]);t!=null&&s(e,["disabled"],t);const o=i(n,["startOfSpeechSensitivity"]);o!=null&&s(e,["startOfSpeechSensitivity"],o);const r=i(n,["endOfSpeechSensitivity"]);r!=null&&s(e,["endOfSpeechSensitivity"],r);const l=i(n,["prefixPaddingMs"]);l!=null&&s(e,["prefixPaddingMs"],l);const a=i(n,["silenceDurationMs"]);return a!=null&&s(e,["silenceDurationMs"],a),e}function df(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function ff(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Mf(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function pf(n){const e={},t=i(n,["triggerTokens"]);t!=null&&s(e,["triggerTokens"],t);const o=i(n,["slidingWindow"]);return o!=null&&s(e,["slidingWindow"],Pf(o)),e}function mf(n,e,t){const o={},r=i(e,["expireTime"]);t!==void 0&&r!=null&&s(t,["expireTime"],r);const l=i(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&s(t,["newSessionExpireTime"],l);const a=i(e,["uses"]);t!==void 0&&a!=null&&s(t,["uses"],a);const u=i(e,["liveConnectConstraints"]);t!==void 0&&u!=null&&s(t,["bidiGenerateContentSetup"],Ef(n,u));const d=i(e,["lockAdditionalFields"]);return t!==void 0&&d!=null&&s(t,["fieldMask"],d),o}function gf(n,e){const t={},o=i(e,["config"]);return o!=null&&s(t,["config"],mf(n,o,t)),t}function hf(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function yf(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Cf(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function Tf(n){const e={},t=i(n,["behavior"]);t!=null&&s(e,["behavior"],t);const o=i(n,["description"]);o!=null&&s(e,["description"],o);const r=i(n,["name"]);r!=null&&s(e,["name"],r);const l=i(n,["parameters"]);l!=null&&s(e,["parameters"],l);const a=i(n,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const u=i(n,["response"]);u!=null&&s(e,["response"],u);const d=i(n,["responseJsonSchema"]);return d!=null&&s(e,["responseJsonSchema"],d),e}function xf(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],hf(t)),e}function vf(n){const e={},t=i(n,["timeRangeFilter"]);if(t!=null&&s(e,["timeRangeFilter"],Sf(t)),i(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Sf(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function _f(n,e){const t={},o=i(n,["generationConfig"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig"],o);const r=i(n,["responseModalities"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","responseModalities"],r);const l=i(n,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const a=i(n,["topP"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","topP"],a);const u=i(n,["topK"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","topK"],u);const d=i(n,["maxOutputTokens"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","maxOutputTokens"],d);const c=i(n,["mediaResolution"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","mediaResolution"],c);const p=i(n,["seed"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","seed"],p);const m=i(n,["speechConfig"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","speechConfig"],Df(hn(m)));const g=i(n,["enableAffectiveDialog"]);e!==void 0&&g!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],g);const h=i(n,["systemInstruction"]);e!==void 0&&h!=null&&s(e,["setup","systemInstruction"],ff(ne(h)));const y=i(n,["tools"]);if(e!==void 0&&y!=null){let D=Me(y);Array.isArray(D)&&(D=D.map(F=>Ff(Ae(F)))),s(e,["setup","tools"],D)}const C=i(n,["sessionResumption"]);e!==void 0&&C!=null&&s(e,["setup","sessionResumption"],Rf(C));const A=i(n,["inputAudioTranscription"]);e!==void 0&&A!=null&&s(e,["setup","inputAudioTranscription"],qt());const _=i(n,["outputAudioTranscription"]);e!==void 0&&_!=null&&s(e,["setup","outputAudioTranscription"],qt());const E=i(n,["realtimeInputConfig"]);e!==void 0&&E!=null&&s(e,["setup","realtimeInputConfig"],wf(E));const S=i(n,["contextWindowCompression"]);e!==void 0&&S!=null&&s(e,["setup","contextWindowCompression"],pf(S));const P=i(n,["proactivity"]);return e!==void 0&&P!=null&&s(e,["setup","proactivity"],Nf(P)),t}function Ef(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["setup","model"],K(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],_f(r,t)),t}function Af(n){const e={},t=i(n,["speakerVoiceConfigs"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>kf(r))),s(e,["speakerVoiceConfigs"],o)}return e}function Mf(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Lf(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],df(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],yf(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],Cf(u));const d=i(n,["codeExecutionResult"]);d!=null&&s(e,["codeExecutionResult"],d);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const p=i(n,["functionResponse"]);p!=null&&s(e,["functionResponse"],p);const m=i(n,["text"]);return m!=null&&s(e,["text"],m),e}function If(n){const e={},t=i(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function Nf(n){const e={},t=i(n,["proactiveAudio"]);return t!=null&&s(e,["proactiveAudio"],t),e}function wf(n){const e={},t=i(n,["automaticActivityDetection"]);t!=null&&s(e,["automaticActivityDetection"],cf(t));const o=i(n,["activityHandling"]);o!=null&&s(e,["activityHandling"],o);const r=i(n,["turnCoverage"]);return r!=null&&s(e,["turnCoverage"],r),e}function Rf(n){const e={},t=i(n,["handle"]);if(t!=null&&s(e,["handle"],t),i(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Pf(n){const e={},t=i(n,["targetTokens"]);return t!=null&&s(e,["targetTokens"],t),e}function kf(n){const e={},t=i(n,["speaker"]);t!=null&&s(e,["speaker"],t);const o=i(n,["voiceConfig"]);return o!=null&&s(e,["voiceConfig"],So(o)),e}function Df(n){const e={},t=i(n,["voiceConfig"]);t!=null&&s(e,["voiceConfig"],So(t));const o=i(n,["multiSpeakerVoiceConfig"]);o!=null&&s(e,["multiSpeakerVoiceConfig"],Af(o));const r=i(n,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function bf(n){const e={},t=i(n,["environment"]);t!=null&&s(e,["environment"],t);const o=i(n,["excludedPredefinedFunctions"]);return o!=null&&s(e,["excludedPredefinedFunctions"],o),e}function Ff(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let d=t;Array.isArray(d)&&(d=d.map(c=>Tf(c))),s(e,["functionDeclarations"],d)}if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(n,["googleSearch"]);o!=null&&s(e,["googleSearch"],vf(o));const r=i(n,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],xf(r)),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(n,["urlContext"])!=null&&s(e,["urlContext"],Uf());const a=i(n,["computerUse"]);a!=null&&s(e,["computerUse"],bf(a));const u=i(n,["codeExecution"]);return u!=null&&s(e,["codeExecution"],u),e}function Uf(){return{}}function Lf(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function So(n){const e={},t=i(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],If(t)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vf(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const o=n[t];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(l=>`${t}.${l}`);e.push(...r)}else e.push(t)}return e.join(",")}function qf(n,e){let t=null;const o=n.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else o!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const l=Vf(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];r.length>0&&(u=r.map(c=>a.includes(c)?`generationConfig.${c}`:c));const d=[];l&&d.push(l),u.length>0&&d.push(...u),d.length>0?n.fieldMask=d.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class Gf extends me{constructor(e){super(),this.apiClient=e}async create(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=gf(this.apiClient,e);l=U("auth_tokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query;const d=qf(u,e.config);return r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>uf(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bf(n){const e={},t=i(n,["name"]);return t!=null&&s(e,["_url","name"],t),e}function Hf(n){const e={},t=i(n,["name"]);return t!=null&&s(e,["_url","name"],t),e}function $f(n,e){const t={};if(i(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=i(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&s(e,["displayName"],o),i(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=i(n,["epochCount"]);e!==void 0&&r!=null&&s(e,["tuningTask","hyperparameters","epochCount"],r);const l=i(n,["learningRateMultiplier"]);if(l!=null&&s(t,["tuningTask","hyperparameters","learningRateMultiplier"],l),i(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(i(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(i(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=i(n,["batchSize"]);e!==void 0&&a!=null&&s(e,["tuningTask","hyperparameters","batchSize"],a);const u=i(n,["learningRate"]);if(e!==void 0&&u!=null&&s(e,["tuningTask","hyperparameters","learningRate"],u),i(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return t}function Jf(n,e){const t={},o=i(n,["validationDataset"]);e!==void 0&&o!=null&&s(e,["supervisedTuningSpec"],ap(o,t));const r=i(n,["tunedModelDisplayName"]);e!==void 0&&r!=null&&s(e,["tunedModelDisplayName"],r);const l=i(n,["description"]);e!==void 0&&l!=null&&s(e,["description"],l);const a=i(n,["epochCount"]);e!==void 0&&a!=null&&s(e,["supervisedTuningSpec","hyperParameters","epochCount"],a);const u=i(n,["learningRateMultiplier"]);e!==void 0&&u!=null&&s(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],u);const d=i(n,["exportLastCheckpointOnly"]);e!==void 0&&d!=null&&s(e,["supervisedTuningSpec","exportLastCheckpointOnly"],d);const c=i(n,["adapterSize"]);if(e!==void 0&&c!=null&&s(e,["supervisedTuningSpec","hyperParameters","adapterSize"],c),i(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(i(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=i(n,["labels"]);return e!==void 0&&p!=null&&s(e,["labels"],p),t}function Wf(n){const e={},t=i(n,["baseModel"]);t!=null&&s(e,["baseModel"],t);const o=i(n,["preTunedModel"]);o!=null&&s(e,["preTunedModel"],o);const r=i(n,["trainingDataset"]);r!=null&&s(e,["tuningTask","trainingData"],ip(r));const l=i(n,["config"]);return l!=null&&$f(l,e),e}function Yf(n){const e={},t=i(n,["baseModel"]);t!=null&&s(e,["baseModel"],t);const o=i(n,["preTunedModel"]);o!=null&&s(e,["preTunedModel"],o);const r=i(n,["trainingDataset"]);r!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],sp(r,e));const l=i(n,["config"]);return l!=null&&Jf(l,e),e}function Kf(n){const e={},t=i(n,["name"]);return t!=null&&s(e,["_url","name"],t),e}function zf(n){const e={},t=i(n,["name"]);return t!=null&&s(e,["_url","name"],t),e}function Xf(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);e!==void 0&&r!=null&&s(e,["_query","pageToken"],r);const l=i(n,["filter"]);return e!==void 0&&l!=null&&s(e,["_query","filter"],l),t}function Qf(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);e!==void 0&&r!=null&&s(e,["_query","pageToken"],r);const l=i(n,["filter"]);return e!==void 0&&l!=null&&s(e,["_query","filter"],l),t}function Zf(n){const e={},t=i(n,["config"]);return t!=null&&Xf(t,e),e}function Of(n){const e={},t=i(n,["config"]);return t!=null&&Qf(t,e),e}function jf(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["tunedModels"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>_o(a))),s(e,["tuningJobs"],l)}return e}function ep(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["tuningJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>un(a))),s(e,["tuningJobs"],l)}return e}function np(n){const e={},t=i(n,["checkpointId"]);t!=null&&s(e,["checkpointId"],t);const o=i(n,["epoch"]);o!=null&&s(e,["epoch"],o);const r=i(n,["step"]);r!=null&&s(e,["step"],r);const l=i(n,["endpoint"]);return l!=null&&s(e,["endpoint"],l),e}function tp(n){const e={},t=i(n,["name"]);t!=null&&s(e,["model"],t);const o=i(n,["name"]);return o!=null&&s(e,["endpoint"],o),e}function op(n){const e={},t=i(n,["model"]);t!=null&&s(e,["model"],t);const o=i(n,["endpoint"]);o!=null&&s(e,["endpoint"],o);const r=i(n,["checkpoints"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>np(a))),s(e,["checkpoints"],l)}return e}function ip(n){const e={};if(i(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(i(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const t=i(n,["examples"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>rp(r))),s(e,["examples","examples"],o)}return e}function sp(n,e){const t={},o=i(n,["gcsUri"]);e!==void 0&&o!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],o);const r=i(n,["vertexDatasetResource"]);if(e!==void 0&&r!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],r),i(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return t}function rp(n){const e={},t=i(n,["textInput"]);t!=null&&s(e,["textInput"],t);const o=i(n,["output"]);return o!=null&&s(e,["output"],o),e}function _o(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["state"]);r!=null&&s(e,["state"],zt(r));const l=i(n,["createTime"]);l!=null&&s(e,["createTime"],l);const a=i(n,["tuningTask","startTime"]);a!=null&&s(e,["startTime"],a);const u=i(n,["tuningTask","completeTime"]);u!=null&&s(e,["endTime"],u);const d=i(n,["updateTime"]);d!=null&&s(e,["updateTime"],d);const c=i(n,["description"]);c!=null&&s(e,["description"],c);const p=i(n,["baseModel"]);p!=null&&s(e,["baseModel"],p);const m=i(n,["_self"]);m!=null&&s(e,["tunedModel"],tp(m));const g=i(n,["customBaseModel"]);g!=null&&s(e,["customBaseModel"],g);const h=i(n,["experiment"]);h!=null&&s(e,["experiment"],h);const y=i(n,["labels"]);y!=null&&s(e,["labels"],y);const C=i(n,["outputUri"]);C!=null&&s(e,["outputUri"],C);const A=i(n,["pipelineJob"]);A!=null&&s(e,["pipelineJob"],A);const _=i(n,["serviceAccount"]);_!=null&&s(e,["serviceAccount"],_);const E=i(n,["tunedModelDisplayName"]);return E!=null&&s(e,["tunedModelDisplayName"],E),e}function un(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["state"]);r!=null&&s(e,["state"],zt(r));const l=i(n,["createTime"]);l!=null&&s(e,["createTime"],l);const a=i(n,["startTime"]);a!=null&&s(e,["startTime"],a);const u=i(n,["endTime"]);u!=null&&s(e,["endTime"],u);const d=i(n,["updateTime"]);d!=null&&s(e,["updateTime"],d);const c=i(n,["error"]);c!=null&&s(e,["error"],c);const p=i(n,["description"]);p!=null&&s(e,["description"],p);const m=i(n,["baseModel"]);m!=null&&s(e,["baseModel"],m);const g=i(n,["tunedModel"]);g!=null&&s(e,["tunedModel"],op(g));const h=i(n,["preTunedModel"]);h!=null&&s(e,["preTunedModel"],h);const y=i(n,["supervisedTuningSpec"]);y!=null&&s(e,["supervisedTuningSpec"],y);const C=i(n,["tuningDataStats"]);C!=null&&s(e,["tuningDataStats"],C);const A=i(n,["encryptionSpec"]);A!=null&&s(e,["encryptionSpec"],A);const _=i(n,["partnerModelTuningSpec"]);_!=null&&s(e,["partnerModelTuningSpec"],_);const E=i(n,["customBaseModel"]);E!=null&&s(e,["customBaseModel"],E);const S=i(n,["experiment"]);S!=null&&s(e,["experiment"],S);const P=i(n,["labels"]);P!=null&&s(e,["labels"],P);const D=i(n,["outputUri"]);D!=null&&s(e,["outputUri"],D);const F=i(n,["pipelineJob"]);F!=null&&s(e,["pipelineJob"],F);const b=i(n,["serviceAccount"]);b!=null&&s(e,["serviceAccount"],b);const w=i(n,["tunedModelDisplayName"]);return w!=null&&s(e,["tunedModelDisplayName"],w),e}function lp(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["metadata"]);r!=null&&s(e,["metadata"],r);const l=i(n,["done"]);l!=null&&s(e,["done"],l);const a=i(n,["error"]);return a!=null&&s(e,["error"],a),e}function ap(n,e){const t={},o=i(n,["gcsUri"]);o!=null&&s(t,["validationDatasetUri"],o);const r=i(n,["vertexDatasetResource"]);return e!==void 0&&r!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class up extends me{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new be(pe.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(t),t),this.tune=async t=>{var o;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((o=t.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:r});return l.baseModel=void 0,await this.tuneInternal(l)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),l=await this.tuneMldevInternal(r);let a="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?a=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(a=l.name.split("/operations/")[0]),{name:a,state:je.JOB_STATE_QUEUED}}}}async getInternal(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=zf(e);return u=U("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:p.headers},g})),a.then(p=>un(p))}else{const c=Kf(e);return u=U("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:p.headers},g})),a.then(p=>_o(p))}}async listInternal(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Of(e);return u=U("tuningJobs",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:p.headers},g})),a.then(p=>{const m=ep(p),g=new gt;return Object.assign(g,m),g})}else{const c=Zf(e);return u=U("tunedModels",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:p.headers},g})),a.then(p=>{const m=jf(p),g=new gt;return Object.assign(g,m),g})}}async cancel(e){var t,o,r,l;let a="",u={};if(this.apiClient.isVertexAI()){const d=Hf(e);a=U("{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const d=Bf(e);a=U("{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=Yf(e);return l=U("tuningJobs",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const p=c;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>un(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Wf(e);return l=U("tunedModels",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const p=c;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>lp(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cp{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const dp=1024*1024*8,fp=3,pp=1e3,mp=2,Qe="x-goog-upload-status";async function gp(n,e,t){var o,r,l;let a=0,u=0,d=new en(new Response),c="upload";for(a=n.size;u<a;){const m=Math.min(dp,a-u),g=n.slice(u,u+m);u+m>=a&&(c+=", finalize");let h=0,y=pp;for(;h<fp&&(d=await t.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(u),"Content-Length":String(m)}}}),!(!((o=d==null?void 0:d.headers)===null||o===void 0)&&o[Qe]));)h++,await yp(y),y=y*mp;if(u+=m,((r=d==null?void 0:d.headers)===null||r===void 0?void 0:r[Qe])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const p=await(d==null?void 0:d.json());if(((l=d==null?void 0:d.headers)===null||l===void 0?void 0:l[Qe])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return p.file}async function hp(n){return{size:n.size,type:n.type}}function yp(n){return new Promise(e=>setTimeout(e,n))}class Cp{async upload(e,t,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await gp(e,t,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await hp(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tp{create(e,t,o){return new xp(e,t,o)}}class xp{constructor(e,t,o){this.url=e,this.headers=t,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Gt="x-goog-api-key";class vp{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(Gt)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Gt,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Sp="gl-node/";class _p{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const o=Po(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion;const r=new vp(this.apiKey);this.apiClient=new Gd({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Sp+"web",uploader:new Cp,downloader:new cp}),this.models=new lf(this.apiClient),this.live=new jd(this.apiClient,r,new Tp),this.batches=new Ss(this.apiClient),this.chats=new Rr(this.models,this.apiClient),this.caches=new Ir(this.apiClient),this.files=new $r(this.apiClient),this.operations=new af(this.apiClient),this.authTokens=new Gf(this.apiClient),this.tunings=new up(this.apiClient)}}const Bt=()=>f.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[f.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),f.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Ep=({onSubmit:n,initialData:e,onCancel:t,isKurdishByDefault:o=!1,isLoading:r=!1,allGenres:l=[]})=>{const[a,u]=R.useState({title:"",description:"",poster_url:"",backdrop_url:"",year:new Date().getFullYear(),genres:[],tags:[],servers:[{name:"Server 1",url:"https://vidtube.pro/embed-1y2lihgthstv.html",quality:"1080p"}],backup_servers:[],download_url:"",trailer_url:"",is_kurdish:!1,imdb_rating:void 0,quality:"",duration:"",language:"",country:""}),[d,c]=R.useState(""),[p,m]=R.useState(""),[g,h]=R.useState(!1),[y,C]=R.useState(""),[A,_]=R.useState(!1),[E,S]=R.useState(""),[P,D]=R.useState(""),[F,b]=R.useState(!1),w=R.useRef(null);R.useEffect(()=>{e?(u({title:e.title||"",description:e.description||"",poster_url:e.poster_url||"",backdrop_url:e.backdrop_url||"",year:e.year||new Date().getFullYear(),genres:e.genres||[],tags:e.tags||[],servers:e.servers&&e.servers.length>0?e.servers:[{name:"Server 1",url:"",quality:"1080p"}],backup_servers:e.backup_servers||[],download_url:e.download_url||"",trailer_url:e.trailer_url||"",is_kurdish:e.is_kurdish||!1,imdb_rating:e.imdb_rating,quality:e.quality||"",duration:e.duration||"",language:e.language||"",country:e.country||""}),c((e.tags||[]).join(", "))):(u({title:"",description:"",poster_url:"",backdrop_url:"",year:new Date().getFullYear(),genres:[],tags:[],servers:[{name:"Server 1",url:"https://vidtube.pro/embed-1y2lihgthstv.html",quality:"1080p"}],backup_servers:[],download_url:"",trailer_url:"",is_kurdish:o,imdb_rating:void 0,quality:"",duration:"",language:"",country:""}),c(""))},[e,o]),R.useEffect(()=>{const I=L=>{w.current&&!w.current.contains(L.target)&&_(!1)};return document.addEventListener("mousedown",I),()=>{document.removeEventListener("mousedown",I)}},[]),R.useEffect(()=>{const I=a.download_url;if(I&&I.includes("vidtube.pro/d/")){const L=I.replace("/d/","/embed-");a.servers.length>0&&a.servers[0].url!==L&&u(V=>{const X=[...V.servers];return X[0]={...X[0],url:L},{...V,servers:X}})}},[a.download_url,a.servers]),R.useEffect(()=>{if(!e){const I=a.title.match(/\b(19[89]\d|20\d{2})\b/);if(I&&I[0]){const L=parseInt(I[0],10);u(V=>({...V,year:L}))}}},[a.title,e]),R.useEffect(()=>{!e&&!a.backdrop_url.trim()&&u(I=>({...I,backdrop_url:I.poster_url}))},[a.poster_url,e,a.backdrop_url]);const T=I=>{const{name:L,value:V,type:X}=I.target;if(X==="checkbox"){const{checked:v}=I.target;u(q=>({...q,[L]:v}))}else if(L==="year"){const v=parseInt(V,10);u(q=>({...q,[L]:isNaN(v)?0:v}))}else if(L==="imdb_rating"){const v=parseFloat(V);u(q=>({...q,imdb_rating:isNaN(v)?void 0:v}))}else u(v=>({...v,[L]:V}))},M=I=>{c(I.target.value)},N=I=>{u(L=>{const V=L.genres||[],X=V.includes(I)?V.filter(v=>v!==I):[...V,I];return{...L,genres:X}})},G=async()=>{const I=P.trim();if(I){if(l.some(L=>L.toLowerCase()===I.toLowerCase())){alert("هذه الفئة موجودة بالفعل.");return}b(!0);try{const{error:L}=await W.from("categories").insert({name:I});if(L)throw L;u(V=>({...V,genres:[...V.genres||[],I]})),D("")}catch(L){console.error("Error adding new genre:",L),alert("حدث خطأ أثناء إضافة الفئة الجديدة.")}finally{b(!1)}}},k=(I,L,V)=>{const X=[...a.servers];X[I]={...X[I],[L]:V},u(v=>({...v,servers:X}))},Y=()=>{u(I=>{const L={name:`Server ${I.servers.length+1}`,url:"",quality:"1080p"};return{...I,servers:[...I.servers,L]}})},z=I=>{u(L=>({...L,servers:L.servers.filter((V,X)=>X!==I)}))},ee=(I,L,V)=>{const X=[...a.backup_servers||[]];X[I]={...X[I],[L]:V},u(v=>({...v,backup_servers:X}))},we=()=>{u(I=>{var L;return{...I,backup_servers:[...I.backup_servers||[],{name:`Server ${(((L=I.backup_servers)==null?void 0:L.length)||0)+1}`,url:"",quality:"1080p",no_sub_url:""}]}})},ae=I=>{u(L=>({...L,backup_servers:(L.backup_servers||[]).filter((V,X)=>X!==I)}))},he=async()=>{if(!p){C("Please enter a URL.");return}h(!0),C("");let I="";try{C("Fetching main movie page...");const L=`https://corsproxy.io/?${encodeURIComponent(p)}`,V=await fetch(L);if(!V.ok)throw new Error(`Failed to fetch main URL with status ${V.status}`);const X=await V.text(),v=new _p({apiKey:"PLACEHOLDER_API_KEY"}),q={type:Z.OBJECT,properties:{title:{type:Z.STRING,description:"The full English title of the movie, without the year. If not found, return an empty string."},year:{type:Z.INTEGER,description:"The release year of the movie. Find the section labeled 'موعد الصدور' and extract only the year. If not found, return null."},description:{type:Z.STRING,description:"A brief summary or story of the movie. If not found, return an empty string."},poster_url:{type:Z.STRING,description:"The direct URL to the movie's poster image. If not found, return an empty string."},imdb_rating:{type:Z.NUMBER,description:"The IMDb rating of the movie, a decimal number like 6.9. Extracted from an element with class 'imdbR' or similar. If not found, return null."},trailer_url:{type:Z.STRING,description:"The direct URL for the movie trailer. Look for an anchor tag <a> near the text 'مشاهدة التريلر'. The text might not be inside the tag itself. Extract the href attribute of the most relevant link. If not found, return an empty string."},genres:{type:Z.ARRAY,items:{type:Z.STRING},description:"A list of Arabic genres for the movie. From the genres you find in the HTML, ONLY return the ones that EXACTLY match an item from the provided list of valid genres. If a scraped genre is a close match (e.g., 'خيال علمى' vs 'خيال علمي'), you MUST return the version from the provided list. If no genres from the HTML match any genre in the provided list, return an empty array."},quality:{type:Z.STRING,description:"The quality of the movie, e.g., '1080p WEB-DL'. Find the section labeled 'جودة الفيلم'. If not found, return an empty string."},duration:{type:Z.STRING,description:"The runtime of the movie. Find the section labeled 'توقيت الفيلم'. If this section is not found, return an empty string."},language:{type:Z.STRING,description:"The original language. Find the section labeled 'لغة الفيلم'. If not found, return an empty string."},country:{type:Z.STRING,description:"The country of origin. Find the section labeled 'دولة الفيلم'. If not found, return an empty string."},download_page_url:{type:Z.STRING,description:"The URL that leads to the download portal. Find an anchor tag <a> with text like 'تحميل الان' or 'صفحة التحميل' and extract its href attribute. If not found, return an empty string."}}};C("Analyzing main page with Gemini...");const O=(await v.models.generateContent({model:"gemini-2.5-flash",contents:`From the following HTML content of a movie page, extract the movie details. A list of valid Arabic genres is: ${l.join(", ")}. Please provide the information in the specified JSON format. CRITICAL: For the 'genres' field, only return values that are an exact match from the provided list of valid genres. Do not guess or invent any information.

HTML:
${X}`,config:{responseMimeType:"application/json",responseSchema:q}})).text,x=JSON.parse(O);I=x.download_page_url||"";const $=(x.genres||[]).map(H=>{const oe=H.toLowerCase().trim();return l.find(ue=>ue.toLowerCase().trim()===oe)}).filter(H=>!!H);if(u(H=>({...H,title:x.title||H.title,year:x.year||H.year,description:x.description||H.description,poster_url:x.poster_url||H.poster_url,backdrop_url:x.poster_url||H.backdrop_url,imdb_rating:x.imdb_rating||H.imdb_rating,trailer_url:x.trailer_url||H.trailer_url,genres:[...new Set([...H.genres||[],...$])],quality:x.quality||H.quality,duration:x.duration||H.duration,language:x.language||H.language,country:x.country||H.country})),I){C("Fetching download page...");const H=`https://corsproxy.io/?${encodeURIComponent(I)}`,oe=await fetch(H);if(!oe.ok)throw new Error(`Failed to fetch download page with status ${oe.status}`);const se=await oe.text(),ue={type:Z.OBJECT,properties:{download_url:{type:Z.STRING,description:"The direct download link from a VidTube page. Prioritize finding an anchor tag <a> with the class 'downloadsLink' inside a div with class 'proServer'. The href should point to a 'vidtube.pro/d/...' URL. If not found, look for links with text like 'تحميل مباشر' or a quality like '1080p'. The link should be for downloading a video file. Pick the highest quality link available."}}};C("Analyzing download page with Gemini...");const ce=(await v.models.generateContent({model:"gemini-2.5-flash",contents:`From the following HTML of a VidTube download page, extract the direct download link for the movie. Find the link that is for downloading, not for streaming. If no such link is found, return an empty string.

HTML:
${se}`,config:{responseMimeType:"application/json",responseSchema:ue}})).text,Te=JSON.parse(ce);Te.download_url&&u(Io=>({...Io,download_url:Te.download_url}))}C("")}catch(L){console.error("Intelligent scraping failed:",L),C(`Failed to fetch or process data: ${L.message}. Please check the console.`)}finally{h(!1)}},ie=I=>{if(I.preventDefault(),a.genres.length===0){alert("الرجاء اختيار فئة واحدة على الأقل.");return}const L=d.split(",").map(O=>O.trim()).filter(Boolean),{directors:V,writers:X,cast:v,release_date:q,...J}=a;n({...J,tags:L})},ye=l.filter(I=>I.toLowerCase().includes(E.toLowerCase())),te="w-full bg-slate-700 text-white p-3 rounded-md focus:ring-2 focus:ring-cyan-500 border-2 border-slate-600 focus:border-cyan-500 outline-none transition",j="bg-slate-600 text-white p-2 rounded-md border-2 border-slate-500 focus:border-cyan-500 outline-none focus:ring-2 focus:ring-cyan-500 transition";return f.jsxs("form",{onSubmit:ie,className:"space-y-6",children:[f.jsxs("div",{className:"space-y-3 p-4 bg-slate-900/50 rounded-lg border border-slate-700",children:[f.jsx("label",{htmlFor:"scrape_url",className:"block text-lg font-semibold text-white",children:"جلب البيانات بذكاء من رابط"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("input",{id:"scrape_url",type:"url",value:p,onChange:I=>m(I.target.value),placeholder:"https://web6.topcinema.cam/...",className:`${te} flex-grow`}),f.jsxs("button",{type:"button",onClick:he,disabled:g,className:"bg-cyan-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-cyan-700 flex-shrink-0 flex items-center disabled:bg-slate-500",children:[g&&f.jsx(Bt,{}),g?"جاري الجلب...":"جلب البيانات"]})]}),y&&f.jsx("p",{className:"text-sm mt-1 text-cyan-300",children:y})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsx("div",{children:f.jsx("input",{type:"text",name:"title",value:a.title,onChange:T,placeholder:"عنوان الفيلم (بالانجليزية)",required:!0,className:te})}),f.jsx("input",{type:"number",name:"year",value:a.year||"",onChange:T,placeholder:"سنة الإنتاج",required:!0,className:te})]}),f.jsx("textarea",{name:"description",value:a.description,onChange:T,placeholder:"وصف الفيلم",required:!0,className:`${te} h-32`}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsx("input",{type:"url",name:"poster_url",value:a.poster_url,onChange:T,placeholder:"رابط صورة البوستر",required:!0,className:te}),f.jsx("input",{type:"url",name:"backdrop_url",value:a.backdrop_url,onChange:T,placeholder:"رابط صورة الخلفية",required:!0,className:te})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsx("input",{type:"number",name:"imdb_rating",value:a.imdb_rating??"",onChange:T,placeholder:"تقيم الفيلم",step:"0.1",min:"0",max:"10",className:te}),f.jsx("input",{type:"url",name:"trailer_url",value:a.trailer_url??"",onChange:T,placeholder:"رابط المقطع الدعائي (اختياري)",className:te})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"tags",className:"block text-lg font-semibold text-white mb-2",children:"الكلمات الدلالية (Tags)"}),f.jsx("input",{id:"tags",type:"text",name:"tags",value:d,onChange:M,placeholder:"أكشن, بطل خارق, إثارة (مفصولة بفاصلة)",className:te})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("input",{id:"is_kurdish",type:"checkbox",name:"is_kurdish",checked:!!a.is_kurdish,onChange:T,className:"h-5 w-5 text-cyan-500 bg-slate-700 border-slate-600 rounded focus:ring-cyan-600 focus:ring-offset-slate-800 cursor-pointer"}),f.jsx("label",{htmlFor:"is_kurdish",className:"text-white cursor-pointer",children:"هذا الفيلم مدبلج للكردية"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-lg font-semibold text-white mb-2",children:"الفئات (اختر واحدة على الأقل)"}),f.jsxs("div",{className:"relative",ref:w,children:[f.jsxs("button",{type:"button",onClick:()=>_(I=>!I),className:`${te} text-right flex justify-between items-center`,children:[f.jsx("span",{children:a.genres.length>0?a.genres.join(", "):"اختر الفئات..."}),f.jsx("svg",{className:`h-5 w-5 transition-transform duration-200 ${A?"rotate-180":""}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),A&&f.jsxs("div",{className:"absolute z-10 mt-1 w-full bg-slate-900 border border-slate-700 rounded-md shadow-lg max-h-60 overflow-y-auto",children:[f.jsx("div",{className:"p-2 border-b border-slate-700",children:f.jsx("input",{type:"text",placeholder:"ابحث أو أضف فئة...",value:E,onChange:I=>S(I.target.value),className:"w-full bg-slate-700 text-white p-2 rounded-md border-slate-600 outline-none"})}),f.jsx("ul",{className:"p-1",children:ye.map(I=>f.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-slate-700 cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:a.genres.includes(I),onChange:()=>N(I),className:"h-4 w-4 text-cyan-500 bg-slate-700 border-slate-600 rounded focus:ring-cyan-600"}),f.jsx("span",{className:"text-white",children:I})]},I))}),f.jsx("div",{className:"p-2 border-t border-slate-700",children:f.jsxs("div",{className:"flex gap-2",children:[f.jsx("input",{type:"text",placeholder:"إضافة فئة جديدة...",value:P,onChange:I=>D(I.target.value),className:"flex-grow bg-slate-700 text-white p-2 rounded-md border-slate-600 outline-none"}),f.jsx("button",{type:"button",onClick:G,disabled:F||!P.trim(),className:"bg-cyan-600 text-white px-3 py-1 rounded-md text-sm hover:bg-cyan-700 disabled:bg-slate-500",children:F?"...":"إضافة"})]})})]})]})]}),f.jsxs("details",{className:"bg-slate-900/30 p-4 rounded-lg border border-slate-700",open:!0,children:[f.jsx("summary",{className:"text-lg font-semibold text-white cursor-pointer",children:"تفاصيل الفيلم"}),f.jsx("div",{className:"mt-4 space-y-4",children:f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:[f.jsx("input",{type:"text",name:"quality",value:a.quality,onChange:T,placeholder:"الجودة (e.g. 1080p WEB-DL)",className:j}),f.jsx("input",{type:"text",name:"duration",value:a.duration,onChange:T,placeholder:"مدة العرض",className:j}),f.jsx("input",{type:"text",name:"language",value:a.language,onChange:T,placeholder:"اللغة",className:j}),f.jsx("input",{type:"text",name:"country",value:a.country,onChange:T,placeholder:"الدولة",className:j})]})})]}),f.jsxs("div",{className:"space-y-4 border-t border-slate-700 pt-4",children:[f.jsx("h3",{className:"text-xl font-bold text-white",children:"سيرفرات المشاهدة"}),a.servers.map((I,L)=>f.jsxs("div",{className:"bg-slate-900/50 p-3 rounded-lg border border-slate-700 space-y-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"text",value:I.name,onChange:V=>k(L,"name",V.target.value),placeholder:"اسم السيرفر",className:`${j} flex-1`}),f.jsxs("select",{value:I.quality,onChange:V=>k(L,"quality",V.target.value),className:`${j} w-28`,children:[f.jsx("option",{value:"1080p",children:"1080p"}),f.jsx("option",{value:"720p",children:"720p"}),f.jsx("option",{value:"480p",children:"480p"})]}),a.servers.length>1&&f.jsx("button",{type:"button",onClick:()=>z(L),className:"bg-red-600 text-white p-2 rounded-md hover:bg-red-700 text-xs",children:"X"})]}),L===0?f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[f.jsx("input",{type:"url",value:I.url,onChange:V=>k(L,"url",V.target.value),placeholder:"رابط السيرفر 1",required:!0,className:`${j} w-full`}),f.jsx("input",{type:"url",name:"download_url",value:a.download_url||"",onChange:T,placeholder:"رابط تحميل الفيلم (اختياري)",className:`${j} w-full`})]}):f.jsx("input",{type:"url",value:I.url,onChange:V=>k(L,"url",V.target.value),placeholder:"رابط السيرفر",required:!0,className:`${j} w-full`})]},L)),f.jsx("button",{type:"button",onClick:Y,className:"bg-slate-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-500",children:"إضافة سيرفر"})]}),f.jsxs("div",{className:"space-y-4 border-t border-slate-700 pt-4",children:[f.jsx("h3",{className:"text-xl font-bold text-white",children:"سيرفرات احتياطية (مشغل خارجي)"}),(a.backup_servers||[]).map((I,L)=>f.jsxs("div",{className:"bg-slate-900/50 p-3 rounded-lg border border-slate-700 space-y-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"text",value:I.name,onChange:V=>ee(L,"name",V.target.value),placeholder:"اسم السيرفر",className:`${j} flex-1`}),f.jsxs("select",{value:I.quality,onChange:V=>ee(L,"quality",V.target.value),className:`${j} w-28`,children:[f.jsx("option",{value:"1080p",children:"1080p"}),f.jsx("option",{value:"720p",children:"720p"}),f.jsx("option",{value:"480p",children:"480p"})]}),f.jsx("button",{type:"button",onClick:()=>ae(L),className:"bg-red-600 text-white p-2 rounded-md hover:bg-red-700 text-xs",children:"X"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[f.jsx("input",{type:"url",value:I.url,onChange:V=>ee(L,"url",V.target.value),placeholder:"رابط السيرفر (مع ترجمة)",className:`${j} w-full`}),f.jsx("input",{type:"url",value:I.no_sub_url||"",onChange:V=>ee(L,"no_sub_url",V.target.value),placeholder:"رابط السيرفر (بدون ترجمة)",className:`${j} w-full`})]})]},L)),f.jsx("button",{type:"button",onClick:we,className:"bg-slate-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-500",children:"إضافة سيرفر احتياطي"})]}),f.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-slate-700",children:[f.jsx("button",{type:"button",onClick:t,className:"bg-slate-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-500 transition-colors disabled:opacity-50",disabled:r,children:"إلغاء"}),f.jsxs("button",{type:"submit",className:"flex items-center justify-center bg-cyan-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-cyan-600 transition-colors disabled:bg-cyan-800 disabled:cursor-not-allowed",disabled:r,children:[r&&f.jsx(Bt,{}),r?e?"جاري التحديث...":"جاري الإضافة...":e?"تحديث الفيلم":"إضافة الفيلم"]})]})]})},Ap=()=>f.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[f.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),f.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),fe=({isOpen:n,onClose:e,onConfirm:t,title:o,message:r,isLoading:l=!1})=>{const[a,u]=R.useState(n);return R.useEffect(()=>{if(n)u(!0);else{const d=setTimeout(()=>u(!1),300);return()=>clearTimeout(d)}},[n]),a?f.jsx("div",{className:`fixed inset-0 bg-slate-900/80 backdrop-blur-sm flex items-center justify-center z-50 p-4 ${n?"animate-fade-in":"animate-fade-out"}`,onClick:e,"aria-modal":"true",role:"dialog",children:f.jsxs("div",{className:`relative bg-slate-800 p-6 rounded-lg shadow-xl w-full max-w-md border border-slate-700 ${n?"animate-zoom-in":"animate-zoom-out"}`,onClick:d=>d.stopPropagation(),children:[f.jsxs("div",{className:"sm:flex sm:items-start",children:[f.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-500/20 sm:mx-0 sm:h-10 sm:w-10",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),f.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:mr-4 sm:text-right flex-grow",children:[f.jsx("h3",{className:"text-lg leading-6 font-bold text-white",id:"modal-title",children:o}),f.jsx("div",{className:"mt-2",children:f.jsx("p",{className:"text-sm text-slate-300",children:r})})]})]}),f.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse sm:justify-start gap-3",children:[f.jsxs("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 focus:ring-offset-slate-800 sm:w-auto sm:text-sm disabled:bg-red-800 disabled:cursor-not-allowed",onClick:t,disabled:l,children:[l&&f.jsx(Ap,{}),l?"جاري الحذف...":"حذف"]}),f.jsx("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-slate-600 shadow-sm px-4 py-2 bg-slate-700 text-base font-medium text-white hover:bg-slate-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-500 focus:ring-offset-slate-800 sm:mt-0 sm:w-auto sm:text-sm disabled:opacity-50",onClick:e,disabled:l,children:"إلغاء"})]})]})}):null},Mp=10,Eo=()=>f.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg overflow-hidden mt-8 animate-pulse",children:[f.jsxs("div",{className:"p-4 flex justify-between items-center",children:[f.jsx("div",{className:"h-10 bg-gray-700 rounded w-40"}),f.jsx("div",{className:"h-8 bg-gray-700 rounded w-64"})]}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full",children:[f.jsx("thead",{className:"bg-gray-700",children:f.jsx("tr",{children:[...Array(9)].map((n,e)=>f.jsx("th",{className:"px-4 py-3",children:f.jsx("div",{className:"h-4 bg-gray-600 rounded"})},e))})}),f.jsx("tbody",{children:[...Array(Mp)].map((n,e)=>f.jsxs("tr",{className:"border-b border-gray-700",children:[f.jsx("td",{className:"px-4 py-2",children:f.jsx("div",{className:"h-6 w-6 bg-gray-600 rounded"})}),f.jsx("td",{className:"px-4 py-2",children:f.jsx("div",{className:"h-20 w-14 bg-gray-600 rounded"})}),[...Array(7)].map((t,o)=>f.jsx("td",{className:"px-4 py-2",children:f.jsx("div",{className:"h-4 bg-gray-600 rounded"})},o))]},e))})]})})]}),Tn=({message:n,type:e,onClose:t})=>(R.useEffect(()=>{const l=setTimeout(t,5e3);return()=>clearTimeout(l)},[t]),f.jsx("div",{className:`fixed top-24 right-5 z-[100] p-4 rounded-lg shadow-lg text-white border-l-4 animate-fade-in-down ${e==="success"?"bg-green-600 border-green-500":"bg-red-600 border-red-500"}`,role:"alert",children:f.jsxs("div",{className:"flex items-center",children:[f.jsx("p",{className:"font-bold",children:n}),f.jsx("button",{onClick:t,className:"absolute top-1 right-2 text-2xl font-bold leading-none",children:"×"})]})})),Ao=({genres:n,onSubmit:e,onClose:t,isLoading:o})=>{const[r,l]=R.useState(n[0]||""),[a,u]=R.useState("add"),d=c=>{c.preventDefault(),r&&e(r,a)};return f.jsx(De,{title:"تغيير الفئة بشكل جماعي",onClose:t,isOpen:!0,children:f.jsxs("form",{onSubmit:d,className:"space-y-4",children:[f.jsx("p",{className:"text-gray-300",children:"اختر فئة لإضافتها أو إزالتها من الأفلام المحددة."}),f.jsxs("div",{className:"flex gap-4",children:[f.jsx("select",{value:r,onChange:c=>l(c.target.value),className:"flex-grow bg-gray-700 text-white p-3 rounded-md focus:ring-2 focus:ring-cyan-500 border-none outline-none",children:n.map(c=>f.jsx("option",{value:c,children:c},c))}),f.jsxs("select",{value:a,onChange:c=>u(c.target.value),className:"bg-gray-700 text-white p-3 rounded-md focus:ring-2 focus:ring-cyan-500 border-none outline-none",children:[f.jsx("option",{value:"add",children:"إضافة"}),f.jsx("option",{value:"remove",children:"إزالة"})]})]}),f.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-gray-700",children:[f.jsx("button",{type:"button",onClick:t,disabled:o,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-gray-500 transition-colors disabled:opacity-50",children:"إلغاء"}),f.jsxs("button",{type:"submit",disabled:o||!r,className:"flex items-center justify-center bg-cyan-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-cyan-600 transition-colors disabled:bg-cyan-800",children:[o&&f.jsx(ke,{}),o?"جاري التنفيذ...":"تطبيق التغيير"]})]})]})})},Ip=({onSubmit:n,onClose:e,isLoading:t})=>{const[o,r]=R.useState(new Date().getFullYear()),l=a=>{a.preventDefault(),n(o)};return f.jsx(De,{title:"تغيير سنة الإنتاج بشكل جماعي",onClose:e,isOpen:!0,children:f.jsxs("form",{onSubmit:l,className:"space-y-4",children:[f.jsx("p",{className:"text-gray-300",children:"أدخل سنة الإنتاج الجديدة ليتم تطبيقها على جميع الأفلام المحددة."}),f.jsx("input",{type:"number",value:o,onChange:a=>r(parseInt(a.target.value)),required:!0,className:"w-full bg-gray-700 text-white p-3 rounded-md focus:ring-2 focus:ring-cyan-500 border-none outline-none"}),f.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-gray-700",children:[f.jsx("button",{type:"button",onClick:e,disabled:t,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-gray-500 transition-colors disabled:opacity-50",children:"إلغاء"}),f.jsxs("button",{type:"submit",disabled:t,className:"flex items-center justify-center bg-cyan-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-cyan-600 transition-colors disabled:bg-cyan-800",children:[t&&f.jsx(ke,{}),t?"جاري التنفيذ...":"تطبيق التغيير"]})]})]})})},Mo=({onSubmit:n,onClose:e,isLoading:t})=>{const[o,r]=R.useState(""),[l,a]=R.useState("add"),u=d=>{d.preventDefault(),o.trim()&&n(o.trim(),l)};return f.jsx(De,{title:"تغيير الكلمات الدلالية بشكل جماعي",onClose:e,isOpen:!0,children:f.jsxs("form",{onSubmit:u,className:"space-y-4",children:[f.jsx("p",{className:"text-gray-300",children:"أدخل كلمة دلالية (Tag) لإضافتها أو إزالتها من الأفلام المحددة."}),f.jsxs("div",{className:"flex gap-4",children:[f.jsx("input",{type:"text",value:o,onChange:d=>r(d.target.value),placeholder:"الكلمة الدلالية, مثلاً: بطل خارق",required:!0,className:"flex-grow bg-gray-700 text-white p-3 rounded-md focus:ring-2 focus:ring-cyan-500 border-none outline-none"}),f.jsxs("select",{value:l,onChange:d=>a(d.target.value),className:"bg-gray-700 text-white p-3 rounded-md focus:ring-2 focus:ring-cyan-500 border-none outline-none",children:[f.jsx("option",{value:"add",children:"إضافة"}),f.jsx("option",{value:"remove",children:"إزالة"})]})]}),f.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-gray-700",children:[f.jsx("button",{type:"button",onClick:e,disabled:t,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-gray-500 transition-colors disabled:opacity-50",children:"إلغاء"}),f.jsxs("button",{type:"submit",disabled:t||!o.trim(),className:"flex items-center justify-center bg-cyan-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-cyan-600 transition-colors disabled:bg-cyan-800",children:[t&&f.jsx(ke,{}),t?"جاري التنفيذ...":"تطبيق التغيير"]})]})]})})},Le=10,Np=()=>{const[n,e]=R.useState([]),[t,o]=R.useState(null),[r,l]=R.useState(!1),[a,u]=R.useState(1),[d,c]=R.useState("all"),[p,m]=R.useState(""),[g,h]=R.useState(!1),[y,C]=R.useState(null),[A,_]=R.useState(!0),[E,S]=R.useState(!1),[P,D]=R.useState(null),[F,b]=R.useState([]),[w,T]=R.useState(null),[M,N]=R.useState([]),G=async()=>{const{data:x,error:B}=await W.from("movies").select("*").order("created_at",{ascending:!1});B?(console.error("Error fetching movies: ",B),k("فشل في تحميل الأفلام.","error")):e(x);const{data:$,error:H}=await W.from("categories").select("name").order("name");H?console.error("Error fetching categories from ManageMovies: ",H):N($.map(oe=>oe.name)),_(!1)};R.useEffect(()=>{_(!0),G();const x=W.channel("public:movies").on("postgres_changes",{event:"*",schema:"public",table:"movies"},()=>G()).subscribe();return()=>{W.removeChannel(x)}},[]),R.useEffect(()=>{u(1),b([])},[d,p]);const k=(x,B)=>{D({message:x,type:B})},Y=async x=>{S(!0);try{const{error:B}=await W.from("movies").insert([{...x,created_at:new Date().toISOString()}]);if(B)throw B;await G(),l(!1),u(1),k("تمت إضافة الفيلم بنجاح.","success")}catch(B){console.error("Error adding movie: ",B);const $=B.message||JSON.stringify(B);k(`حدث خطأ أثناء إضافة الفيلم: ${$}`,"error")}finally{S(!1)}},z=async(x,B)=>{S(!0);try{const{error:$}=await W.from("movies").update(B).eq("id",x);if($)throw $;await G(),o(null),l(!1),k("تم تحديث الفيلم بنجاح.","success")}catch($){console.error("Error updating movie: ",$);const H=$.message||JSON.stringify($);k(`حدث خطأ أثناء تحديث الفيلم: ${H}`,"error")}finally{S(!1)}},ee=x=>{C(x),h(!0)},we=async()=>{if(y){S(!0);try{const{error:x}=await W.from("movies").delete().eq("id",y.id);if(x)throw x;k("تم حذف الفيلم بنجاح.","success")}catch(x){console.error("Error deleting movie: ",x);const B=x.message||JSON.stringify(x);k(`حدث خطأ أثناء حذف الفيلم: ${B}`,"error")}finally{h(!1),C(null),S(!1)}}},ae=x=>{o(x),l(!0)},he=()=>{o(null),l(!0)},ie=()=>{o(null),l(!1),T(null)},ye=x=>{b(B=>B.includes(x)?B.filter($=>$!==x):[...B,x])},te=x=>{x.target.checked?b(q.map(B=>B.id)):b(F.filter(B=>!q.some($=>$.id===B)))},j=async(x,B)=>{S(!0);try{const{error:$}=await W.from("movies").update(x).in("id",F);if($)throw $;k(B,"success"),b([])}catch($){console.error("Bulk update failed:",$),k("فشل التحديث الجماعي.","error")}finally{S(!1),T(null)}},I=async()=>{S(!0);try{const{error:x}=await W.from("movies").delete().in("id",F);if(x)throw x;k(`تم حذف ${F.length} فيلم بنجاح.`,"success"),b([])}catch(x){console.error("Bulk delete failed:",x),k("فشل الحذف الجماعي.","error")}finally{S(!1),T(null)}},L=async(x,B)=>{S(!0);try{const{data:$,error:H}=await W.from("movies").select("id, genres").in("id",F);if(H)throw H;const oe=$.map(ue=>{const Ce=ue.genres||[];let ce;return B==="add"?ce=[...new Set([...Ce,x])]:ce=Ce.filter(Te=>Te!==x),{id:ue.id,genres:ce}}),{error:se}=await W.from("movies").upsert(oe);if(se)throw se;k(`تم ${B==="add"?"إضافة":"إزالة"} فئة "${x}" بنجاح.`,"success"),b([])}catch($){console.error("Bulk genre change failed:",$),k("فشل تغيير الفئة الجماعي.","error")}finally{S(!1),T(null)}},V=async(x,B)=>{S(!0);try{const{data:$,error:H}=await W.from("movies").select("id, tags").in("id",F);if(H)throw H;const oe=$.map(ue=>{const Ce=ue.tags||[];let ce;return B==="add"?ce=[...new Set([...Ce,x])]:ce=Ce.filter(Te=>Te!==x),{id:ue.id,tags:ce}}),{error:se}=await W.from("movies").upsert(oe);if(se)throw se;k(`تم ${B==="add"?"إضافة":"إزالة"} الكلمة الدلالية "${x}" بنجاح.`,"success"),b([])}catch($){console.error("Bulk tags change failed:",$),k("فشل تغيير الكلمات الدلالية الجماعي.","error")}finally{S(!1),T(null)}},X=n.filter(x=>d==="kurdish"?x.is_kurdish===!0:d==="non-kurdish"?!x.is_kurdish:!0).filter(x=>Ht(p,x.title)),v=Math.ceil(X.length/Le),q=X.slice((a-1)*Le,a*Le),J=x=>`px-4 py-2 text-sm font-bold rounded-lg transition-colors duration-200 ${d===x?"bg-gradient-to-r from-cyan-500 to-blue-500 text-white shadow-md":"bg-slate-700 text-slate-200 hover:bg-slate-600"}`,O=q.length>0&&q.every(x=>F.includes(x.id));return A?f.jsx(Eo,{}):f.jsxs("div",{className:"relative",children:[P&&f.jsx(Tn,{...P,onClose:()=>D(null)}),f.jsx(fe,{isOpen:g,onClose:()=>h(!1),onConfirm:we,title:"تأكيد الحذف",message:f.jsxs(f.Fragment,{children:["هل أنت متأكد أنك تريد حذف الفيلم ",f.jsxs("strong",{className:"text-white",children:['"',y==null?void 0:y.title,'"']}),"؟ ",f.jsx("br",{})," ",f.jsx("span",{className:"text-yellow-400",children:"لا يمكن التراجع عن هذا الإجراء."})]}),isLoading:E}),w==="delete"&&f.jsx(fe,{isOpen:!0,onClose:()=>T(null),onConfirm:I,title:`تأكيد حذف ${F.length} فيلم`,message:f.jsxs(f.Fragment,{children:["هل أنت متأكد أنك تريد حذف الأفلام المحددة؟",f.jsx("br",{}),f.jsx("span",{className:"text-yellow-400",children:"لا يمكن التراجع عن هذا الإجراء."})]}),isLoading:E}),w==="genre"&&f.jsx(Ao,{genres:M,onClose:ie,onSubmit:L,isLoading:E}),w==="tags"&&f.jsx(Mo,{onClose:ie,onSubmit:V,isLoading:E}),w==="year"&&f.jsx(Ip,{onClose:ie,onSubmit:x=>j({year:x},"تم تحديث السنة بنجاح."),isLoading:E}),w==="markKurdish"&&f.jsx(fe,{isOpen:!0,onClose:ie,onConfirm:()=>j({is_kurdish:!0},"تم التحديث بنجاح."),title:"تأكيد",message:"هل تريد تحديد كل هذه الأفلام على أنها كردية؟",isLoading:E}),w==="unmarkKurdish"&&f.jsx(fe,{isOpen:!0,onClose:ie,onConfirm:()=>j({is_kurdish:!1},"تم التحديث بنجاح."),title:"تأكيد",message:"هل تريد إزالة العلامة الكردية من كل هذه الأفلام؟",isLoading:E}),r&&f.jsx(De,{title:t?"تعديل الفيلم":"إضافة فيلم جديد",onClose:ie,isOpen:r,children:f.jsx(Ep,{onSubmit:t?x=>z(t.id,x):Y,initialData:t,onCancel:ie,isKurdishByDefault:d==="kurdish"&&!t,isLoading:E,allGenres:M})}),f.jsxs("div",{className:"flex flex-col sm:flex-row items-center mb-6 gap-4 w-full",children:[f.jsx("button",{onClick:he,className:"bg-gradient-to-r from-cyan-500 to-blue-500 text-white font-bold py-2.5 px-5 rounded-lg hover:from-cyan-600 hover:to-blue-600 transition-all duration-300 shadow-lg w-full sm:w-auto flex-shrink-0",children:"إضافة فيلم جديد"}),f.jsxs("div",{className:"relative w-full sm:flex-grow",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),f.jsx("input",{type:"text",value:p,onChange:x=>m(x.target.value),placeholder:"ابحث عن فيلم للتعديل...",className:"w-full bg-slate-700 text-white p-2.5 pl-10 rounded-lg focus:ring-2 focus:ring-cyan-500 border-none outline-none transition-colors","aria-label":"Search for a movie to edit"})]}),f.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-2 p-1 bg-slate-900/50 rounded-lg flex-shrink-0",children:[f.jsx("button",{onClick:()=>c("all"),className:J("all"),children:"الكل"}),f.jsx("button",{onClick:()=>c("kurdish"),className:J("kurdish"),children:"كردي فقط"}),f.jsx("button",{onClick:()=>c("non-kurdish"),className:J("non-kurdish"),children:"غير كردي"})]})]}),F.length>0&&f.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-sm border border-cyan-500 rounded-lg p-3 mb-4 flex flex-wrap items-center justify-between gap-3 animate-fade-in-down",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("span",{className:"text-white font-bold",children:[F.length," فيلم محدد"]}),f.jsx("button",{onClick:()=>b([]),className:"text-sm text-cyan-400 hover:underline",children:"إلغاء التحديد"})]}),f.jsxs("div",{className:"flex flex-wrap gap-2",children:[f.jsx("button",{onClick:()=>T("genre"),className:"bg-slate-700 text-sm py-1 px-3 rounded-md hover:bg-slate-600",children:"تغيير الفئة"}),f.jsx("button",{onClick:()=>T("tags"),className:"bg-slate-700 text-sm py-1 px-3 rounded-md hover:bg-slate-600",children:"تغيير الكلمات"}),f.jsx("button",{onClick:()=>T("year"),className:"bg-slate-700 text-sm py-1 px-3 rounded-md hover:bg-slate-600",children:"تغيير السنة"}),f.jsx("button",{onClick:()=>T("markKurdish"),className:"bg-slate-700 text-sm py-1 px-3 rounded-md hover:bg-slate-600",children:"تحديد ككردي"}),f.jsx("button",{onClick:()=>T("unmarkKurdish"),className:"bg-slate-700 text-sm py-1 px-3 rounded-md hover:bg-slate-600",children:"إلغاء تحديد ككردي"}),f.jsx("button",{onClick:()=>T("delete"),className:"bg-red-600 text-sm py-1 px-3 rounded-md hover:bg-red-500",children:"حذف المحدد"})]})]}),f.jsxs("div",{children:[f.jsx("div",{className:"overflow-x-auto hidden lg:block",children:f.jsxs("table",{className:"min-w-full text-sm",children:[f.jsx("thead",{className:"bg-slate-900/50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-4 py-3 text-right",children:f.jsx("input",{type:"checkbox",onChange:te,checked:O,className:"h-4 w-4 text-cyan-500 bg-slate-700 border-slate-600 rounded focus:ring-cyan-600"})}),f.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase tracking-wider",children:"الصورة"}),f.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase tracking-wider",children:"العنوان"}),f.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase tracking-wider",children:"تقييم IMDb"}),f.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase tracking-wider",children:"السنة"}),f.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase tracking-wider",children:"الفئات"}),f.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase tracking-wider",children:"مدبلج كردي"}),f.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase tracking-wider",children:"تاريخ الإضافة"}),f.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase tracking-wider",children:"إجراءات"})]})}),f.jsx("tbody",{className:"divide-y divide-slate-700",children:q.map(x=>{var B,$;return f.jsxs("tr",{className:`${F.includes(x.id)?"bg-cyan-500/20":"hover:bg-slate-700/50"} transition-colors duration-200`,children:[f.jsx("td",{className:"px-4 py-2",children:f.jsx("input",{type:"checkbox",checked:F.includes(x.id),onChange:()=>ye(x.id),className:"h-4 w-4 text-cyan-500 bg-slate-700 border-slate-600 rounded focus:ring-cyan-600"})}),f.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:f.jsx("img",{src:x.poster_url,alt:x.title,className:"h-20 w-auto rounded object-cover",loading:"lazy"})}),f.jsx("td",{className:"px-4 py-2 whitespace-nowrap font-medium text-white align-middle",children:x.title}),f.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-yellow-400 font-bold align-middle",children:x.imdb_rating?x.imdb_rating.toFixed(1):"N/A"}),f.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-slate-300 align-middle",children:x.year}),f.jsx("td",{className:"px-4 py-2 text-slate-300 align-middle",children:f.jsxs("div",{className:"flex flex-wrap gap-1 max-w-xs",children:[(B=x.genres)==null?void 0:B.slice(0,3).map(H=>f.jsx("span",{className:"bg-slate-600 text-slate-200 px-2 py-1 text-xs rounded-full",children:H},H)),(($=x.genres)==null?void 0:$.length)>3&&f.jsx("span",{className:"bg-slate-600 text-slate-200 px-2 py-1 text-xs rounded-full",children:"..."})]})}),f.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-slate-300 align-middle",children:x.is_kurdish?"نعم":"لا"}),f.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-slate-300 align-middle",children:x.created_at?new Date(x.created_at).toLocaleDateString("ar-EG"):"غير متاح"}),f.jsxs("td",{className:"px-4 py-2 whitespace-nowrap font-medium align-middle",children:[f.jsx("button",{onClick:()=>ae(x),className:"text-cyan-400 hover:text-cyan-300 ml-4",children:"تعديل"}),f.jsx("button",{onClick:()=>ee(x),className:"text-red-500 hover:text-red-400",children:"حذف"})]})]},x.id)})})]})}),f.jsxs("div",{className:"block lg:hidden space-y-4",children:[f.jsxs("div",{className:"flex items-center gap-2 p-2",children:[f.jsx("input",{type:"checkbox",onChange:te,checked:O,className:"h-4 w-4 text-cyan-500 bg-slate-700 border-slate-600 rounded focus:ring-cyan-600"}),f.jsx("label",{className:"text-sm text-slate-300",children:"تحديد الكل في هذه الصفحة"})]}),q.map(x=>{var B,$;return f.jsxs("div",{className:`p-3 rounded-lg transition-all duration-200 ${F.includes(x.id)?"bg-cyan-500/20 ring-2 ring-cyan-500":"bg-slate-900/50"}`,children:[f.jsxs("div",{className:"flex gap-4",children:[f.jsx("div",{className:"flex-shrink-0 w-24",children:f.jsx("img",{src:x.poster_url,alt:x.title,className:"w-full rounded object-cover",loading:"lazy"})}),f.jsxs("div",{className:"flex-grow min-w-0",children:[f.jsxs("div",{className:"flex items-start justify-between gap-2",children:[f.jsx("h3",{className:"font-bold text-white truncate flex-grow pr-2",children:x.title}),f.jsx("input",{type:"checkbox",checked:F.includes(x.id),onChange:()=>ye(x.id),className:"h-5 w-5 text-cyan-500 bg-slate-700 border-slate-600 rounded focus:ring-cyan-600 flex-shrink-0"})]}),f.jsxs("div",{className:"text-sm text-slate-400 mt-1 flex items-center gap-x-2 flex-wrap",children:[f.jsx("span",{children:x.year}),f.jsx("span",{className:"text-slate-600",children:"•"}),f.jsx("span",{className:"text-yellow-400 font-bold",children:x.imdb_rating?x.imdb_rating.toFixed(1):"N/A"}),f.jsx("span",{className:"text-slate-600",children:"•"}),f.jsx("span",{children:x.is_kurdish?"كردي":"غير كردي"})]}),f.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[(B=x.genres)==null?void 0:B.slice(0,2).map(H=>f.jsx("span",{className:"bg-slate-700 text-slate-200 px-2 py-0.5 text-xs rounded-full",children:H},H)),(($=x.genres)==null?void 0:$.length)>2&&f.jsxs("span",{className:"bg-slate-700 text-slate-200 px-2 py-0.5 text-xs rounded-full",children:["+",x.genres.length-2]})]})]})]}),f.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-700 flex justify-end items-center gap-4 text-sm",children:[f.jsxs("div",{className:"text-xs text-slate-500 mr-auto",children:["أضيف في: ",x.created_at?new Date(x.created_at).toLocaleDateString("ar-EG"):"N/A"]}),f.jsx("button",{onClick:()=>ae(x),className:"font-medium text-cyan-400 hover:text-cyan-300",children:"تعديل"}),f.jsx("button",{onClick:()=>ee(x),className:"font-medium text-red-500 hover:text-red-400",children:"حذف"})]})]},x.id)})]})]}),X.length>Le&&f.jsx("div",{className:"p-4 mt-4 border-t border-slate-700",children:f.jsx(dn,{currentPage:a,totalPages:v,onPageChange:u})})]})},wp=()=>f.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[f.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),f.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Rp=({onSubmit:n,initialData:e,onCancel:t,isLoading:o=!1,allGenres:r=[]})=>{const[l,a]=R.useState({title:"",description:"",poster_url:"",backdrop_url:"",year:new Date().getFullYear(),genres:[],tags:[],seasons:[{season_number:1,title:"الموسم 1",description:"",poster_url:"",year:new Date().getFullYear(),episodes:[{episode_number:1,title:"الحلقة 1",url:"https://vidtube.pro/embed-yabwsjqcvg9i.html",download_url:"",quality:"1080p"}],imdb_rating:0}],trailer_url:"",imdb_rating:0}),[u,d]=R.useState(""),[c,p]=R.useState(!1),m=R.useRef(null);R.useEffect(()=>{e&&(a({...e,genres:e.genres||[],tags:e.tags||[],seasons:e.seasons&&e.seasons.length>0?e.seasons:[{season_number:1,title:"الموسم 1",description:"",poster_url:e.poster_url,year:e.year,episodes:[],imdb_rating:0}],trailer_url:e.trailer_url||"",imdb_rating:e.imdb_rating||0}),d((e.tags||[]).join(", ")))},[e]),R.useEffect(()=>{const w=T=>{m.current&&!m.current.contains(T.target)&&p(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]);const g=w=>{const{name:T,value:M}=w.target;if(T==="year"||T==="imdb_rating"){const N=parseFloat(M);a(G=>({...G,[T]:isNaN(N)?0:N}))}else a(N=>({...N,[T]:M}))},h=w=>{d(w.target.value)},y=w=>{a(T=>({...T,genres:T.genres.includes(w)?T.genres.filter(M=>M!==w):[...T.genres,w]}))},C=(w,T,M)=>{const N=[...l.seasons],G={...N[w]};if(T==="season_number"||T==="year"||T==="imdb_rating"){const k=typeof M=="string"?parseFloat(M):M;G[T]=isNaN(k)?0:k}else G[T]=M;N[w]=G,a(k=>({...k,seasons:N}))},A=()=>{const w=l.seasons.length>0?Math.max(...l.seasons.map(M=>M.season_number))+1:1,T=l.seasons.length>0?l.seasons[l.seasons.length-1].year:l.year;a(M=>({...M,seasons:[...M.seasons,{season_number:w,title:`الموسم ${w}`,description:"",poster_url:M.poster_url,year:T+1,episodes:[{episode_number:1,title:"الحلقة 1",url:"https://vidtube.pro/embed-yabwsjqcvg9i.html",download_url:"",quality:"1080p"}],imdb_rating:0}]}))},_=w=>{a(T=>({...T,seasons:T.seasons.filter((M,N)=>N!==w)}))},E=(w,T,M,N)=>{const G=[...l.seasons],k=[...G[w].episodes],Y={...k[T]};if(M==="episode_number"){const z=typeof N=="string"?parseFloat(N):N;Y[M]=isNaN(z)?0:z}else Y[M]=N;k[T]=Y,G[w]={...G[w],episodes:k},a(z=>({...z,seasons:G}))},S=w=>{const T=l.seasons[w],M=T.episodes.length>0?Math.max(...T.episodes.map(k=>k.episode_number))+1:1,N={episode_number:M,title:`الحلقة ${M}`,url:"https://vidtube.pro/embed-yabwsjqcvg9i.html",download_url:"",quality:"1080p"},G=l.seasons.map((k,Y)=>Y===w?{...k,episodes:[...k.episodes,N]}:k);a(k=>({...k,seasons:G}))},P=(w,T)=>{const M=l.seasons.map((N,G)=>G===w?{...N,episodes:N.episodes.filter((k,Y)=>Y!==T)}:N);a(N=>({...N,seasons:M}))},D=w=>{w.preventDefault();const T=u.split(",").map(M=>M.trim()).filter(Boolean);n({...l,tags:T})},F="w-full bg-slate-700 text-white p-3 rounded-md focus:ring-2 focus:ring-cyan-500 border-2 border-slate-600 outline-none",b="bg-slate-600 text-white p-2 rounded-md border border-slate-500 focus:border-cyan-500 outline-none";return f.jsxs("form",{onSubmit:D,className:"space-y-6",children:[f.jsx("h3",{className:"text-xl font-bold text-white border-b border-slate-700 pb-2",children:"معلومات المسلسل الرئيسية"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsx("input",{type:"text",name:"title",value:l.title,onChange:g,placeholder:"عنوان المسلسل",required:!0,className:F}),f.jsx("input",{type:"number",name:"year",value:l.year||"",onChange:g,placeholder:"سنة بداية العرض",required:!0,className:F})]}),f.jsx("textarea",{name:"description",value:l.description,onChange:g,placeholder:"وصف المسلسل العام",required:!0,className:`${F} h-24`}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsx("input",{type:"url",name:"poster_url",value:l.poster_url,onChange:g,placeholder:"رابط البوستر الرئيسي",required:!0,className:F}),f.jsx("input",{type:"url",name:"backdrop_url",value:l.backdrop_url,onChange:g,placeholder:"رابط صورة الخلفية",required:!0,className:F})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsx("input",{type:"number",name:"imdb_rating",value:l.imdb_rating??"",onChange:g,placeholder:"تقييم IMDb (e.g. 8.5)",step:"0.1",min:"0",max:"10",className:F}),f.jsx("input",{type:"url",name:"trailer_url",value:l.trailer_url??"",onChange:g,placeholder:"رابط المقطع الدعائي (اختياري)",className:F})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-lg font-semibold text-white mb-2",children:"الفئات"}),f.jsxs("div",{className:"relative",ref:m,children:[f.jsx("button",{type:"button",onClick:()=>p(w=>!w),className:`${F} text-right`,children:l.genres.length>0?l.genres.join(", "):"اختر الفئات..."}),c&&f.jsx("div",{className:"absolute z-10 mt-1 w-full bg-slate-900 border border-slate-700 rounded-md shadow-lg max-h-60 overflow-y-auto",children:r.map(w=>f.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-slate-700 cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:l.genres.includes(w),onChange:()=>y(w),className:"h-4 w-4 text-cyan-500 bg-slate-700 border-slate-600 rounded focus:ring-cyan-600"}),f.jsx("span",{className:"text-white",children:w})]},w))})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-lg font-semibold text-white mb-2",children:"الكلمات الدلالية (مفصولة بفاصلة)"}),f.jsx("input",{type:"text",value:u,onChange:h,placeholder:"أكشن, إثارة...",className:F})]}),f.jsxs("div",{className:"space-y-4 border-t border-slate-700 pt-4",children:[f.jsx("h3",{className:"text-xl font-bold text-white",children:"المواسم والحلقات"}),l.seasons.map((w,T)=>f.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-slate-700 space-y-3",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("label",{className:"text-white font-semibold",children:"الموسم رقم:"}),f.jsx("input",{type:"number",value:w.season_number||"",onChange:M=>C(T,"season_number",M.target.value),className:`${b} w-20`})]}),f.jsx("button",{type:"button",onClick:()=>_(T),className:"bg-red-600 text-white px-3 py-1 rounded-md text-sm",children:"إزالة الموسم"})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[f.jsx("input",{type:"text",value:w.title,onChange:M=>C(T,"title",M.target.value),placeholder:"عنوان الموسم",required:!0,className:b}),f.jsx("input",{type:"number",value:w.year||"",onChange:M=>C(T,"year",M.target.value),placeholder:"سنة الموسم",required:!0,className:b}),f.jsx("input",{type:"number",value:w.imdb_rating??"",onChange:M=>C(T,"imdb_rating",M.target.value),placeholder:"تقييم IMDb",step:"0.1",min:"0",max:"10",className:b}),f.jsx("input",{type:"url",value:w.poster_url,onChange:M=>C(T,"poster_url",M.target.value),placeholder:"رابط بوستر الموسم",required:!0,className:`${b} col-span-1 sm:col-span-3`}),f.jsx("textarea",{value:w.description,onChange:M=>C(T,"description",M.target.value),placeholder:"وصف الموسم",required:!0,className:`${b} h-20 col-span-1 sm:col-span-3`})]}),f.jsxs("div",{className:"space-y-2 pt-3 mt-3 border-t border-slate-600",children:[f.jsxs("h4",{className:"font-semibold text-slate-300",children:["حلقات الموسم ",w.season_number,":"]}),w.episodes.map((M,N)=>f.jsxs("div",{className:"bg-slate-800/60 p-2 rounded-md space-y-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"number",value:M.episode_number||"",onChange:G=>E(T,N,"episode_number",G.target.value),placeholder:"رقم",className:`${b} w-16`}),f.jsx("input",{type:"text",value:M.title,onChange:G=>E(T,N,"title",G.target.value),placeholder:"عنوان الحلقة",className:`${b} flex-1`}),f.jsx("button",{type:"button",onClick:()=>P(T,N),className:"bg-red-500 text-white p-2 rounded-md hover:bg-red-600 text-xs",children:"X"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"url",value:M.url,onChange:G=>E(T,N,"url",G.target.value),placeholder:"رابط المشاهدة",required:!0,className:`${b} flex-1`}),f.jsxs("select",{value:M.quality||"1080p",onChange:G=>E(T,N,"quality",G.target.value),className:`${b} w-28 flex-shrink-0`,children:[f.jsx("option",{value:"1080p",children:"1080p"}),f.jsx("option",{value:"720p",children:"720p"}),f.jsx("option",{value:"480p",children:"480p"})]})]}),f.jsx("input",{type:"url",value:M.download_url||"",onChange:G=>E(T,N,"download_url",G.target.value),placeholder:"رابط التحميل (اختياري)",className:`${b} w-full`})]})]},N)),f.jsx("button",{type:"button",onClick:()=>S(T),className:"text-sm bg-slate-600 text-white py-1 px-3 rounded-md hover:bg-slate-500",children:"إضافة حلقة"})]})]},T)),f.jsx("button",{type:"button",onClick:A,className:"bg-cyan-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-cyan-700",children:"إضافة موسم"})]}),f.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-slate-700",children:[f.jsx("button",{type:"button",onClick:t,className:"bg-slate-600 text-white font-bold py-2 px-6 rounded-lg",disabled:o,children:"إلغاء"}),f.jsxs("button",{type:"submit",className:"flex items-center justify-center bg-cyan-500 text-white font-bold py-2 px-6 rounded-lg",disabled:o,children:[o&&f.jsx(wp,{}),e?"تحديث المسلسل":"إضافة المسلسل"]})]})]})},Ve=10,Pp=()=>{const[n,e]=R.useState([]),[t,o]=R.useState(null),[r,l]=R.useState(!1),[a,u]=R.useState(1),[d,c]=R.useState(""),[p,m]=R.useState(!1),[g,h]=R.useState(null),[y,C]=R.useState(!0),[A,_]=R.useState(!1),[E,S]=R.useState(null),[P,D]=R.useState([]),[F,b]=R.useState(null),[w,T]=R.useState([]),M=async()=>{const{data:v,error:q}=await W.from("series").select("*").order("created_at",{ascending:!1});q?(console.error("Error fetching series: ",q),N("فشل في تحميل المسلسلات.","error")):e(v);const{data:J,error:O}=await W.from("categories").select("name").order("name");O?console.error("Error fetching categories: ",O):T(J.map(x=>x.name)),C(!1)};R.useEffect(()=>{C(!0),M();const v=W.channel("public:series").on("postgres_changes",{event:"*",schema:"public",table:"series"},M).subscribe();return()=>{W.removeChannel(v)}},[]),R.useEffect(()=>{u(1),D([])},[d]);const N=(v,q)=>{S({message:v,type:q})},G=async v=>{_(!0);try{const{error:q}=await W.from("series").insert([{...v,created_at:new Date().toISOString()}]);if(q)throw q;await M(),l(!1),u(1),N("تمت إضافة المسلسل بنجاح.","success")}catch(q){console.error("Error adding series: ",q);const J=q.message||JSON.stringify(q);N(`حدث خطأ أثناء إضافة المسلسل: ${J}`,"error")}finally{_(!1)}},k=async(v,q)=>{_(!0);try{const{error:J}=await W.from("series").update(q).eq("id",v);if(J)throw J;await M(),o(null),l(!1),N("تم تحديث المسلسل بنجاح.","success")}catch(J){console.error("Error updating series:",J);const O=J.message||JSON.stringify(J);N(`حدث خطأ أثناء تحديث المسلسل: ${O}`,"error")}finally{_(!1)}},Y=v=>{h(v),m(!0)},z=async()=>{if(g){_(!0);try{const{error:v}=await W.from("series").delete().eq("id",g.id);if(v)throw v;N("تم حذف المسلسل بنجاح.","success")}catch(v){console.error("Error deleting series:",v);const q=v.message||JSON.stringify(v);N(`حدث خطأ أثناء حذف المسلسل: ${q}`,"error")}finally{m(!1),h(null),_(!1)}}},ee=v=>{o(v),l(!0)},we=()=>{o(null),l(!0)},ae=()=>{o(null),l(!1),b(null)},he=v=>{D(q=>q.includes(v)?q.filter(J=>J!==v):[...q,v])},ie=v=>{v.target.checked?D(V.map(q=>q.id)):D(P.filter(q=>!V.some(J=>J.id===q)))},ye=async()=>{_(!0);try{const{error:v}=await W.from("series").delete().in("id",P);if(v)throw v;N(`تم حذف ${P.length} مسلسل بنجاح.`,"success"),D([])}catch(v){console.error("Bulk delete failed:",v),N("فشل الحذف الجماعي.","error")}finally{_(!1),b(null)}},te=async(v,q)=>{_(!0);try{const{data:J,error:O}=await W.from("series").select("id, genres").in("id",P);if(O)throw O;const x=J.map($=>{const H=$.genres||[],oe=q==="add"?[...new Set([...H,v])]:H.filter(se=>se!==v);return{id:$.id,genres:oe}}),{error:B}=await W.from("series").upsert(x);if(B)throw B;N(`تم ${q==="add"?"إضافة":"إزالة"} فئة "${v}" بنجاح.`,"success"),D([])}catch(J){console.error("Bulk genre change failed:",J),N("فشل تغيير الفئة الجماعي.","error")}finally{_(!1),b(null)}},j=async(v,q)=>{_(!0);try{const{data:J,error:O}=await W.from("series").select("id, tags").in("id",P);if(O)throw O;const x=J.map($=>{const H=$.tags||[],oe=q==="add"?[...new Set([...H,v])]:H.filter(se=>se!==v);return{id:$.id,tags:oe}}),{error:B}=await W.from("series").upsert(x);if(B)throw B;N(`تم ${q==="add"?"إضافة":"إزالة"} الكلمة الدلالية "${v}" بنجاح.`,"success"),D([])}catch(J){console.error("Bulk tags change failed:",J),N("فشل تغيير الكلمات الدلالية الجماعي.","error")}finally{_(!1),b(null)}},I=n.filter(v=>Ht(d,v.title)),L=Math.ceil(I.length/Ve),V=I.slice((a-1)*Ve,a*Ve),X=V.length>0&&V.every(v=>P.includes(v.id));return y?f.jsx(Eo,{}):f.jsxs("div",{className:"relative",children:[E&&f.jsx(Tn,{...E,onClose:()=>S(null)}),f.jsx(fe,{isOpen:p,onClose:()=>m(!1),onConfirm:z,title:"تأكيد الحذف",message:f.jsxs(f.Fragment,{children:["هل أنت متأكد أنك تريد حذف المسلسل ",f.jsxs("strong",{className:"text-white",children:['"',g==null?void 0:g.title,'"']}),"؟ ",f.jsx("br",{})," ",f.jsx("span",{className:"text-yellow-400",children:"لا يمكن التراجع عن هذا الإجراء."})]}),isLoading:A}),F==="delete"&&f.jsx(fe,{isOpen:!0,onClose:()=>b(null),onConfirm:ye,title:`تأكيد حذف ${P.length} مسلسل`,message:f.jsxs(f.Fragment,{children:["هل أنت متأكد أنك تريد حذف المسلسلات المحددة؟",f.jsx("br",{}),f.jsx("span",{className:"text-yellow-400",children:"لا يمكن التراجع عن هذا الإجراء."})]}),isLoading:A}),F==="genre"&&f.jsx(Ao,{genres:w,onClose:ae,onSubmit:te,isLoading:A}),F==="tags"&&f.jsx(Mo,{onClose:ae,onSubmit:j,isLoading:A}),r&&f.jsx(De,{title:t?"تعديل المسلسل":"إضافة مسلسل جديد",onClose:ae,isOpen:r,children:f.jsx(Rp,{onSubmit:t?v=>k(t.id,v):G,initialData:t,onCancel:ae,isLoading:A,allGenres:w})}),f.jsxs("div",{className:"flex flex-col sm:flex-row items-center mb-6 gap-4 w-full",children:[f.jsx("button",{onClick:we,className:"bg-gradient-to-r from-cyan-500 to-blue-500 text-white font-bold py-2.5 px-5 rounded-lg hover:from-cyan-600 hover:to-blue-600 transition-all duration-300 shadow-lg w-full sm:w-auto flex-shrink-0",children:"إضافة مسلسل جديد"}),f.jsxs("div",{className:"relative w-full sm:flex-grow",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),f.jsx("input",{type:"text",value:d,onChange:v=>c(v.target.value),placeholder:"ابحث عن مسلسل للتعديل...",className:"w-full bg-slate-700 text-white p-2.5 pl-10 rounded-lg focus:ring-2 focus:ring-cyan-500 border-none outline-none transition-colors","aria-label":"Search for a series to edit"})]})]}),P.length>0&&f.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-sm border border-cyan-500 rounded-lg p-3 mb-4 flex flex-wrap items-center justify-between gap-3 animate-fade-in-down",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("span",{className:"text-white font-bold",children:[P.length," مسلسل محدد"]}),f.jsx("button",{onClick:()=>D([]),className:"text-sm text-cyan-400 hover:underline",children:"إلغاء التحديد"})]}),f.jsxs("div",{className:"flex flex-wrap gap-2",children:[f.jsx("button",{onClick:()=>b("genre"),className:"bg-slate-700 text-sm py-1 px-3 rounded-md hover:bg-slate-600",children:"تغيير الفئة"}),f.jsx("button",{onClick:()=>b("tags"),className:"bg-slate-700 text-sm py-1 px-3 rounded-md hover:bg-slate-600",children:"تغيير الكلمات"}),f.jsx("button",{onClick:()=>b("delete"),className:"bg-red-600 text-sm py-1 px-3 rounded-md hover:bg-red-500",children:"حذف المحدد"})]})]}),f.jsxs("div",{children:[f.jsx("div",{className:"overflow-x-auto hidden lg:block",children:f.jsxs("table",{className:"min-w-full text-sm",children:[f.jsx("thead",{className:"bg-slate-900/50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-4 py-3 text-right",children:f.jsx("input",{type:"checkbox",onChange:ie,checked:X,className:"h-4 w-4 text-cyan-500 bg-slate-700 border-slate-600 rounded focus:ring-cyan-600"})}),f.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase tracking-wider",children:"الصورة"}),f.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase tracking-wider",children:"العنوان"}),f.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase tracking-wider",children:"تقييم IMDb"}),f.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase tracking-wider",children:"السنة"}),f.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase tracking-wider",children:"الفئات"}),f.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase tracking-wider",children:"المواسم"}),f.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase tracking-wider",children:"تاريخ الإضافة"}),f.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase tracking-wider",children:"إجراءات"})]})}),f.jsx("tbody",{className:"divide-y divide-slate-700",children:V.map(v=>{var q,J,O;return f.jsxs("tr",{className:`${P.includes(v.id)?"bg-cyan-500/20":"hover:bg-slate-700/50"} transition-colors duration-200`,children:[f.jsx("td",{className:"px-4 py-2",children:f.jsx("input",{type:"checkbox",checked:P.includes(v.id),onChange:()=>he(v.id),className:"h-4 w-4 text-cyan-500 bg-slate-700 border-slate-600 rounded focus:ring-cyan-600"})}),f.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:f.jsx("img",{src:v.poster_url,alt:v.title,className:"h-20 w-auto rounded object-cover",loading:"lazy"})}),f.jsx("td",{className:"px-4 py-2 whitespace-nowrap font-medium text-white align-middle",children:v.title}),f.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-yellow-400 font-bold align-middle",children:v.imdb_rating?v.imdb_rating.toFixed(1):"N/A"}),f.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-slate-300 align-middle",children:v.year}),f.jsx("td",{className:"px-4 py-2 text-slate-300 align-middle",children:f.jsxs("div",{className:"flex flex-wrap gap-1 max-w-xs",children:[(q=v.genres)==null?void 0:q.slice(0,3).map(x=>f.jsx("span",{className:"bg-slate-600 text-slate-200 px-2 py-1 text-xs rounded-full",children:x},x)),((J=v.genres)==null?void 0:J.length)>3&&f.jsx("span",{className:"bg-slate-600 text-slate-200 px-2 py-1 text-xs rounded-full",children:"..."})]})}),f.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-slate-300 align-middle",children:((O=v.seasons)==null?void 0:O.length)||0}),f.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-slate-300 align-middle",children:v.created_at?new Date(v.created_at).toLocaleDateString("ar-EG"):"غير متاح"}),f.jsxs("td",{className:"px-4 py-2 whitespace-nowrap font-medium align-middle",children:[f.jsx("button",{onClick:()=>ee(v),className:"text-cyan-400 hover:text-cyan-300 ml-4",children:"تعديل"}),f.jsx("button",{onClick:()=>Y(v),className:"text-red-500 hover:text-red-400",children:"حذف"})]})]},v.id)})})]})}),f.jsxs("div",{className:"block lg:hidden space-y-4",children:[f.jsxs("div",{className:"flex items-center gap-2 p-2",children:[f.jsx("input",{type:"checkbox",onChange:ie,checked:X,className:"h-4 w-4 text-cyan-500 bg-slate-700 border-slate-600 rounded focus:ring-cyan-600"}),f.jsx("label",{className:"text-sm text-slate-300",children:"تحديد الكل في هذه الصفحة"})]}),V.map(v=>{var q,J,O;return f.jsxs("div",{className:`p-3 rounded-lg transition-all duration-200 ${P.includes(v.id)?"bg-cyan-500/20 ring-2 ring-cyan-500":"bg-slate-900/50"}`,children:[f.jsxs("div",{className:"flex gap-4",children:[f.jsx("div",{className:"flex-shrink-0 w-24",children:f.jsx("img",{src:v.poster_url,alt:v.title,className:"w-full rounded object-cover",loading:"lazy"})}),f.jsxs("div",{className:"flex-grow min-w-0",children:[f.jsxs("div",{className:"flex items-start justify-between gap-2",children:[f.jsx("h3",{className:"font-bold text-white truncate flex-grow pr-2",children:v.title}),f.jsx("input",{type:"checkbox",checked:P.includes(v.id),onChange:()=>he(v.id),className:"h-5 w-5 text-cyan-500 bg-slate-700 border-slate-600 rounded focus:ring-cyan-600 flex-shrink-0"})]}),f.jsxs("div",{className:"text-sm text-slate-400 mt-1 flex items-center gap-x-2 flex-wrap",children:[f.jsx("span",{children:v.year}),f.jsx("span",{className:"text-slate-600",children:"•"}),f.jsx("span",{className:"text-yellow-400 font-bold",children:v.imdb_rating?v.imdb_rating.toFixed(1):"N/A"}),f.jsx("span",{className:"text-slate-600",children:"•"}),f.jsxs("span",{children:[((q=v.seasons)==null?void 0:q.length)||0," مواسم"]})]}),f.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[(J=v.genres)==null?void 0:J.slice(0,2).map(x=>f.jsx("span",{className:"bg-slate-700 text-slate-200 px-2 py-0.5 text-xs rounded-full",children:x},x)),((O=v.genres)==null?void 0:O.length)>2&&f.jsxs("span",{className:"bg-slate-700 text-slate-200 px-2 py-0.5 text-xs rounded-full",children:["+",v.genres.length-2]})]})]})]}),f.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-700 flex justify-end items-center gap-4 text-sm",children:[f.jsxs("div",{className:"text-xs text-slate-500 mr-auto",children:["أضيف في: ",v.created_at?new Date(v.created_at).toLocaleDateString("ar-EG"):"N/A"]}),f.jsx("button",{onClick:()=>ee(v),className:"font-medium text-cyan-400 hover:text-cyan-300",children:"تعديل"}),f.jsx("button",{onClick:()=>Y(v),className:"font-medium text-red-500 hover:text-red-400",children:"حذف"})]})]},v.id)})]})]}),I.length>Ve&&f.jsx("div",{className:"p-4 mt-4 border-t border-slate-700",children:f.jsx(dn,{currentPage:a,totalPages:L,onPageChange:u})})]})},kp=()=>f.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[f.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),f.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Dp=({onSubmit:n,initialData:e,onCancel:t,isLoading:o=!1})=>{const[r,l]=R.useState("");R.useEffect(()=>{l(e?e.name:"")},[e]);const a=u=>{u.preventDefault(),r.trim()&&n({name:r})};return f.jsxs("form",{onSubmit:a,className:"space-y-6",children:[f.jsx("input",{type:"text",name:"name",value:r,onChange:u=>l(u.target.value),placeholder:"اسم الفئة",required:!0,className:"w-full bg-gray-700 text-white p-3 rounded-md focus:ring-2 focus:ring-cyan-500 border-none outline-none"}),f.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-gray-700",children:[f.jsx("button",{type:"button",onClick:t,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-gray-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:o,children:"إلغاء"}),f.jsxs("button",{type:"submit",className:"flex items-center justify-center bg-cyan-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-cyan-600 transition-colors disabled:bg-cyan-800 disabled:cursor-not-allowed",disabled:o,children:[o&&f.jsx(kp,{}),o?e?"جاري التحديث...":"جاري الإضافة...":e?"تحديث":"إضافة"]})]})]})},bp=10,Fp=()=>f.jsx("div",{className:"bg-gray-800 rounded-lg shadow-lg overflow-hidden mt-8 animate-pulse",children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full",children:[f.jsx("thead",{className:"bg-gray-700",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3",children:f.jsx("div",{className:"h-4 bg-gray-600 rounded w-1/3"})}),f.jsx("th",{className:"px-6 py-3",children:f.jsx("div",{className:"h-4 bg-gray-600 rounded w-1/4"})})]})}),f.jsx("tbody",{children:[...Array(bp)].map((n,e)=>f.jsxs("tr",{className:"border-b border-gray-700",children:[f.jsx("td",{className:"px-6 py-4",children:f.jsx("div",{className:"h-4 bg-gray-600 rounded"})}),f.jsx("td",{className:"px-6 py-4",children:f.jsx("div",{className:"h-4 bg-gray-600 rounded w-1/2"})})]},e))})]})})}),qe=10,Up=({message:n,type:e,onClose:t})=>(R.useEffect(()=>{const l=setTimeout(t,5e3);return()=>clearTimeout(l)},[t]),f.jsx("div",{className:`fixed top-24 right-5 z-[100] p-4 rounded-lg shadow-lg text-white border-l-4 animate-fade-in-down ${e==="success"?"bg-green-600 border-green-500":"bg-red-600 border-red-500"}`,role:"alert",children:f.jsxs("div",{className:"flex items-center",children:[f.jsx("p",{className:"font-bold",children:n}),f.jsx("button",{onClick:t,className:"absolute top-1 right-2 text-2xl font-bold leading-none",children:"×"})]})})),Lp=({children:n,onClose:e,title:t,isOpen:o})=>{const[r,l]=R.useState(o);return R.useEffect(()=>{if(o){l(!0),document.body.style.overflow="hidden";const a=u=>{u.key==="Escape"&&e()};return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}}else{const a=setTimeout(()=>{l(!1),document.body.style.overflow="auto"},300);return()=>clearTimeout(a)}},[o,e]),r?f.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 ${o?"animate-fade-in":"animate-fade-out"}`,onClick:e,children:f.jsxs("div",{className:`bg-gray-800 p-8 rounded-lg shadow-xl w-full max-w-lg border border-gray-700 ${o?"animate-zoom-in":"animate-zoom-out"}`,onClick:a=>a.stopPropagation(),children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h2",{className:"text-2xl font-bold text-white",children:t}),f.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white text-3xl transition-colors",children:"×"})]}),n]})}):null},Vp=()=>{const[n,e]=R.useState([]),[t,o]=R.useState(null),[r,l]=R.useState(!1),[a,u]=R.useState(1),[d,c]=R.useState(!1),[p,m]=R.useState(null),[g,h]=R.useState(!0),[y,C]=R.useState(!1),[A,_]=R.useState(null),E=async()=>{const{data:k,error:Y}=await W.from("categories").select("*").order("name");Y?(console.error("Error fetching categories: ",Y),S("فشل في تحميل الفئات.","error")):e(k),h(!1)};R.useEffect(()=>{h(!0),E();const k=W.channel("public:categories").on("postgres_changes",{event:"*",schema:"public",table:"categories"},E).subscribe();return()=>{W.removeChannel(k)}},[]);const S=(k,Y)=>{_({message:k,type:Y})},P=async k=>{C(!0);try{const{error:Y}=await W.from("categories").insert([k]);if(Y)throw Y;S("تمت إضافة الفئة بنجاح!","success"),l(!1),u(1)}catch(Y){console.error("Error adding category: ",Y);const z=Y.message||JSON.stringify(Y);S(`حدث خطأ أثناء إضافة الفئة: ${z}`,"error")}finally{C(!1)}},D=async(k,Y)=>{C(!0);try{const{error:z}=await W.from("categories").update(Y).eq("id",k);if(z)throw z;S("تم تحديث الفئة بنجاح!","success"),o(null),l(!1)}catch(z){console.error("Error updating category: ",z);const ee=z.message||JSON.stringify(z);S(`حدث خطأ أثناء تحديث الفئة: ${ee}`,"error")}finally{C(!1)}},F=k=>{m(k),c(!0)},b=async()=>{if(p){C(!0);try{const{error:k}=await W.from("categories").delete().eq("id",p.id);if(k)throw k;S("تم حذف الفئة بنجاح!","success")}catch(k){console.error("Error deleting category: ",k);const Y=k.message||JSON.stringify(k);S(`حدث خطأ أثناء حذف الفئة: ${Y}`,"error")}finally{c(!1),m(null),C(!1)}}},w=k=>{o(k),l(!0)},T=()=>{o(null),l(!0)},M=()=>{o(null),l(!1)},N=Math.ceil(n.length/qe),G=n.slice((a-1)*qe,a*qe);return g?f.jsxs("div",{children:[f.jsx("div",{className:"h-10 bg-gray-700 rounded w-48 mb-6 animate-pulse"}),f.jsx(Fp,{})]}):f.jsxs("div",{children:[A&&f.jsx(Up,{...A,onClose:()=>_(null)}),f.jsx(fe,{isOpen:d,onClose:()=>c(!1),onConfirm:b,title:"تأكيد الحذف",message:f.jsxs(f.Fragment,{children:["هل أنت متأكد أنك تريد حذف الفئة ",f.jsxs("strong",{className:"text-white",children:['"',p==null?void 0:p.name,'"']}),"؟",f.jsx("br",{}),f.jsx("span",{className:"text-yellow-400",children:"لا يمكن التراجع عن هذا الإجراء."})]}),isLoading:y}),f.jsx(Lp,{isOpen:r,title:t?"تعديل الفئة":"إضافة فئة جديدة",onClose:M,children:f.jsx(Dp,{onSubmit:t?k=>D(t.id,k):P,initialData:t,onCancel:M,isLoading:y})}),f.jsx("button",{onClick:T,className:"mb-6 bg-cyan-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-cyan-600 transition-colors",children:"إضافة فئة جديدة"}),f.jsxs("div",{children:[f.jsx("div",{className:"bg-gray-800 rounded-lg shadow-lg overflow-hidden hidden sm:block",children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full",children:[f.jsx("thead",{className:"bg-gray-700",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider",children:"اسم الفئة"}),f.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider",children:"إجراءات"})]})}),f.jsx("tbody",{className:"divide-y divide-gray-700",children:n.length>0?G.map(k=>f.jsxs("tr",{className:"hover:bg-gray-700/50",children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-white",children:k.name}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[f.jsx("button",{onClick:()=>w(k),className:"text-cyan-400 hover:text-cyan-300 ml-4",children:"تعديل"}),f.jsx("button",{onClick:()=>F(k),className:"text-red-500 hover:text-red-400",children:"حذف"})]})]},k.id)):f.jsx("tr",{children:f.jsx("td",{colSpan:2,className:"text-center py-8 text-gray-400",children:"لا توجد فئات حالياً."})})})]})})}),f.jsx("div",{className:"block sm:hidden space-y-3",children:n.length>0?G.map(k=>f.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg flex justify-between items-center",children:[f.jsx("span",{className:"font-medium text-white",children:k.name}),f.jsxs("div",{className:"flex gap-4 flex-shrink-0",children:[f.jsx("button",{onClick:()=>w(k),className:"text-cyan-400 hover:text-cyan-300 text-sm font-medium",children:"تعديل"}),f.jsx("button",{onClick:()=>F(k),className:"text-red-500 hover:text-red-400 text-sm font-medium",children:"حذف"})]})]},k.id)):f.jsx("div",{className:"text-center py-8 text-gray-400 bg-slate-900/50 rounded-lg",children:"لا توجد فئات حالياً."})})]}),n.length>qe&&f.jsx("div",{className:"mt-4",children:f.jsx(dn,{currentPage:a,totalPages:N,onPageChange:u})})]})},Ze=["movies","series","categories"],qp=n=>n.replace(/[A-Z]/g,e=>`_${e.toLowerCase()}`),cn=n=>Array.isArray(n)?n.map(e=>cn(e)):n!==null&&typeof n=="object"&&n.constructor===Object?n.hasOwnProperty("seconds")&&n.hasOwnProperty("nanoseconds")&&Object.keys(n).length===2&&typeof n.seconds=="number"&&typeof n.nanoseconds=="number"?new Date(n.seconds*1e3).toISOString():n.hasOwnProperty("_seconds")&&n.hasOwnProperty("_nanoseconds")&&Object.keys(n).length===2&&typeof n._seconds=="number"&&typeof n._nanoseconds=="number"?new Date(n._seconds*1e3).toISOString():Object.keys(n).reduce((e,t)=>{const o=qp(t);return e[o]=cn(n[t]),e},{}):n,Gp=()=>{const[n,e]=R.useState(!1),[t,o]=R.useState(null),[r,l]=R.useState(!1),[a,u]=R.useState(null),d=(h,y)=>{o({message:h,type:y})},c=async()=>{e(!0),d("بدء عملية النسخ الاحتياطي... قد تستغرق هذه العملية بعض الوقت.","success");try{const h={};for(const S of Ze){const{data:P,error:D}=await W.from(S).select("*");if(D)throw D;h[S]=P||[]}const y=JSON.stringify(h,null,2),C=new Blob([y],{type:"application/json"}),A=URL.createObjectURL(C),_=document.createElement("a");_.href=A;const E=new Date().toISOString().slice(0,10);_.download=`supabase-backup-${E}.json`,document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(A),d("تم إكمال النسخ الاحتياطي بنجاح!","success")}catch(h){console.error("Backup failed:",h);let y="فشل النسخ الاحتياطي. تحقق من وحدة التحكم لمزيد من التفاصيل.";h.code==="42501"&&(y="فشل النسخ الاحتياطي: أذونات غير كافية. تأكد من أن قواعد RLS تسمح للمشرفين بقراءة المجموعات."),d(y,"error")}finally{e(!1)}},p=h=>{var C;const y=(C=h.target.files)==null?void 0:C[0];if(y){const A=new FileReader;A.onload=_=>{var E;try{const S=(E=_.target)==null?void 0:E.result,P=JSON.parse(S);u(P)}catch(S){d("ملف JSON غير صالح.","error"),console.error("JSON parsing error:",S),u(null)}},A.readAsText(y)}},m=()=>{a?l(!0):d("الرجاء تحديد ملف نسخ احتياطي أولاً.","error")},g=async()=>{if(l(!1),!!a){e(!0),d("بدء عملية الاستعادة... هذه العملية ستستغرق وقتاً.","success");try{let h=0,y=[];for(const A of Object.keys(a)){if(!Ze.includes(A)){y.push(A),console.warn(`Skipping restore for unsupported collection: "${A}"`);continue}const _=a[A];if(Array.isArray(_)&&_.length>0){const E=_.map(P=>cn(P)),{error:S}=await W.from(A).upsert(E);if(S)throw console.error(`Error during upsert to "${A}":`,JSON.stringify(S,null,2)),console.error("First failed object (transformed):",JSON.stringify(E[0],null,2)),S;h++}}let C="تمت استعادة البيانات بنجاح!";y.length>0&&(C+=` تم تخطي المجموعات التالية: ${y.join(", ")}.`),h===0&&y.length>0?d(`لم يتم العثور على مجموعات بيانات صالحة للاستعادة في الملف. تم تخطي: ${y.join(", ")}.`,"error"):h>0?d(C,"success"):d("لم يتم العثور على بيانات صالحة للاستعادة في الملف.","error")}catch(h){console.error("Restore failed:",JSON.stringify(h,null,2));const y=`فشلت عملية الاستعادة: ${h.message||"خطأ غير معروف"}. يرجى مراجعة وحدة التحكم للحصول على التفاصيل الفنية.`;d(y,"error")}finally{e(!1),u(null)}}};return f.jsxs("div",{className:"space-y-12",children:[t&&f.jsx(Tn,{...t,onClose:()=>o(null)}),f.jsx(fe,{isOpen:r,onClose:()=>l(!1),onConfirm:g,title:"تأكيد استعادة البيانات",message:f.jsxs(f.Fragment,{children:["هل أنت متأكد أنك تريد استعادة البيانات من هذا الملف؟",f.jsx("br",{}),f.jsx("strong",{className:"text-yellow-400",children:"تحذير:"})," سيتم الكتابة فوق أي بيانات موجودة في المجموعات التي لها نفس الأسماء. لا يمكن التراجع عن هذا الإجراء."]}),isLoading:n}),f.jsxs("section",{children:[f.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"النسخ الاحتياطي للبيانات"}),f.jsxs("div",{className:"bg-slate-900/50 p-6 rounded-lg border border-slate-700 space-y-4",children:[f.jsxs("p",{className:"text-sm text-slate-400",children:["انقر على الزر أدناه لتصدير بيانات المحتوى العام (",Ze.join(", "),"). لا يتم تضمين بيانات المستخدمين والمشرفين الخاصة في هذا النسخ الاحتياطي من جانب العميل لأسباب تتعلق بالأمان والأذونات."]}),f.jsxs("button",{onClick:c,disabled:n,className:"w-full flex items-center justify-center bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors disabled:bg-blue-800 disabled:cursor-wait",children:[n&&f.jsx(ke,{}),n?"جاري التصدير...":"تصدير بيانات المحتوى الآن"]})]})]}),f.jsxs("section",{children:[f.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"استعادة البيانات"}),f.jsxs("div",{className:"bg-slate-900/50 p-6 rounded-lg border border-slate-700 space-y-4",children:[f.jsxs("div",{className:"p-4 border-l-4 border-yellow-500 bg-yellow-500/10 text-yellow-300 rounded-md",children:[f.jsx("strong",{className:"font-bold",children:"تحذير خطير:"})," استعادة البيانات من ملف ستقوم بالكتابة فوق البيانات الحالية في قاعدة البيانات. استخدم هذه الميزة بحذر شديد وتأكد من أنك تستخدم ملف النسخ الاحتياطي الصحيح."]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"1. حدد ملف النسخ الاحتياطي (.json)"}),f.jsx("input",{type:"file",accept:".json",onChange:p,className:"w-full text-sm text-slate-400 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-cyan-500/20 file:text-cyan-300 hover:file:bg-cyan-500/30"})]}),f.jsxs("button",{onClick:m,disabled:n||!a,className:"w-full flex items-center justify-center bg-red-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-red-700 transition-colors disabled:bg-red-800 disabled:cursor-not-allowed disabled:cursor-wait",children:[n&&f.jsx(ke,{}),n?"جاري الاستعادة...":"2. استعادة البيانات"]})]})]})]})},Oe=[{key:"movies",label:"إدارة الأفلام",component:f.jsx(Np,{})},{key:"series",label:"إدارة المسلسلات",component:f.jsx(Pp,{})},{key:"categories",label:"إدارة الفئات",component:f.jsx(Vp,{})},{key:"backup",label:"النسخ الاحتياطي والاستعادة",component:f.jsx(Gp,{})}],Bp=({label:n,tabKey:e,activeTab:t,onClick:o})=>f.jsx("button",{onClick:()=>o(e),className:`px-4 py-3 font-bold transition-colors duration-300 border-b-2 -mb-px flex-shrink-0 ${t===e?"text-cyan-400 border-cyan-400":"text-slate-400 border-transparent hover:text-white hover:border-slate-500"}`,role:"tab","aria-selected":t===e,children:n}),Wp=()=>{var o;const[n,e]=R.useState(Oe[0].key),t=(o=Oe.find(r=>r.key===n))==null?void 0:o.component;return f.jsxs("div",{className:"container mx-auto px-4 py-8 animate-fade-in",children:[f.jsx("h1",{className:"text-3xl md:text-4xl font-black text-white mb-8",children:"لوحة تحكم المشرف"}),f.jsx("div",{className:"flex border-b border-slate-700 mb-6 overflow-x-auto whitespace-nowrap scrollbar-thin scrollbar-thumb-slate-600 scrollbar-track-slate-800",role:"tablist",children:Oe.map(r=>f.jsx(Bp,{label:r.label,tabKey:r.key,activeTab:n,onClick:e},r.key))}),f.jsx("div",{role:"tabpanel",className:"bg-slate-800 p-3 sm:p-6 rounded-lg border border-slate-700",children:t})]})};export{Wp as default};
